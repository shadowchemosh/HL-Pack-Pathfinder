<?xml version="1.0" encoding="UTF-8"?>
<document signature="Hero Lab Data">
  <loadonce key="COM_GMPack_GreenRonin_AdvancedBestiary - Templates"/>
  <fileinfo>
    <info_author><![CDATA[Frumple
      Jeffrey Hersh <jeffrey.m.hersh@gmail.com>]]></info_author>
    <info_history>
      January 15, 2015 Tim Shadow
      -Broke Advanced Bestiary up into seperate files.</info_history>
    </fileinfo>
  <thing id="tmuAirInfu" name="Air-Infused" description="Nature gods and the lords of the elements sometimes grant their champions special powers, infusing them with the essence of one of the four elemental planes. Th e powers in control of the elements grant this gift only rarely, since its strength can remain in a bloodline for many generations. In fact, element-infused creatures occasionally become races unto themselves. Some sages argue deep dwarves owe their origins to earth-infused dwarves, and aquatic elves owe theirs to water-infused elves.\n\nElement-infused creatures of different elemental types have little in common, but infused with the same element often share certain features. A water-infused creature generally has webbed appendages and blue skin, hair, or scales, and a fire-infused creature may have red or orange skin, hair, or scales. An air-infused creature usually looks much like an albino version of its kind, and an earth-infused creature&apos;s dark body is typically pebbled and rough." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="-4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="-2"/>
    <fieldval field="tmINT" value="-2"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="fLightRef"></bootstrap>
    <bootstrap thing="rauArInfBn"></bootstrap>
    <bootstrap thing="rauArInfBW"></bootstrap>
    <bootstrap thing="rauArInfGs"></bootstrap>
    <bootstrap thing="rauElemInf"></bootstrap>
    <bootstrap thing="stAir"></bootstrap>
    <bootstrap thing="xFly">
      <autotag group="Maneuver" tag="Perfect"/>
      </bootstrap>
    <eval phase="Final" priority="10000"><![CDATA[foreach pick in hero where "SpecType.Movement & !thingid.xFly & !component.SelectHelp"
  hero.child[xFly].field[abValue].value = maximum(eachpick.field[abValue].value, hero.child[xFly].field[abValue].value)
nexteach

hero.child[xFly].field[abValue].value = maximum(hero.child[xFly].field[abValue].value, hero.child[Speed].field[tSpeed].value)]]></eval>
    </thing>
  <thing id="tmuAmphibi" name="Amphibious Creature" description="Amphibious creatures belong to neither air nor water and are native to neither land nor sea. Bogs, swamps, and mires-whether hot, mild, or frozen-are their homes.\n\nAn amphibious creature breathes both air and water and is comfortable in both. It has slick-looking, smooth skin and large eyes that gather light, granting it clear vision even in the murk of muddy waters. It also possesses fins or webbed appendages serving it well in water and legs allowing it to move about on land." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Custom" tag="CantSpeak" name="Can&apos;t Speak"/>
    <bootstrap thing="lAquan"></bootstrap>
    <bootstrap thing="rauAmphBrS"></bootstrap>
    <bootstrap thing="stAquatic"></bootstrap>
    <bootstrap thing="raAmphib"></bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <eval phase="Final" priority="10000" index="2"><![CDATA[~ if creature has a land speed but no swim speed add it and then lower land speeds by 10 (min 5)
var mxSpd as number
mxSpd = hero.child[Speed].field[tSpeed].value
if ( hero.child[Speed].field[tSpeed].value <> 0) then 
  if (hero.childfound[xSwim].field[abValue].value = 0) then
    foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
      mxSpd = maximum(eachpick.field[abValue].value, mxSpd)
    nexteach
    hero.child[xSwim].field[abValue].value = maximum(hero.child[xSwim].field[abValue].value, mxSpd)
    hero.child[Speed].field[tSpeedMod].value = maximum(5,hero.child[Speed].field[tSpeedMod].value-10)
    foreach pick in hero from Ability where "SpecType.Movement & !thingid.xSwim & !component.SelectHelp"
      if (eachpick.field[abValue].value <> 0) then
       eachpick.field[abValue].value = maximum(5,eachpick.field[abValue].value-10)
      endif
    nexteach
  endif

~ if we have a swim speed buy no land speed set land speed to 10 ft slower than swim speed (min 5)
elseif ( hero.child[Speed].field[tSpeed].value = 0) then 
  if (hero.childfound[xSwim].field[abValue].value <> 0) then
     hero.child[Speed].field[tSpeed].value = maximum(hero.child[xSwim].field[abValue].value - 10, 5)
  endif
endif]]></eval>
    <eval phase="First" index="3">hero.child[aDEX].field[aNormMin].value = 1</eval>
    <eval phase="Final" index="4"><![CDATA[if (hero.findchild[BaseRace].tagcount[Hero.CantSpeak] + hero.child[aINT].tagcount[Helper.NoScore] <> 0) then
  perform hero.child[lAquan].assign[Hide.Language]
endif]]></eval>
    <eval phase="Final" priority="10000"><![CDATA[~ if creature has natural ac, lower it by 2

if (hero.child[ArmorClass].field[tACNatural].value > 0) then
 hero.child[ArmorClass].field[tACNatural].value -= 2
endif]]></eval>
    <prereq message="Cannot have both land and swim speed.">
      <validate><![CDATA[
~once we've been selected, we're fine (since template gives both land and swim speed).
        validif (@ispick <> 0)

if (hero.child[xSwim].field[abValue].value = 0) then
  validif (hero.child[Speed].field[tSpeed].value <> 0)
elseif (hero.child[xSwim].field[abValue].value <> 0) then
  validif (hero.child[Speed].field[tSpeed].value = 0)
elseif (hero.child[xSwim].field[abValue].value = 0) then
  validif (hero.child[Speed].field[tSpeed].value = 0)
endif]]></validate>
      </prereq>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuApocSwm" name="Apocalypse Swarm" description="Deities show their wrath in many ways-storms, floods, earthquakes, volcanic eruptions, disease-but few means are as viscerally terrifying as a plague. Locusts that devour a nation&apos;s crops, clouds of flies that clog people&apos;s mouths, hordes of rats that spread contagion-these are the so-called apocalypse swarms, the deadly messengers of angry gods.\n\nAn apocalypse swarm looks like a normal swarm of creatures until it engages in combat. Other creatures watching such a battle obtain a better understanding of what apocalypse really means-in the death of another being, they clearly see their own nearness to oblivion. Few can witness another creature&apos;s death by such a means and not find it chilling. Even creatures that were initially willing to stand firm and fight the swarm soon regret their bravery, for damaging such swarms only makes more of them. Thus, an apocalypse swarm grows in destructive capability even as foes succeed in diminishing its strength." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="3"/>
    <fieldval field="tmHitDice" value="5"/>
    <fieldval field="tmHDSides" value="8"/>
    <fieldval field="tmTmSklMul" value="5"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="AddHitDice"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <bootstrap thing="rauApcSwFr"></bootstrap>
    <bootstrap thing="rauApSwGDs"></bootstrap>
    <bootstrap thing="fAbilFoc"></bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raSplit"></bootstrap>
    <eval phase="Final" priority="10000" index="2"><![CDATA[~ double all movement types

hero.child[Speed].field[tSpeedMod].value *= 2

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
  eachpick.field[abValue].value *= 2
nexteach]]></eval>
    <eval phase="Final" priority="10000"><![CDATA[if (hero.tagcount[Hero.HitDice] < 26) then
   hero.childfound[raSwarmAtk].field[abValue].value += 1
endif

~ apply SR
var hd as number
hd = hero.tagcount[Hero.HitDice]
hd = 11 + round(hd / 2,0,-1)
#applysr[hd]]]></eval>
    <prereq message="Swarm subtype required.">
      <validate><![CDATA[ ~we're valid if the creature is a swarm
        validif (#hassubtype[stSwarm] = 1)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuBrkSoul" name="Broken Soul" description="Agony given physical form, a broken soul is the remains of a creature tortured to madness and beyond. The horrifying and heinous treatment he endured lend him unimaginable toughness and grants the power to cause pain and invoke fear in others. Most broken souls are completely mad creatures that hate themselves and all who look upon them.\n\nA broken soul is a horrifying sight. Its twisted and broken body is a mass of bruises, scars, and infected, oozing sores. Its face is a mask of madness and pain.\n\nThe exact circumstances that create a broken soul are unknown, but they invariably form from creatures severely physically and mentally tortured and yet allowed to live. Some believe a broken soul is blessed with power by some god of pain or vengeance, but others say it is the result of a dark bargain between the tortured creature and some infernal being. Whatever their origins, most broken souls seek out their torturers and do all they can to bring upon them even worse pain and fear than they inflicted upon their helpless victims." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="-4"/>
    <fieldval field="tmCON" value="6"/>
    <fieldval field="tmWIS" value="-2"/>
    <fieldval field="tmCHA" value="-6"/>
    <fieldval field="tmAC" value="4"/>
    <fieldval field="cLevelAdj" value="4"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnForbid" tag="Good"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsSoni">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="fDiehard">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fEndure">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fToughness">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="rauBkSlBlG"></bootstrap>
    <bootstrap thing="rauBkSlTrT"></bootstrap>
    <bootstrap thing="rauBkSlAgW"></bootstrap>
    <bootstrap thing="wOtherMel">
      <autotag group="Value" tag="1"/>
      <autotag group="Custom" tag="AddAttack"/>
      <assignval field="wFixDamage" value="1d4 Str, Con and Cha drain"/>
      <assignval field="livename" value="Torturous Touch"/>
      </bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <eval phase="First">hero.child[aDEX].field[aNormMin].value = 1
hero.child[aWIS].field[aNormMin].value = 1
hero.child[aCHA].field[aNormMin].value = 1</eval>
    <eval phase="PreLevel" priority="4000" index="2">#skillbonus[skIntim] += 8</eval>
    <eval phase="PostLevel" priority="10000" index="3">herofield[tConcCheck].value -= 10</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Intelligence score required.">
      <validate>validif (hero.child[aINT].tagis[Helper.NoScore] = 0)</validate>
      </prereq>
    </thing>
  <thing id="tmuCreatSw" name="Creature Swarm" description="A swarm is a dense mass of tiny creatures that alone present little threat but together become deadly. Creature swarms are made up not of normal bats, rats, insects, or other vermin, but of creatures that resemble larger monsters." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Inherited" name="Inherited" abbrev="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <bootstrap thing="rauCrSwHvM"></bootstrap>
    <bootstrap thing="rauCrSwCtG"></bootstrap>
    <bootstrap thing="stSwarm"></bootstrap>
    <eval phase="First" priority="10000"><![CDATA[hero.child[aSTR].field[aNormMin].value = 1
hero.child[aCON].field[aNormMin].value = 1


var nat as number
nat = hero.child[mNatural].field[Bonus].value

if (herofield[tSize].value <= -4) then
  herofield[tSize].value = -4
elseif (herofield[tSize].value = -3) then
  herofield[tSize].value = -4
  hero.child[aDEX].field[aStartMod].value += 2
elseif (herofield[tSize].value = -2) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 2
  hero.child[aDEX].field[aStartMod].value += 4
elseif (herofield[tSize].value = -1) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 6
  hero.child[aDEX].field[aStartMod].value += 6
elseif (herofield[tSize].value = 0) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 10
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 2
elseif (herofield[tSize].value = 1) then
  herofield[tSize].value = -3
  hero.child[mNatural].field[Bonus].value = maximum(nat-2,0)
  hero.child[aSTR].field[aStartMod].value -= 18
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 6
elseif (herofield[tSize].value = 2) then
  herofield[tSize].value = -3
  hero.child[mNatural].field[Bonus].value = maximum(nat-5,0)
  hero.child[aSTR].field[aStartMod].value -= 26
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 10
elseif (herofield[tSize].value = 3) then
  herofield[tSize].value = -2
  hero.child[mNatural].field[Bonus].value = maximum(nat-9,0)
  hero.child[aSTR].field[aStartMod].value -= 32
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 14
elseif (herofield[tSize].value >= 4) then
  herofield[tSize].value = -2
  hero.child[mNatural].field[Bonus].value = maximum(nat-14,0)
  hero.child[aSTR].field[aStartMod].value -= 40
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 18
endif]]></eval>
    <eval phase="PreLevel" priority="1000" index="2"><![CDATA[
var DontKeep as string
DontKeep = "!(wGroup.Natural & (wCategory.RangeThrow | wCategory.RangeProj))"

~ disable all except Natural thrown/hurled weapons on hero
foreach pick in hero from BaseWep where DontKeep
  ~ wManSpike is not listed as a Natural weapon, so ignore it specifically:
  if (eachpick.tagis[IsWeapon.wManSpike] = 0) then
    perform eachpick.assign[Hide.Weapon]
  endif
nexteach]]></eval>
    <eval phase="Validation" priority="1000" index="3">herofield[tSpace].value = 10
herofield[tReach].value = 0</eval>
    <eval phase="First" priority="600" index="4"><![CDATA[field[livename].text = "Swarm"]]>
      <before name="Template Name Modification"/>
      </eval>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDivGuar" name="Divine Guardian" description="Ageless creatures filled with ancient melancholy, divine guardians spend centuries in penitent prayer, thanking their gods for the bittersweet blessing of eternal life. In lost temples and forgotten holy shrines, they while away long years in contemplation, weighing all that they have gained against what they would gain by losing everything.\n\nA divine guardian is a creature charged by a deity to guard an area it considers sacred. This guardianship might be a permanent assignment granted to a willing creature, penitence for a great sin, or a curse laid by the deity on someone who has injured its faithful.\n\nA divine guardian does not age and need not fear hunger or disease so long as it remains in the area it has been tasked to guard. Should it ever leave, it must soon recant the dereliction of its duties, or the long years will weigh heavily upon it, and it will find its freedom in death." compset="Template" uniqueness="unique">
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xImmMind"></bootstrap>
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="xBonusPerc">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xBonusSnsM">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="rauDGAbHea"></bootstrap>
    <bootstrap thing="rauDGBlesL"></bootstrap>
    <bootstrap thing="rauDGDimDr"></bootstrap>
    <bootstrap thing="raNoBreath"></bootstrap>
    <bootstrap thing="rauDGScSit"></bootstrap>
    <bootstrap thing="spAlarm1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spHoldPor1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spArcaLoc1">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 3]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spKnock2">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 3]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spAugury2">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 5]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spClairau3">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 5]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spDismiss4">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 7]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spCommune5">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 9]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spGuarWar6">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >=11]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spForbidd6">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 13]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spBanishm7">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 15]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spRepulsi7">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 17]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spScreen8">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 19]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spAntipat9">
      <containerreq phase="First" priority="750"><![CDATA[count:Hero.HitDice >= 21]]></containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="rauDGBndFh"></bootstrap>
    <bootstrap thing="cfguDivGud"></bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xImmDis"></bootstrap>
    <eval phase="Final" priority="10000"><![CDATA[
      ~ double all movement types
      hero.child[Speed].field[tSpeedMod].value *= 2

      foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
        eachpick.field[abValue].value *= 2
      nexteach

      ~ make fly perfect
      perform hero.childfound[xFly].assign[Maneuver.Perfect]]]></eval>
    </thing>
  <thing id="tmuDrdGhou" name="Dread Ghoul" description="Eaters of the dead that hunger for the living, the first ghouls were the undead remains of humans who had indulged in unwholesome pleasures, such as cannibalism or necrophilia, in life. The original dread ghouls came into being because they had exhorted or compelled others to such acts while alive. Although both types of undead can create more of their kind, dread ghouls maintain their role as leaders of their normal kindred.\n\nAlso called ghoul lords or ghuls, dread ghouls are to ghouls what dread ghasts are to ghasts. Both dread creatures can command normal ghouls, and this situation often creates conflict. Because they cannot command normal ghasts, however, dread ghouls often find themselves on the losing side of such battles.\n\nA dread ghoul looks like a gray and emaciated version of its living form. Its limbs end in terrible claws caked with grave dirt and the rotting flesh of its last disinterred meal. A dread ghoul&apos;s eyes glow dimly with an angry light, and its hunger for flesh is clearly written on its features." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Change all HD to d8."/>
    <fieldval field="tmReplHD" value="8"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="2"/>
    <fieldval field="tmAC" value="2"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="Alignment" tag="Chaotic" name="Chaotic" abbrev="C"/>
    <tag group="Alignment" tag="Evil" name="Evil" abbrev="E"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired" name="Acquired" abbrev="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead" name="Undead" abbrev="Undead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="rauDrdGlSp"></bootstrap>
    <bootstrap thing="rauDrdGlCm"></bootstrap>
    <bootstrap thing="xClimb">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xScent"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <bootstrap thing="raParalysi">
      <assignval field="livename" value="Paralysis (1d4+1 rounds)"/>
      </bootstrap>
    <bootstrap thing="fWepFin"></bootstrap>
    <bootstrap thing="wBite">
      <autotag group="Value" tag="1"/>
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="Value" tag="2"/>
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <eval phase="Final" priority="14000" index="2">
      ~ Set our climb speed
      var speed as number
      speed = hero.child[Speed].field[tSpeed].value
      hero.child[xClimb].field[abValue].value = maximum(hero.child[xClimb].field[abValue].value, speed)</eval>
    <eval phase="PreLevel" priority="10000">
      ~ We have bonuses to many skills
      #skillbonus[skSurvival] += 8
      #skillbonus[skClimb] += 8</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDrdGhst" name="Dread Ghast" description="The first ghouls were humans who rose as undead because they had indulged in unwholesome pleasures in life. the original ghasts rose as undead for similar reasons, but their sins were of vaster scale. A man who broke a taboo by consuming dead bodies to avoid starvation might rise as a ghoul, but a man who murdered his wife and children, then cooked them up as a delicious meal for himself and his mistress would instead rise as a ghast. Cursed with a terrible stench of death and corruption that serves as a warning to the living, the ghast&apos;s greater sins in life grant it greater power in undeath.\n\nThe first dread ghasts were villans of still broader scope. Leaders in life, they influenced the actions of scores of others and led them to participate in a terrible atrocities. today, the dread ghast &quot;race&quot; of undead perpetuates itself though the transmission of vile power. A creature killed but not consumed by a dread ghast rises as another dread ghast. Though the new dread ghast is not under its creator&apos;s control, it usually succumbs to its progenitor&apos;s exhortations to perform the same sorts of evil acts that led to the creation of the &quot;race&quot;. But dread ghasts are careful with this power. Since they have no control over the other dread ghasts they create, they consume the bodies of any victims that seem likely to be more powerful in undeath than themselves.\n\nA dread ghast appears much as it did in life. Its decayed and rotting flesh clings tightly to its bones, and its eyes burn with unholy light. Dread ghasts often have long teeth and wicked claws. Their long, dry tongues loll out of their mouths, making rasping sounds when dragged against their fangs." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Change all HD to d8."/>
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="6"/>
    <fieldval field="tmAC" value="4"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="TypeAndAug" tag="tpUndead" name="Undead" abbrev="Undead"/>
    <tag group="AlgnReq" tag="ChaotEvil" name="Chaotic Evil" abbrev="Chaotic Evil"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired" name="Acquired" abbrev="Acquired"/>
    <tag group="Custom" tag="drdgst_bte"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="rauDrdGhUA">
      <assignval field="livename" value="Stench (20 feet, 1d6+4 minutes)"/>
      </bootstrap>
    <bootstrap thing="raGhoDisea"></bootstrap>
    <bootstrap thing="rauDrdGhUn"></bootstrap>
    <bootstrap thing="wBite">
      <autotag group="Value" tag="1"/>
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="Value" tag="2"/>
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xClimb">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="raParalysi">
      <assignval field="livename" value="Paralysis (1d4+1 rounds)"/>
      </bootstrap>
    <bootstrap thing="rauDrdGhSp"></bootstrap>
    <eval phase="Final" index="3"><![CDATA[
      var biteCnt as number
      biteCnt = 0

      foreach pick in hero from BaseNatWep where "thingid.wBite & !Custom.AddAttack"
        biteCnt += 1
      nexteach

      if (biteCnt <> 0) then
        foreach pick in hero from BaseNatWep where "thingid.wBite & Custom.AddAttack"
          perform eachpick.assign[Hide.Weapon]
        nexteach
      endif]]></eval>
    <eval phase="Final" priority="14000" index="2">
      ~ Set our climb speed
      var speed as number
      speed = hero.child[Speed].field[tSpeed].value
      hero.child[xClimb].field[abValue].value = maximum(hero.child[xClimb].field[abValue].value, speed)</eval>
    <eval phase="PreLevel" priority="10000">
      ~ We have bonuses to many skills
      #skillbonus[skAcrobat] += 10
      #skillbonus[skClimb] += 8</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDrdZomb" name="Dread Zombie" description="Though they resemble the mindless undead that fill out the ranks of armies commanded by evil necromancers and the clerics of dark gods, dread zombies (sometimes known as zombie lords) are fit to command such troops themselves. Dread zombies are created when the magic used to animate a zombie or other corporeal undead goes awry, or when a dread mummy breathes death on a living creature. Sometimes when the ceremony to create a lich fails, the would-be lich instead becomes a dread zombie, attaining eternal unlife at an unexpected cost-the loss of some of the intelligence it had in life. These undead recognize and mourn their lost mental acuity, and this knowledge translates into a sick hunger for living brains.\n\nA dread zombie looks like the walking corpse of a living creature. Maggots writhe beneath its papery skin, and worms crawl through its muscles. Its eyes, however, are not the foggy, fluid-filled orbs of a normal zombie-they shine with a life-like and evil intelligence." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmInfHD" value="All racial HD become d8s"/>
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="wBite"></bootstrap>
    <bootstrap thing="wSlam"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="fToughness"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <bootstrap thing="raAuUnnat">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="rauDrdZBrn"></bootstrap>
    <bootstrap thing="rauDrdZCdZ"></bootstrap>
    <eval phase="PreLevel" priority="10000"><![CDATA[ ~ bonus to natural armor based on size
      var bonus as number
      if (hero.tagis[Size.Small] <> 0) then
        bonus = 1
      elseif (hero.tagis[Size.Medium] <> 0) then
        bonus = 2
      elseif (hero.tagis[Size.Large] <> 0) then
        bonus = 3
      elseif (hero.tagis[Size.Huge] <> 0) then
        bonus = 4
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        bonus = 7
      elseif (hero.tagis[Size.Colossal] <> 0) then
        bonus = 11
        endif
      hero.child[mNatural].field[Bonus].value += bonus]]></eval>
    <eval phase="Final" priority="9000" index="3"><![CDATA[~ Reduce maneuverability tags from flight by one
   if (hero.childfound[xFly].tagis[Maneuver.Poor] <> 0) then
      perform hero.childfound[xFly].delete[Maneuver.?]
      perform hero.childfound[xFly].assign[Maneuver.Clumsy]
   elseif (hero.childfound[xFly].tagis[Maneuver.Average] <> 0) then
      perform hero.childfound[xFly].delete[Maneuver.?]
      perform hero.childfound[xFly].assign[Maneuver.Poor]
   elseif (hero.childfound[xFly].tagis[Maneuver.Good] <> 0) then
      perform hero.childfound[xFly].delete[Maneuver.?]
      perform hero.childfound[xFly].assign[Maneuver.Average]
   elseif (hero.childfound[xFly].tagis[Maneuver.Perfect] <> 0) then
      perform hero.childfound[xFly].delete[Maneuver.?]
      perform hero.childfound[xFly].assign[Maneuver.Good]
   endif]]></eval>
    <eval phase="First" index="4"><![CDATA[~ Hide weapons from template to begin with
perform hero.child[wBite].assign[Hide.Weapon]
perform hero.child[wSlam].assign[Hide.Weapon]

~ Check if we have a natural attack. If not add the slam attack and assign damage.
var cnt as number
cnt = 0
foreach pick in hero from BaseWep where "wGroup.Natural & !Hide.Weapon"
 cnt += 1
nexteach

if (cnt = 0) then
 perform hero.child[wSlam].delete[Hide.Weapon]

  if (hero.tagis[Size.Fine] <> 0) then
        perform hero.child[wSlam].assign[wMain.1_1]
      elseif (hero.tagis[Size.Diminutive] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d2_2]
      elseif (hero.tagis[Size.Tiny] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d3_3]
      elseif (hero.tagis[Size.Small] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d4_4]
      elseif (hero.tagis[Size.Medium] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d6_5]
      elseif (hero.tagis[Size.Large] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d8_6]
      elseif (hero.tagis[Size.Huge] <> 0) then
        perform hero.child[wSlam].assign[wMain.2d6_104]
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        perform hero.child[wSlam].assign[wMain.2d8_204]
      elseif (hero.tagis[Size.Colossal] <> 0) then
        perform hero.child[wSlam].assign[wMain.4d6_106]
        endif

endif

~ Check if we have a bite attack, if not add one
var cnt as number
cnt = 0
foreach pick in hero from BaseWep where "IsWeapon.wBite & !Hide.Weapon"
 cnt += 1
nexteach

if (cnt = 0) then
 perform hero.child[wBite].delete[Hide.Weapon]

  if (hero.tagis[Size.Diminutive] <> 0) then
        perform hero.child[wBite].assign[wMain.1_1]
      elseif (hero.tagis[Size.Tiny] <> 0) then
        perform hero.child[wBite].assign[wMain.1d2_2]
      elseif (hero.tagis[Size.Small] <> 0) then
        perform hero.child[wBite].assign[wMain.1d3_3]
      elseif (hero.tagis[Size.Medium] <> 0) then
        perform hero.child[wBite].assign[wMain.1d4_4]
      elseif (hero.tagis[Size.Large] <> 0) then
        perform hero.child[wBite].assign[wMain.1d6_5]
      elseif (hero.tagis[Size.Huge] <> 0) then
        perform hero.child[wSlam].assign[wMain.1d8_6]
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        perform hero.child[wBite].assign[wMain.2d6_104]
      elseif (hero.tagis[Size.Colossal] <> 0) then
        perform hero.child[wBite].assign[wMain.2d8_204]
      
        endif

endif]]></eval>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead type forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuEthInfu" name="Earth-Infused" description="Nature gods and the lords of the elements sometimes grant their champions special powers, infusing them with the essence of one of the four elemental planes. The powers in control of the elements grant this gift only rarely, since its strength can remain in a bloodline for many generations. In fact, element-infused creatures occasionally become races unto themselves. Some sages argue deep dwarves owe their origins to earth-infused dwarves, and aquatic elves owe theirs to water-infused elves.\n\nElement-infused creatures of different elemental types have little in common, but infused with the same element often share certain features. A water-infused creature generally has webbed appendages and blue skin, hair, or scales, and a fire-infused creature may have red or orange skin, hair, or scales. An air-infused creature usually looks much like an albino version of its kind, and an earth-infused creature&apos;s dark body is typically pebbled and rough." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="-4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="-2"/>
    <fieldval field="tmINT" value="-2"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xBurrow">
      <autotag group="Maneuver" tag="Perfect"/>
      </bootstrap>
    <bootstrap thing="fLightRef"></bootstrap>
    <bootstrap thing="rauElemInf"></bootstrap>
    <bootstrap thing="rauEhInfEA"></bootstrap>
    <bootstrap thing="rauEhInfGd"></bootstrap>
    <bootstrap thing="xTremorsen">
      <autotag group="Value" tag="20"/>
      </bootstrap>
    <bootstrap thing="stAir"></bootstrap>
    <eval phase="Final" priority="10000"><![CDATA[foreach pick in hero from BaseSpeed where "SpecType.Movement & !thingid.xBurrow & !component.SelectHelp"
  hero.child[xBurrow].field[abValue].value = maximum(eachpick.field[abValue].value, hero.child[xBurrow].field[abValue].value)
nexteach

hero.child[xBurrow].field[abValue].value = maximum(hero.child[xBurrow].field[abValue].value, hero.child[Speed].field[tSpeed].value)]]></eval>
    </thing>
  <thing id="tmuFirInfu" name="Fire-Infused" description="Nature gods and the lords of the elements sometimes grant their champions special powers, infusing them with the essence of one of the four elemental planes. The powers in control of the elements grant this gift only rarely, since its strength can remain in a bloodline for many generations. In fact, element-infused creatures occasionally become races unto themselves. Some sages argue deep dwarves owe their origins to earth-infused dwarves, and aquatic elves owe theirs to water-infused elves.\n\nElement-infused creatures of different elemental types have little in common, but infused with the same element often share certain features. A water-infused creature generally has webbed appendages and blue skin, hair, or scales, and a fire-infused creature may have red or orange skin, hair, or scales. An air-infused creature usually looks much like an albino version of its kind, and an earth-infused creature&apos;s dark body is typically pebbled and rough." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmINT" value="-2"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="-4"/>
    <fieldval field="tmCON" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="stEarth"></bootstrap>
    <bootstrap thing="rauFrInfBW"></bootstrap>
    <bootstrap thing="rauFrInfFH"></bootstrap>
    <bootstrap thing="rauFrInfFw"></bootstrap>
    <bootstrap thing="raHeat">
      <assignval field="livename" value="Heat (1d6)"/>
      </bootstrap>
    <bootstrap thing="fIronWill"></bootstrap>
    </thing>
  <thing id="tmuFungal" name="Fungal Creature" description="Fungal creatures are plants that grow up out of the dead bodies of other creatures, taking on the forms and some of the abilities of their hosts. Fungal creatures tend to be peaceful and inoffensive, and they are usually content to stand in circles and absorb the nutrients of the earth as they quietly converse about nature and the miracle of their own existence. In fact, fungal creatures are notoriously difficult to disturb once they have gathered in a circle, since they break off their conversations only if attacked or if conversation becomes impossible.\n\nOnce a year, however, fungal creatures become surprisingly violent, succumbing to the drive to reproduce and seeking out other living creatures to infect with their spores. Each day during this one-week spawning period, every fungal creature seeks a living creature of similar size to kill with its spore cloud.\n\nA fungal creature&apos;s body resembles a white, bloated version of its host&apos;s. Mushroom-like caps and outcroppings dot the fungal creature&apos;s form, giving it a nightmarish appearance." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="All racial HD become d8s"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="Helper" tag="NoTypeAbil" name="No Type Abilities" abbrev="No Type Abilities"/>
    <tag group="TemplHelp" tag="NoClasses" name="NoClasses" abbrev="NoClasses"/>
    <tag group="TypeAndAug" tag="tpPlant"/>
    <tag group="TemplHelp" tag="Inherited" name="Inherited" abbrev="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="rauFngPoiC"></bootstrap>
    <bootstrap thing="rauFngMet"></bootstrap>
    <bootstrap thing="rauFngRej"></bootstrap>
    <bootstrap thing="raFunPlanD"></bootstrap>
    <bootstrap thing="typPlant"></bootstrap>
    <bootstrap thing="lSylvan"></bootstrap>
    <bootstrap thing="rauFngPoiB"></bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Helper" tag="NatTwoHand"/>
      </bootstrap>
    <bootstrap thing="rauFngSpwn"></bootstrap>
    <eval phase="Final" priority="500" index="2">hero.child[Speed].field[tSpeedMod].value -= 10</eval>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead type forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuGenieBd" name="Genie-Bound" description="Wishes are temptations-nightmares encased in glorious dreams. They are not goals; they are longings for the impossible, and many of these unfulfilled desires remain that way. But some creatures who refuse to see the truth eventually find themselves genie-bound.\n\nGenies are powerful lords of the elemental planes. Djinn live on Elemental Plane of Air, while the powerful efreet rule much of the Elemental Plane of Fire. The efreet bestow wishes on followers and allies at will, but only the greatest of the djinn can grant wishes.\n\nGenie-bound creatures are beings who have sold themselves into the service of a powerful genie in exchange for granted wishes. If the genie fulfills all the victim&apos;s wishes faithfully, the genie-bound creature must then serve the genie as a slave for one year and a day per wish granted.\n\nDjinn treat their wish-slaves fairly well. Each genie-bound creature is a partner to them-a creature with which they struck a fair bargain. Djinn usually send their genie-bound creatures on errands or quests that are beneath their dignity. Djinni-bound creatures usually find their service lonesome and onerous, but not so terrible that they nurse dreams of escape.\n\nEfreet, on the other hand, treat their genie-bound creatures poorly and often demand that they perform dangerous tasks. An efreeti treats its genie-bound creatures as the slaves they truly are and does what it wills with them for the duration of their service. Thus, efreeti-bound creatures often seek a means to break their pacts with their masters, but since only a wish can free them, they often end up enslaved to a new master." compset="Template" uniqueness="unique">
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <bootstrap thing="rauGBGMDj"></bootstrap>
    <bootstrap thing="rauGBGenBd"></bootstrap>
    <bootstrap thing="rauGBGenEp"></bootstrap>
    <bootstrap thing="cfguGenBnd"></bootstrap>
    </thing>
  <thing id="tmuHalfGia" name="Half-Giant" description="Most true giants view their ability to procreate with other races and other kinds of giants as a curse upon their kind. Indeed, the storm giant seer Rodvind Tusenmaug wrote in his salient text, Blood of Thunder, “Beware your cousins of the stone and hill, for they are closest to the corrupting earth. Beware your cousins of ice and fire, for their blood runs too cold and too hot. Even more, beware your brothers of the clouds, for their hearts blow with the prevailing winds. But most of all, beware the half-spawn of your own kind, for their blood is the wine of temptation and their souls have no masters. Unchecked, they will be the ruin of your castles and the despoilers of your lands.”\n\nA few kinds of giants, however, view the ability to breed with other races as a gift.\n\nNo matter how an individual giant feels about mating with other races, the fact remains that they are physically capable of procreating with nearly any creature of naturally humanoid form. Such a union produces a child with most of the traits of its nongiant parent, or of the mother if both parents are giants. Giant parentage often results in increased size and strength, and it bestows the giants&apos; famous knack for throwing boulders. Half-giant blood dilutes in just one generation, however; the children of nongiant/half-giant pairs display no trace of giant heritage except perhaps strangely colored hair, skin, or eyes. Similarly, the children of a giant and a half-giant show few signs of the nongiant grandparent&apos;s blood.\n\nIn addition to their strength and size, half-giants often exhibit other traces of their giant parent&apos;s heritage. A cloud half-giant has white hair throughout its life, and an ettin half-giant always has two heads. A fire half-giant&apos;s body is coal-black, and a hill half-giant tends toward fat even when perfectly fit. A frost half-giant has yellow eyes, hair, and teeth, and a storm half-giant&apos;s hair is dark green. An ogre half-giant usually has overly long arms and large hands. A troll half-giant has the warty green skin common to that race.\n\nTroll and ogre half-giants are by far the most common specimens; other half-giants are born only rarely. Though usually encountered singly, half-giants might be encountered in droves in areas where they are deliberately fostered. For example, an exiled hill giant might rule a tribe of orcs, or a colony of grimlocks might be allied with stone giants." compset="Template" uniqueness="unique">
    <fieldval field="tmAC" value="1"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="Language" tag="lGiant"/>
    <bootstrap thing="cfguHalfGi"></bootstrap>
    <bootstrap thing="raRockCat"></bootstrap>
    <bootstrap thing="stGiant"></bootstrap>
    <bootstrap thing="raRockThro"></bootstrap>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Size Small or larger required.">
      <validate><![CDATA[        ~once we've been selected, we're fine 
        validif (@ispick <> 0)

~ valid if size is less than Small
validif (herofield[tSize].value >= -1)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuMetalCl" name="Metal-Clad" description="Metal-clad creatures are bonded to metal either by birth or through magic. Shining metal shells coat their forms, armoring them against attacks but also burdening them with unwieldy weight.\n\nA metal-clad creature can be born of metal-clad parents, and indeed whole races of metal-clad creatures can exist. Conversely, a magical ritual or a spell can cover a creature in metal, and sometimes the gods curse greedy individuals by covering them in the precious metals they most covet." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="cfguMetalC"></bootstrap>
    </thing>
  <thing id="tmuMuckCre" name="Muck Creature" description="Muck creatures are elemental beings made of earth and water. They exist in small numbers on both the Elemental Plane of Water and the Elemental Plane of Air, but many also thrive on the Material Plane in marshlands and other swampy locations.\n\nA muck creature resembles a pile of dripping mud and slime formed into the vague shape of some other being. Its sludge like body drips nauseating muck, and it leaves puddles of the slippery stuff wherever it goes.\n\nMuck creatures tend to be lazy and antisocial, but almost any personality type can come to the fore in an individual." compset="Template" uniqueness="unique">
    <fieldval field="tmCON" value="4"/>
    <fieldval field="tmCHA" value="-2"/>
    <fieldval field="tmReplRaHD" value="Change to d10."/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TypeAndAug" tag="tpOutsider"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xClimb"></bootstrap>
    <bootstrap thing="xSwim"></bootstrap>
    <bootstrap thing="stElement"></bootstrap>
    <bootstrap thing="stExtrapla"></bootstrap>
    <bootstrap thing="rauAirBrea"></bootstrap>
    <bootstrap thing="rauEWMaste"></bootstrap>
    <bootstrap thing="rauMkExMk"></bootstrap>
    <bootstrap thing="rauMkMudbl"></bootstrap>
    <bootstrap thing="rauMkSmoth"></bootstrap>
    <bootstrap thing="xBonusEsAr">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="4"/>
      <assignval field="livename" value="in areas of mud or silt"/>
      </bootstrap>
    <bootstrap thing="lAquan"></bootstrap>
    <bootstrap thing="lTerran"></bootstrap>
    <bootstrap thing="xBonusSwim">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="raGrab"></bootstrap>
    <bootstrap thing="stWater"></bootstrap>
    <bootstrap thing="stEarth"></bootstrap>
    <eval phase="First" index="2">~ if we already have Terran or Aquan languages hide them since we get them with the template
perform hero.childfound[lAquan].assign[Hide.Language]
perform hero.childfound[lTerran].assign[Hide.Language]</eval>
    <eval phase="Final" priority="10000"><![CDATA[~ get rid of fly 
if (hero.childfound[xFly].field[abValue].value <> 0) then
        hero.childfound[xFly].field[abValue].value = 0
        endif

~ calculate new climb and swim speeds

var mxSpd as number
mxSpd = 0
foreach pick in hero where "SpecType.Movement & !component.SelectHelp"
  mxSpd = maximum(eachpick.field[abValue].value, mxSpd)
nexteach

hero.child[xSwim].field[abValue].value = maximum(hero.child[xSwim].field[abValue].value,.5 * mxSpd)
hero.child[xClimb].field[abValue].value = maximum(hero.child[xClimb].field[abValue].value,.5 * mxSpd)]]></eval>
    <prereq message="Earth or Water subtype required" iserror="no">
      <validate><![CDATA[~once we've been selected, we're fine 
        validif (@ispick <> 0)

~we're valid if the hero has earth or water subtypes
        validif (#hassubtype[stEarth] + #hassubtype[stWater] <> 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Living creature required." iserror="no">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuNegEnCh" name="Negative-Energy Charged" description="Undead creatures are intrinsically linked to the Negative Energy Plane, and this linkage grants them both their semblance of life and their death-bringing powers. Through dark magic, a spellcaster can strengthen an undead creature&apos;s link to the chilling source of its unnatural existence. The resulting creature is empowered by the Negative Energy Plane and cloaked in its black energy." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="rauNgCSrDk"></bootstrap>
    <bootstrap thing="rBlindSi">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="xDamRdGood">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="rauNgCChAk"></bootstrap>
    <bootstrap thing="rauNgCObsE"></bootstrap>
    <bootstrap thing="rauNgCRsPs"></bootstrap>
    <bootstrap thing="fImpInit"></bootstrap>
    <eval phase="First" priority="10000" index="2">~ add +2 dodge bonus to AC

hero.child[ArmorClass].field[tACDodge].value += 2</eval>
    <eval phase="Final" priority="10000"><![CDATA[~ double all movement types

      hero.child[Speed].field[tSpeedMod].value *= 2

      foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
        eachpick.field[abValue].value *= 2
        nexteach]]></eval>
    <prereq message="Undead type is required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since a template might be added later.
        validif (@ispick <> 0)

        validif (#hastype[tpUndead] <> 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuNightCr" name="Nightmare Creature" description="Nightmare creatures are born evil, but few possess the full range of their abilities, or the skill to use them, at birth. Most nightmare creatures gain their powers gradually, blundering into other creature&apos;s dreams without understanding what they have done at first. Gradually, however, a nightmare creature learns to use its ability to control other creatures&apos; dreams for its own purposes, causing “prophetic&apos; dreams or killing those who anger it. When such events begin to occur, nightmare creatures are often driven from their communities. Unfortunately, such precautions rarely prevent the nightmare creature from exacting its revenge.\n\nNightmare creatures have all kinds of motivations for their evil acts, but most harm others just for the sense of empowerment that doing so gives them. Some take sadistic glee in terrifying other creatures and thrill at the powers they have in the dream world. Others enjoy impersonating deities and granting worshipers “revelations&apos; that can benefit the nightmare creature or turn good people against one another. Whatever forms their tortures take, nightmare creatures have no pity or empathy for their victims.." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xDamRdGoSi">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xImmIllusi"></bootstrap>
    <bootstrap thing="xRegen">
      <autotag group="Value" tag="5"/>
      <assignval field="livename" value="silver or good"/>
      </bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="120"/>
      </bootstrap>
    <bootstrap thing="spProtGoo1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Constant"/>
      </bootstrap>
    <bootstrap thing="spShadWal5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="rauNmCrFeA">
      <assignval field="livename" value="Fear Aura (60 ft.)"/>
      </bootstrap>
    <bootstrap thing="rauNmCrFrP"></bootstrap>
    <bootstrap thing="raNmCrNtTr"></bootstrap>
    <bootstrap thing="rauNmCrFeD"></bootstrap>
    <bootstrap thing="xFly">
      <autotag group="Maneuver" tag="Perfect"/>
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raNmCrNmSp"></bootstrap>
    <bootstrap thing="stEvil"></bootstrap>
    <eval phase="PreLevel" priority="4000">#skillbonus[skStealth] += 6
#skillbonus[skIntim] += 6</eval>
    <exprreq message="Intelligence of 6 or greater required." iserror="no"><![CDATA[#attrvalue[aINT] >= 6]]></exprreq>
    <exprreq message="Charisma of 6 or greater required." iserror="no"><![CDATA[#attrvalue[aCHA] >= 6]]></exprreq>
    </thing>
  <thing id="tmuPlgBear" name="Plague Bearer" description="Plague bearer creatures bring doom with them everywhere. These living agents of infection and corruption are host to a dozen illnesses and half a dozen plagues. Whether they intend it or not, they spread disease wherever they go, contaminating other creatures by their mere presence. Some plague bearers relish this power, but others despise and fear it.\n\nA plague bearer looks like a normal creature infected with many terrible plagues. Black boils cover its body, its skin is red and cracked, its hair is patchy, and its hide and nails flake off and fall around it. It coughs, it wheezes, and its eyes well with tears, but still its back remains unbent by its apparent suffering, and it lives on despite all manner of maladies." compset="Template" uniqueness="unique">
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="rauPgBrCar"></bootstrap>
    <bootstrap thing="rauPgBrDis"></bootstrap>
    <bootstrap thing="rauPgBrDFl"></bootstrap>
    <bootstrap thing="rauPgBrQIn"></bootstrap>
    <bootstrap thing="rauPgBrDsC"></bootstrap>
    <bootstrap thing="xImmDis"></bootstrap>
    </thing>
  <thing id="tmuSaurain" name="Saurian" description="Saurians are lizardlike beings that live closer to the natural world than others of their kinds. Carnivorous and voracious, saurians fight with food on their minds, tearing happily into the bodies of their fallen foes to feed on the tender meat.\n\nA saurian looks like a normal member of its race, except that is has the scales, teeth, and claws of a hunter. Its scales may be any color of the rainbow, but a given saurian tends to have scales of only one or two shades. Saurian fire giants, for instance, have patterned red and orange scales, whereas saurian hill giants have dark brown scales on their backs and creamier scales covering their bellies and faces." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="2"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmAC" value="2"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xScent"></bootstrap>
    <bootstrap thing="raJump"></bootstrap>
    <bootstrap thing="rauLeapChg"></bootstrap>
    <bootstrap thing="lDraconic"></bootstrap>
    <bootstrap thing="wBite">
      <autotag group="Value" tag="1"/>
      <autotag group="Hide" tag="Weapon"/>
      </bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="Value" tag="2"/>
      <autotag group="Hide" tag="Weapon"/>
      </bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <eval phase="PreLevel" priority="10000" index="2"><![CDATA[~ check if we have a bite attack. If not assign one as secondary attack.
if (hero.childfound[wBite].tagcountstr["!Hide.Weapon"] <> 0) then
  perform hero.child[wBite].delete[Hide.Weapon]
  perform hero.child[wBite].delete[Helper.NatPrimary]
  ~ assign damage
      if (hero.tagis[Size.Fine] <> 0) then
        perform hero.child[wBite].assign[wMain.1_1]
      elseif (hero.tagis[Size.Diminutive] <> 0) then
        perform hero.child[wBite].assign[wMain.1d2_2]
      elseif (hero.tagis[Size.Tiny] <> 0) then
        perform hero.child[wBite].assign[wMain.1d3_3]
      elseif (hero.tagis[Size.Small] <> 0) then
        perform hero.child[wBite].assign[wMain.1d4_4]
      elseif (hero.tagis[Size.Medium] <> 0) then
        perform hero.child[wBite].assign[wMain.1d6_5]
      elseif (hero.tagis[Size.Large] <> 0) then
        perform hero.child[wBite].assign[wMain.1d8_6]
      elseif (hero.tagis[Size.Huge] <> 0) then
        perform hero.child[wBite].assign[wMain.2d6_104]
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        perform hero.child[wBite].assign[wMain.2d8_204]
      elseif (hero.tagis[Size.Colossal] <> 0) then
        perform hero.child[wBite].assign[wMain.4d6_106]
        endif
endif

~ check if have a claw attack. if not assign one.
if (hero.childfound[wClaw].tagcountstr["!Hide.Weapon"] <> 0) then
  perform hero.child[wClaw].delete[Hide.Weapon]
  ~ assign damage
      if (hero.tagis[Size.Diminutive] <> 0) then
        perform hero.child[wClaw].assign[wMain.1_1]
      elseif (hero.tagis[Size.Tiny] <> 0) then
        perform hero.child[wClaw].assign[wMain.1d2_2]
      elseif (hero.tagis[Size.Small] <> 0) then
        perform hero.child[wClaw].assign[wMain.1d3_3]
      elseif (hero.tagis[Size.Medium] <> 0) then
        perform hero.child[wClaw].assign[wMain.1d4_4]
      elseif (hero.tagis[Size.Large] <> 0) then
        perform hero.child[wClaw].assign[wMain.1d6_5]
      elseif (hero.tagis[Size.Huge] <> 0) then
        perform hero.child[wClaw].assign[wMain.1d8_6]
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        perform hero.child[wClaw].assign[wMain.2d6_104]
      elseif (hero.tagis[Size.Colossal] <> 0) then
        perform hero.child[wClaw].assign[wMain.2d8_204]
        endif
endif]]></eval>
    <eval phase="First" priority="1000" index="3">hero.child[aDEX].field[aNormMin].value = 1</eval>
    <eval phase="PreLevel" priority="10000"><![CDATA[~ Assign Reptilian subtype if have Humanoid type
if (#hastype[tpHumanoid] <> 0) then
 perform hero.assign[Subtype.stReptilia]
 perform hero.assign[Race.stReptilia]
 perform hero.assign[IsRace.stReptilia]
endif]]></eval>
    <prereq message="Animal, Humanoid, Monstrous Humanoid or Magical Beast type required." iserror="no">
      <validate><![CDATA[        ~once we've been selected, we're fine (since a template might be added later.
        validif (@ispick <> 0)

        validif (#hastype[tpAnimal] + #hastype[tpHumanoid] + #hastype[tpMonHuman] + #hastype[tpMagBeast] <> 0)]]></validate>
      </prereq>
    <prereq message="Reptilian subtype forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since a template might be added later.
        validif (@ispick <> 0)

        validif (#hassubtype[stReptilia] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuWarMach" name="War Machine" description="A war machine is a construct of terrible power built from various metals and granted the powers of another creature. Designed to resemble a living creature, its body is a complicated construction of layered metals that give it the shape the desired creature normally would have. Magic grants the war machine the powers of the creature it was built to resemble.\n\nA war machine follows the commands of its creator much as a golem does. Although unintelligent, it has an instinctual understanding of its abilities and of combat. A war machine is capable of limited strategy when carrying out its creator&apos;s instructions and it can follow any simple command that the creator can give in a couple sentences.\n\n{b}Creating a War Machine{/b}\nWar machines are created in the same manner as golems. Because a war machine is composed of various metals, it weighs three times what the base creature does.\n\nCONSTRUCTION\nCL 5th + war machine&apos; s CR; Price 2,400 gp × twice the war machine&apos;s CR\n\nRequirements Craft Construct, geas/quest, greater polymorph, limited wish, resist energy, creator must be caster level 5th + war machine&apos; CR; Skill Craft (weaponsmithing) DC 25; Cost 1,200 gp × the war machine&apos;s CR" compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="6"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="-4"/>
    <fieldval field="tmAC" value="5"/>
    <fieldval field="tmInfHD" value="All racial HD become d10s"/>
    <fieldval field="tmReplRaHD" value="10"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TypeAndAug" tag="tpConst"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xImmAcid"></bootstrap>
    <bootstrap thing="xImmElec"></bootstrap>
    <bootstrap thing="rauWarMBbl"></bootstrap>
    <bootstrap thing="rauWarMEnA"></bootstrap>
    <bootstrap thing="rauMetalBy"></bootstrap>
    <bootstrap thing="rauWarMSpr"></bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <eval phase="PreLevel" priority="4000">#skillbonus[skAcrobat] += 10
#skillbonus[skClimb] += 10
#skillbonus[skPercep] += 10</eval>
    <eval phase="Final" priority="10000" index="3"><![CDATA[~ double all movement types

      hero.child[Speed].field[tSpeedMod].value *= 2

      foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
        eachpick.field[abValue].value *= 2
        nexteach]]></eval>
    <eval phase="First" index="2"><![CDATA[ ~we don't have an INT score
      perform hero.child[aINT].assign[Helper.NoScore]
      perform hero.child[aCON].assign[Helper.NoScore]

~ remove feats except for bonus feats
foreach pick in hero from BaseFeat where "!thing.skipprereq"
        perform eachpick.assign[Helper.FtDisable]
        nexteach]]></eval>
    </thing>
  <thing id="tmuDmnPoss" name="Demon-Possessed" description="No evil is as terrible as one having the outward form of goodness. Demons can cavort in the skins of mortal creatures and cause havoc while disguised by the flesh of virtue. While in the guise of a mortal, a demon can convert the weak-willed to evil and provide power and counsel to other mortal pawns while gleefully using the mortal body as a shield against attack.\n\nA demon&apos;s presence can have a variety of physical effects on the mortal creature it possesses. Glowing eyes, bristly hair, warts, boils, scars, long nails, and twisted limbs can all be signs of demon possession, as can more obvious characteristics, such as bulging muscles and flaming-red skin. Many demon-possessed creatures, however, show no outward sign at all.\n\nDemons possess mortal creatures for countless reasons, and their chaotic nature makes patterns of behavior difficult to determine. They enjoy corrupting goodness and helping evil creatures, but many also use possession to hide from pursuit or to acquire protection. For example, a demon in combat might possess a foe to make itself a difficult target for the other members of the group." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="ChaotEvil"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="xDamRdIron">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="20"/>
      </bootstrap>
    <bootstrap thing="stChaotic"></bootstrap>
    <bootstrap thing="stEvil"></bootstrap>
    <bootstrap thing="xBonusFort">
      <autotag group="Value" tag="2"/>
      <assignval field="livename" value="vs. poison"/>
      </bootstrap>
    <bootstrap thing="rauDPPossd"></bootstrap>
    <bootstrap thing="rauDPProfn"></bootstrap>
    <bootstrap thing="rauDPSplVl"></bootstrap>
    <bootstrap thing="cfgDmnPoss"></bootstrap>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuWatInfu" name="Water-Infused" description="Nature gods and the lords of the elements sometimes grant their champions special powers, infusing them with the essence of one of the four elemental planes. Th e powers in control of the elements grant this gift only rarely, since its strength can remain in a bloodline for many generations. In fact, element-infused creatures occasionally become races unto themselves. Some sages argue deep dwarves owe their origins to earth-infused dwarves, and aquatic elves owe theirs to water-infused elves.\n\nElement-infused creatures of different elemental types have little in common, but infused with the same element often share certain features. A water-infused creature generally has webbed appendages and blue skin, hair, or scales, and a fire-infused creature may have red or orange skin, hair, or scales. An air-infused creature usually looks much like an albino version of its kind, and an earth-infused creature&apos;s dark body is typically pebbled and rough." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="4"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="-2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="stWater"></bootstrap>
    <bootstrap thing="xSwim"></bootstrap>
    <bootstrap thing="spQuench3">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="rauWtInfWB"></bootstrap>
    <bootstrap thing="rauWtInfBr"></bootstrap>
    <bootstrap thing="rauWtInfWa"></bootstrap>
    <bootstrap thing="wOtherRng">
      <autotag group="Value" tag="1"/>
      <autotag group="wSpecial" tag="Nonlethal"/>
      <autotag group="wType" tag="B"/>
      <assignval field="livename" value="Waterball"/>
      </bootstrap>
    <bootstrap thing="fGreatFort"></bootstrap>
    <eval phase="PreLevel" priority="9000" index="2"><![CDATA[~ Change waterball damage due to size

~ Fine or smaller
if (herofield[tSize].value <= -4) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.1_1]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Dimuntive
elseif (herofield[tSize].value = -3) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.1d2_2]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Tiny
elseif (herofield[tSize].value = -2) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.1d4_4]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Small
elseif (herofield[tSize].value = -1) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.1d6_5]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Medium
elseif (herofield[tSize].value = 0) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.1d8_6]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Large
elseif (herofield[tSize].value = 1) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.2d6_104]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Huge
elseif (herofield[tSize].value = 2) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.2d8_305]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Gargantuan
elseif (herofield[tSize].value = 3) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.4d6_106]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
~ Colossal or bigger
elseif (herofield[tSize].value >= 4) then
   perform hero.child[wOtherRng].tagreplace[wMain.?,wMain.4d8_206]
   perform hero.child[wOtherRng].delete[Helper.DamageUp]
   perform hero.child[wOtherRng].delete[Helper.NatSizeDmg]
endif]]></eval>
    <eval phase="Final" priority="10000"><![CDATA[
    
foreach pick in hero where "SpecType.Movement & !thingid.xSwim & !component.SelectHelp"
  hero.child[xSwim].field[abValue].value = maximum(eachpick.field[abValue].value, hero.child[xSwim].field[abValue].value)
nexteach

hero.child[xSwim].field[abValue].value = maximum(hero.child[xFly].field[abValue].value, hero.child[Speed].field[tSpeed].value)]]></eval>
    </thing>
  <thing id="tmuDrdGhos" name="Dread Ghost" description="Like normal ghosts, dread ghosts are restless spirits that exist on both the Material and the Ethereal Planes. Unlike many other dread undead, dread ghosts have no special power over others of their kind, but some mystery of their creation makes them more powerful than standard ghosts.\n\nThe appearance of dread ghosts is as varied as that of standard ghosts. Some exhibit telltale signs of their causes of death; others simply appear as rotting or skeletal as their corpses. A few appear as they did in life, or as idealized versions of themselves." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="All racial HD become d8s"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmCHA" value="8"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="ClassSkill" tag="skPercep" name="Perception" abbrev="Perception"/>
    <tag group="ClassSkill" tag="skSenseMot" name="Sense Motive" abbrev="Sense Motive"/>
    <tag group="ClassSkill" tag="skSpellcr" name="Spellcraft" abbrev="Spellcraft"/>
    <tag group="ClassSkill" tag="skStealth" name="Stealth" abbrev="Stealth"/>
    <tag group="TemplHelp" tag="Acquired" name="Acquired" abbrev="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead" name="Undead" abbrev="Undead"/>
    <tag group="ClassSkill" tag="skClimb" name="Climb" abbrev="Climb"/>
    <tag group="ClassSkill" tag="skFly" name="Fly" abbrev="Fly"/>
    <tag group="ClassSkill" tag="skIntim" name="Intimidate" abbrev="Intimidate"/>
    <tag group="ClassSkill" tag="skKnowArca" name="Knowledge (Arcana)" abbrev="Knowledge (Arcana)"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClassSkill" tag="skKnowRel" name="Knowledge (Religion)" abbrev="Knowledge (Religion)"/>
    <bootstrap thing="xGhostCorT"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="stIncorpor"></bootstrap>
    <bootstrap thing="xFly">
      <autotag group="Maneuver" tag="Perfect"/>
      </bootstrap>
    <bootstrap thing="cfguDrdGhs"></bootstrap>
    <bootstrap thing="xGhostRej"></bootstrap>
    <bootstrap thing="xSplRs"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="raDarkVis"></bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <eval phase="PostLevel" priority="10000">~ We have bonuses to Perception, Stealth
      #skillbonus[skStealth] += 8
      #skillbonus[skPercep] += 8
      #skillbonus[skFly] += 8</eval>
    <eval phase="Final" priority="10000" index="2"><![CDATA[var spd as number
spd = hero.child[Speed].field[tSpeed].value

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
 spd = maximum(spd, eachpick.field[abValue].value)
nexteach

hero.child[xFly].field[abValue].value = 2 * spd]]></eval>
    <eval phase="PostLevel" priority="10000" index="3">hero.child[xSplRs].field[abValue].value = 10 + #totallevelcount[]</eval>
    <exprreq message="Charisma 6 required." iserror="no"><![CDATA[#attrvalue[aCHA] >= 6]]></exprreq>
    <prereq message="Living creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDrdWigt" name="Dread Wight" description="Dread wights are the animate remains of creatures that were terribly violent and hateful in life. Th ey exist only to continue their reign of terror against others, causing fear, pain, sorrow, and death whenever they can.\n\nA dread wight has the features it did in life, but they are emaciated and wizened. Its face is constantly twisted into a rictus grin of cruelty, and an intense hatred of the living burns in its eyes. Its weak-looking form disguises an unnatural strength and speed that makes its lifedraining powers stunningly deadly." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Change all HD to d8."/>
    <fieldval field="tmReplHD" value="8"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmAC" value="4"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="Alignment" tag="Evil" name="Evil" abbrev="E"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired" name="Acquired" abbrev="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead" name="Undead" abbrev="Undead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Alignment" tag="Chaotic" name="Chaotic" abbrev="C"/>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d4_4"/>
      </bootstrap>
    <bootstrap thing="rBlindsen">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raEnDrain">
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="rauDrdWgtC"></bootstrap>
    <bootstrap thing="rauDrdWtCS"></bootstrap>
    <eval phase="PreLevel" priority="10000">~ We have bonuses to many skills
      #skillbonus[skStealth] += 8</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuBramble" name="Bramble" description="These wicked watchers of the woodlands haunt dark thickets in forests and fields, stalking the unwary. Most dangerous in the tangled briar patches and thorny copses they call home, brambles often make clear trails through their domains that turn into winding mazes designed to confuse and entrap victims.\n\nA bramble&apos;s body is covered with barklike skin and wrapped in tangled, thorny vines. Its face is wizened and cruel, and yellow eyes peer out from beneath its prickly brows." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="-2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmInfHD" value="Change to d8s"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Custom" tag="NeedGore" name="Need Gore"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TypeAndAug" tag="tpPlant"/>
    <bootstrap thing="wGore">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="raWoodStr"></bootstrap>
    <bootstrap thing="rauBrmPkWh"></bootstrap>
    <bootstrap thing="rauBrmThnD"></bootstrap>
    <bootstrap thing="rauBrmThGs"></bootstrap>
    <bootstrap thing="rauBrmThWk"></bootstrap>
    <bootstrap thing="rauBrmEnta"></bootstrap>
    <bootstrap thing="fExoticWep">
      <autotag group="thing" tag="skipprereq"/>
      <autotag group="Target" tag="wWhip"/>
      </bootstrap>
    <bootstrap thing="fQuickDraw">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="typPlant"></bootstrap>
    <bootstrap thing="fSimple">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="cfguPrimSe">
      <containerreq phase="First" priority="200">hero#Custom.NeedGore</containerreq>
      </bootstrap>
    <bootstrap thing="xVulFire"></bootstrap>
    <bootstrap thing="raGrab"></bootstrap>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="8"/>
      <assignval field="livename" value="in forested areas and thickets"/>
      </bootstrap>
    <eval phase="First" index="4">hero.child[aSTR].field[aNormMin].value = 1</eval>
    <eval phase="First" index="3"><![CDATA[
      ~ check if we need gore attack
      ~ if we do add tag
      ~ if not hide the gore given by this template
      if (hero.childcount[wGore] > 1) then
        foreach pick in hero from BaseNatWep where "thingid.wGore & Custom.AddAttack"
           perform eachpick.assign[Hide.Weapon]
        nexteach

      else
        perform hero.assign[Custom.NeedGore]
      endif]]></eval>
    <eval phase="First">~ Improve nat ac bonus is base nat ac is 1 or lower.

var baseNat as number
perform hero.findchild[BaseRace].setfocus

baseNat = focus.field[rAC].value

field[tmAC].value = 2</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuSeelieC" name="Seelie Creature" description=" Hidden from sight in forests and fields are the Kingdoms of Faerie. Normal creatures dwelling in such green places often pass right through the domain of the Seelie Court without suspecting that seelie creatures watch and follow their every move. Circles of stones or rings of mushrooms serve as signposts for the seelie creatures that walk in the lands of mortal creatures, and the appearance of such signs might hint that seelie creatures live nearby.\n\nA seelie creature often appears superficially similar to a normal creature, but careful observation reveals that it has a lighter step and sleeker form than a normal creature of its kind. Sometimes a seelie creature can be distinguished by the fact that it carries or wears a strange flower from the Seelie Realm" compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="LawNeut"/>
    <tag group="AlgnReq" tag="NeutGood"/>
    <tag group="AlgnReq" tag="NeutNeut"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="AlgnReq" tag="LawGood"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClassSkill" tag="skKnowNat"/>
    <tag group="AlgnReq" tag="ChaotNeut"/>
    <tag group="AlgnReq" tag="ChaotGood"/>
    <bootstrap thing="lSylvan"></bootstrap>
    <bootstrap thing="stExtrapla"></bootstrap>
    <bootstrap thing="xDamRdIron">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="spDancLig0">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spGhosSou1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spSileIma1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spSpeawit1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spSpeawit2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spAlteSel2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spMagiMou1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spQuench3">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spSleep1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="xBonusHeal">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xBonusSurv">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="skKnowNat"></bootstrap>
    <bootstrap thing="rauCharmLf"></bootstrap>
    <bootstrap thing="rauFaerieW"></bootstrap>
    <bootstrap thing="rauFeybloo"></bootstrap>
    <bootstrap thing="rauSeelieP"></bootstrap>
    <bootstrap thing="rauSeelieS"></bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <eval phase="PreLevel" priority="4000">hero.child[skPercep].field[BonLuck].value += maximum(2,hero.child[skPercep].field[BonLuck].value)

hero.child[skKnowNat].field[Bonus].value += 4</eval>
    <prereq message="Plant, animal, fey, or magical beast type required.">
      <validate><![CDATA[~we're valid if the hero is of plant, animal, fey or magical beast type
      
validif (#hastype[tpPlant] + #hastype[tpFey] + #hastype[tpAnimal] + #hastype[tpMagBeast] = 1)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuUnseeli" name="Unseelie Creature" description="Unseelie creatures are evil beings that oppose the seelie. Though these strange creatures are native to the Ethereal Plane, they rely on the verdant Material Plane for most of their needs.\n\nSeelie creatures that turn toward selfishness or sinful acts are cast out from the Seelie Realm. Such beings become unseelie creatures and must live out their lives in the Material World. This practice has resulted in generations of embittered unseelie creatures, all of which are now native to the Material Plane. Unseelie creatures strive to block the seelie creatures at every opportunity. They often defile forests and fields in hopes of destroying all areas where the seelie creatures can use their faerie walk ability, thus forcing them to the Material Plane where they can be destroyed." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCHA" value="-2"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClassSkill" tag="skKnowNat"/>
    <tag group="AlgnReq" tag="Evil"/>
    <bootstrap thing="stExtrapla"></bootstrap>
    <bootstrap thing="xDamRdSil">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="spGhosSou1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spSileIma1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spAlteSel2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spMagiMou1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spSleep1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="skKnowNat"></bootstrap>
    <bootstrap thing="rauFeybloo"></bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="spInvisib2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spDarknes1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="rauUnseePc"></bootstrap>
    <bootstrap thing="rauUnseeSg"></bootstrap>
    <bootstrap thing="lSylvan"></bootstrap>
    <eval phase="PreLevel" priority="4000">hero.child[skPercep].field[BonLuck].value += maximum(2,hero.child[skPercep].field[BonLuck].value)

hero.child[skKnowNat].field[Bonus].value += 4</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuManimal" name="Manimal" description="Somewhere between human and animal lies the manimal. Some say that these creatures are the abominable results of sorcerous crossbreeding between humans and animals. Others speak of bizarre druidic rites that can give animals human forms.\n\nA manimal is an animal-like creatures with a humanoid shape and intellect. A manimal has two legs to walk upon and two arms with hands that can manipulate tools. Manimals are often mistaken for lycanthropes-more powerful creatures whose origins are lost to time." compset="Template" uniqueness="unique">
    <fieldval field="tmINT" value="8"/>
    <fieldval field="tmCHA" value="4"/>
    <usesource source="srcAdvBest"/>
    <tag group="OverType" tag="tpMonHuman"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <bootstrap thing="rauAnimalB"></bootstrap>
    <eval phase="First">~ hide rake if base creature has it

perform hero.childfound[wRake].assign[Hide.Weapon]</eval>
    <prereq message="Animal type required.">
      <validate><![CDATA[~once we've been selected, we're fine.
        validif (@ispick <> 0)

        ~we're valid if the hero is of animal type
        validif (#hastype[tpAnimal] = 1)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDrdMumy" name="Dread Mummy" description="Cradled in the scorching sands beneath the relentless sun lie the tombs of kings and pharaohs. But those interred within these structures do not always rest quietly-some rise from their sarcophagi and crypts to walk the land as mummies. A few, known as dread mummies, become kings among the undead. These lords of death learn to command their fellows and visit destruction upon those who dare to stir their wrath.\n\nA dread mummy&apos;s flesh atrophies after death, allowing its skin to shrink tightly against its bones. Although not all dread mummies are wrapped in funerary cloth, many are." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="14"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmAC" value="8"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xImmCold"></bootstrap>
    <bootstrap thing="xVulFire"></bootstrap>
    <bootstrap thing="spAnimMes1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spCalmAni1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spCommUnd2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spHeatMet2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spSummSwa2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spCommwit4">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spContWin5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spDomiAni3">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spInsePla4">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spContWea7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spCreeDoo5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spEarthqu7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spSunbeam7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="raMumMummR"></bootstrap>
    <bootstrap thing="rauDrMBrDe"></bootstrap>
    <bootstrap thing="rauDrMGzDs"></bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <eval phase="Final" priority="10000">perform hero.child[raMumMummR].delete[StandardDC.?]

hero.child[raMumMummR].field[abDC].value = 10 + round(.5 * hero.tagcount[Hero.HitDice], 0,-1) + hero.child[aCHA].field[aModBonus].value</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuJotunbl" name="Jotunblood" description="Born mightier and larger than usual for their kind, jotunblood giants tower over their fellows both in height and in power. Often called king-giants by the smaller races, jotunblood giants almost invariably live up to that name, acting as leaders of the other giants they live with. Few giant tribes can boast more than one jotunblood giant, and these creatures rarely beget more. Typically, a jotunblood giant is born when a giant tribe lacks strong leadership. The birth of a second jotunblood giant to a tribe that already has one is usually seen as a sign from the giant gods that the tribe has grown too large and must split, with the two halves going their separate ways. Reluctance to do so has led to bloody civil wars and long-held grudges." compset="Template" uniqueness="unique">
    <fieldval field="tmHitDice" value="4"/>
    <fieldval field="tmHDSides" value="8"/>
    <fieldval field="tmAC" value="6"/>
    <fieldval field="tmSizeMod" value="1"/>
    <arrayval field="tmCRArray" index="0" value="4"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="AddHitDice"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="rauJBStatF">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="xImmSoni">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="rauJBMeldE">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="rauJBShift">
      <autotag group="Helper" tag="SpcDisable"/>
      <autotag group="Hide" tag="Special"/>
      </bootstrap>
    <bootstrap thing="raBreath">
      <autotag group="Helper" tag="SpcDisable"/>
      <autotag group="Hide" tag="Special"/>
      </bootstrap>
    <bootstrap thing="xImmSleep">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="rauJBExtAt">
      <autotag group="Helper" tag="SpcDisable"/>
      <autotag group="Hide" tag="Special"/>
      </bootstrap>
    <bootstrap thing="rauJBEthSh">
      <autotag group="Helper" tag="SpcDisable"/>
      <autotag group="Hide" tag="Special"/>
      </bootstrap>
    <bootstrap thing="rauJBStnCl">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="rauJBGrDar">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="rauJBStunB">
      <autotag group="Hide" tag="Special"/>
      <autotag group="Helper" tag="SpcDisable"/>
      </bootstrap>
    <bootstrap thing="raRockCat"></bootstrap>
    <bootstrap thing="raRockThro">
      <autotag group="SpecSource" tag="tmuJotunbl"/>
      </bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="5"/>
      <autotag group="Helper" tag="SpcDisable"/>
      <autotag group="Hide" tag="Special"/>
      </bootstrap>
    <bootstrap thing="wTrample">
      <autotag group="Hide" tag="Weapon"/>
      </bootstrap>
    <bootstrap thing="xSplRs"></bootstrap>
    <eval phase="PostLevel" priority="10000"><![CDATA[
~ spell resistance is 8 + HD
var sr as number
sr = hero.tagcount[Hero.HitDice] + 8
#applysr[sr]



~ assign range to rock throwing
var sz as number
sz = herofield[tSize].value
if (sz = 1) then
  hero.childfound[raRockThro].field[abValue].value = 120
elseif (sz = 2) then
  hero.childfound[raRockThro].field[abValue].value = 150
elseif (sz = 3) then
  hero.childfound[raRockThro].field[abValue].value = 200
elseif (sz >= 4) then
  hero.childfound[raRockThro].field[abValue].value = 250
endif

~ mod speed
hero.child[Speed].field[tSpeed].value += 10]]></eval>
    <eval phase="PostLevel" priority="1000" index="2"><![CDATA[~get size
var sz as number
sz = herofield[tSize].value

~ BASE CREATURE BASED ABILITIES
~ CLOUD GIANT
if (hero.tagis[Race.rClouGiant] + hero.tagis[Race.ruOniWindY] <> 0) then
  perform hero.child[xImmSoni].delete[Helper.SpcDisable]
  perform hero.child[xImmSoni].delete[Hide.Special]
  perform hero.child[raBreath].delete[Helper.SpcDisable]
  perform hero.child[raBreath].delete[Hide.Special]
  hero.child[raBreath].field[livename].text = "Breath Weapon (1/1d4 rnd., 40-ft cone, 10d6 sonic, Reflex half)"

~ETTIN
elseif (hero.tagis[Race.rEttin] + hero.tagis[Race.ruOniAtama] <> 0) then
  perform hero.child[rauJBShift].delete[Helper.SpcDisable]
  perform hero.child[rauJBShift].delete[Hide.Special]
  perform hero.child[rauJBExtAt].delete[Helper.SpcDisable]
  perform hero.child[rauJBExtAt].delete[Hide.Special]

~ FIRE GIANT
elseif (hero.tagis[Race.rFireGiant] + hero.tagis[Race.rFireYai] <> 0) then
  #applyresist[xDamRsCold,10]
  perform hero.child[raBreath].delete[Helper.SpcDisable]
  perform hero.child[raBreath].delete[Hide.Special]
  hero.child[raBreath].field[livename].text = "Breath Weapon (1/1d4 rnd., 40-ft cone, 10d6 fire, Reflex half)"

~ FROST GIANT
elseif (hero.tagis[Race.rFrosGiant] + hero.tagis[Race.rIceYai] <> 0) then
  #applyresist[xDamRsFire,10]
  perform hero.child[raBreath].delete[Helper.SpcDisable]
  perform hero.child[raBreath].delete[Hide.Special]
  hero.child[raBreath].field[livename].text = "Breath Weapon (1/1d4 rnd., 40-ft cone, 10d6 cold, Reflex half)"

~ HILL GIANT
elseif (hero.tagis[Race.rHillGiant] <> 0) then
  perform hero.child[rauJBMeldE].delete[Helper.SpcDisable]
  perform hero.child[rauJBMeldE].delete[Hide.Special]
  perform hero.child[rauJBEthSh].delete[Helper.SpcDisable]
  perform hero.child[rauJBEthSh].delete[Hide.Special]

~ STONE GIANT
elseif (hero.tagis[Race.rStonGiant] + hero.tagis[Race.ruOniErhYa] + hero.tagis[Race.ruOniEhYaD] <> 0) then
  #applyresist[xDamRdAdam,10]
  perform hero.child[rauJBStnCl].delete[Helper.SpcDisable]
  perform hero.child[rauJBStnCl].delete[Hide.Special]

~ STORM GIANT
elseif (hero.tagis[Race.rStorGiant] + hero.tagis[Race.rWateYai] <> 0) then
  #applyresist[xDamRsSoni,10]
  perform hero.child[raBreath].delete[Helper.SpcDisable]
  perform hero.child[raBreath].delete[Hide.Special]
  hero.child[raBreath].field[livename].text = "Breath Weapon (1/1d4 rnd., 40-ft cone, 10d6 electricity, Reflex half)"

~ TROLL
elseif (hero.tagis[Race.rTroll] <> 0) then
  perform hero.child[rauJBStatF].delete[Helper.SpcDisable]
  perform hero.child[rauJBStatF].delete[Hide.Special]
  perform hero.childfound[wRend].delete[wMain.?]
  perform hero.childfound[wRend].assign[wMain.1d6_5]

~ OGRE
elseif (hero.tagis[Race.rOgre] + hero.tagis[Race.rOgreMage] <> 0) then
  perform hero.childfound[raDarkVis].assign[Hide.Special]
  perform hero.childfound[rauJBGrDar].delete[Hide.Special]
  perform hero.childfound[rauJBGrDar].delete[Helper.SpcDisable]
  perform hero.childfound[rauJBStunB].delete[Hide.Special]
  perform hero.childfound[rauJBStunB].delete[Helper.SpcDisable]

~ OGRE, MERROW
elseif (hero.tagis[Race.rMerrSaltw] + hero.tagis[Race.rMerrFresh] <> 0) then
  perform hero.childfound[rauJBGrDar].delete[Hide.Special]
  perform hero.childfound[rauJBGrDar].delete[Helper.SpcDisable]
  perform hero.childfound[rauJBStunB].delete[Hide.Special]
  perform hero.childfound[rauJBStunB].delete[Helper.SpcDisable]

~ OTHERS
else
  perform hero.childfound[xFastHeal].delete[Hide.Special]
  perform hero.childfound[xFastHeal].delete[Helper.SpcDisable]
  perform hero.child[wTrample].delete[Hide.Weapon]
  ~ see if we have a slam attack
  var cnt as number
  var slmDm as string
  cnt = 0
  foreach pick in hero from BaseNatWep where "thingid.wSlam"
    cnt += 1
    slmDm = eachpick.tagids[wMain.?,"+"]
  nexteach
  ~ if we donot set the trample damage 
  
  if (cnt = 0) then
    ~ base damage on size (use sz variable for earlier)
    if (sz <= -4) then
       slmDm = "wMain.1_1"
    elseif (sz = -3) then
       slmDm = "wMain.1d2_2"
    elseif (sz = -2) then
       slmDm = "wMain.1d3_3"
    elseif (sz = -1) then
       slmDm = "wMain.1d4_4"
    elseif (sz = 0) then
       slmDm = "wMain.1d6_5"
    elseif (sz = 1) then
       slmDm = "wMain.1d8_6"
    elseif (sz = 2) then
       slmDm = "wMain.2d6_104"
    elseif (sz = 3) then
       slmDm = "wMain.2d8_204"
    elseif (sz >= 4) then
       slmDm = "wMain.4d6_106"
    endif
  endif
 ~ assign trample damage

  ~ because of the quirks of increasing size we need to remove the 
  ~ damageup helpers from trample

   perform hero.child[wTrample].delete[Helper.DamageUp]
   perform hero.child[wTrample].assign[Helper.DamageDown]
   perform hero.child[wTrample].delete[wMain.?]
   perform hero.child[wTrample].assignstr[slmDm]
endif]]></eval>
    <prereq message="Size must be smaller than Colossal.">
      <validate><![CDATA[
        ~if we've been selected, we're good if we're smaller than colossal or smaller
        if (@ispick <> 0) then
          validif (herofield[tSize].value <> 4)
        else
          ~we're valid if the hero isn't colossal
          validif (herofield[tSize].value <> 4)
          endif]]></validate>
      </prereq>
    <prereq message="Giant subtype required.">
      <validate><![CDATA[~once we've been selected, we're fine 
        validif (@ispick <> 0)

~we're valid if the hero has earth or water subtypes
        validif (#hassubtype[stGiant] <> 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuRavenou" name="Ravenous Creature" description="Unnatural acts provoke unnatural hungers, and depravity follows perversity in a cascade. Dark powers watch for the growth of evil in mortals&apos; hearts, and they reward such creatures with great power to nurture the black bloom of their wickedness. Cannibalism garners a particularly abhorrent “blessing.” Ravenous creatures are living beings that have eaten the flesh of their own kind and been cursed with a supernatural hunger for more. A ravenous creature must continue to eat the flesh of its own kind or starve to death. Most ravenous creatures welcome this burden because of the power it brings them." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <bootstrap thing="xBonusAcro">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xBonusClim">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="xBonusEsAr">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xBonusInti">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xBonusPerc">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="xBonusSurv">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="rauRvAgele"></bootstrap>
    <bootstrap thing="rauRvCanHe"></bootstrap>
    <bootstrap thing="rauRvFavPr"></bootstrap>
    <bootstrap thing="rauRvHgySA"></bootstrap>
    <bootstrap thing="rauRvSprin"></bootstrap>
    <bootstrap thing="fBlindFgt">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fImpGrapp">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fImpUnarm">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="wBite">
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Helper" tag="NatTwoHand"/>
      </bootstrap>
    <prereq message="Living Creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine.
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuIcyCrea" name="Icy Creature" description="Icy creatures are elemental beings of deadly cold. Ice replaces muscle and bone in their bodies, and frost forms where normal creatures would have hair or feathers. Icy creatures exude a deathly chill that freezes small creatures solid in an instant and wards away more powerful beings. Icy creatures are masters of ice and never slip or lose purchase on an icy surface.\n\nIcy creatures often mirror the forms and powers of other beings-particularly those native to the Elemental Planes of Air and Water, and any cold climes. They often settle in the same areas as the creatures they mimic, eventually driving the original creatures out of their normal habitats. Those creatures that do not leave are eradicated or enslaved, but never befriended, since icy creatures view them as lesser reflections of themselves." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="stElement"></bootstrap>
    <bootstrap thing="stExtrapla"></bootstrap>
    <bootstrap thing="lAquan"></bootstrap>
    <bootstrap thing="xBonusAcro">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="stWater"></bootstrap>
    <bootstrap thing="rauIcyCldA">
      <assignval field="livename" value="Cold Aura (10 ft.)"/>
      </bootstrap>
    <bootstrap thing="rauIcyExuI"></bootstrap>
    <bootstrap thing="rauIcyIceM"></bootstrap>
    <bootstrap thing="rauIcyIcyT"></bootstrap>
    <bootstrap thing="stCold"></bootstrap>
    <eval phase="First" priority="600"><![CDATA[field[livename].text = "Icy"]]></eval>
    </thing>
  <thing id="tmuQuickli" name="Quickling" description="Quicklings are creatures that possess incredible speed. Some inherit their powers from quickling parents or distant ancestors, but others seem to become quicklings spontaneously. Such creatures are often individuals in need of great speed to flee a foe or reach a loved one in time to prevent tragedy. Most count their gift of speed as a great blessing at first, but they soon learn to curse it when they see their lives rapidly leaving them.\n\nQuicklings are prime examples of the old adage, “Live fast and die young.” In fact, they age four times as fast as normal for their kinds. Elf quicklings die of old age before their companions are old enough to be married, and human quicklings rarely live past twenty-five. Knowledge of their impending doom, however, drives many quicklings to accomplish great deeds in the small amount of time they have.\n\n“Quickling” is an acquired or inherited template that can be added to any living creature (referred to hereafter as the base creature)." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="8"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClassSkill" tag="skAcrobat"/>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="fDodge"></bootstrap>
    <bootstrap thing="fImpInit"></bootstrap>
    <bootstrap thing="fMobility"></bootstrap>
    <bootstrap thing="fQuickDraw"></bootstrap>
    <bootstrap thing="fQuickSpl"></bootstrap>
    <bootstrap thing="fSpringAtt"></bootstrap>
    <bootstrap thing="xBonusAcro">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xBonusPerc">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <bootstrap thing="rauQckQkCs"></bootstrap>
    <bootstrap thing="rauQckRpAt"></bootstrap>
    <eval phase="First" priority="101" index="3"><![CDATA[~ adjust fly manuever class
if (hero.childfound[xFly].field[abValue].value <> 0) then
if (hero.child[xFly].tagcount[Maneuver.Clumsy] <> 0) then
  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Average]
elseif (hero.child[xFly].tagcount[Maneuver.Poor] <> 0) then
  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Good]
elseif (hero.child[xFly].tagcount[Maneuver.Average] <> 0) then
  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Perfect]
elseif (hero.child[xFly].tagcount[Maneuver.Good] <> 0) then
  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Perfect]
endif
endif]]></eval>
    <eval phase="First" index="2">~ +4 dodge bonus to AC
hero.child[ArmorClass].field[tACDodge].value += 4</eval>
    <eval phase="First" priority="10000"><![CDATA[~ +4 bonus to initiative
hero.child[Initiative].field[Bonus].value += 4

~ adjust speeds
foreach pick in hero where "SpecType.Movement & !component.SelectHelp"
   eachpick.field[abValue].value *= 4
nexteach

hero.child[Speed].field[tSpeed].value *= 4]]></eval>
    </thing>
  <thing id="tmuDrdLace" name="Dread Lacedon" description="Dread lacedons are corpses animated by the restless spirits of those who drowned or were killed but not devoured by a dread lacedon. They swim through the ocean depths in deadly schools or stalk though swamps seeking other creatures to drown and devour.\n\nWith its bloated body discolored by rot, a dread lacedon is horrifying to look upon. Its thick limbs sport sharp claws almost hidden by folds of flesh, and its mouth is a gaping maw filled with sharklike teeth. Heedless of its body&apos;s condition, a dread lacedon takes no notice of the seaweed that tangles in its hair or the tiny sea creatures that take up residence in its body. Now and then, the inexorable killing bite of a dread lacedon is accompanied by a crustacean crawling from its mouth or eye socket, coming to partake of the meal before the dread lacedon consumes it all." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Change all HD to d8."/>
    <fieldval field="tmReplHD" value="8"/>
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmAC" value="3"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="Alignment" tag="Chaotic" name="Chaotic" abbrev="C"/>
    <tag group="Alignment" tag="Evil" name="Evil" abbrev="E"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired" name="Acquired" abbrev="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead" name="Undead" abbrev="Undead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Custom" tag="drdLc_Claw"/>
    <tag group="Custom" tag="drdLc_Bite"/>
    <tag group="Custom" tag="drdLace"/>
    <bootstrap thing="wBite">
      <containerreq phase="First" priority="450">hero#Custom.drdLc_Bite</containerreq>
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Value" tag="1"/>
      <autotag group="Custom" tag="drdLace"/>
      </bootstrap>
    <bootstrap thing="xSwim"></bootstrap>
    <bootstrap thing="wClaw">
      <containerreq phase="First" priority="450">hero#Custom.drdLc_Claw</containerreq>
      <autotag group="wMain" tag="1d3_3"/>
      <autotag group="Custom" tag="drdLace"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="rauDrdLcCm"></bootstrap>
    <bootstrap thing="rauDrdLcCW"></bootstrap>
    <bootstrap thing="rauDrdLcNF"></bootstrap>
    <bootstrap thing="raGrab"></bootstrap>
    <bootstrap thing="raParalysi">
      <assignval field="livename" value="Paralysis (1d4+1 rounds)"/>
      </bootstrap>
    <eval phase="Final" index="2"><![CDATA[~ Set our speeds
      var landspeed as number
      var swimspeed as number
      landspeed = hero.child[Speed].field[tSpeed].value
      swimspeed = hero.child[xSwim].field[abValue].value

      if ( landspeed + swimspeed = 0 ) then
        foreach pick in hero from Ability where "SpecType.Movement & !(thingid.Speed | thingid.xSwim) & !component.SelectHelp"
           hero.child[Speed].field[tSpeed].value = maximum(eachpick.field[abValue].value,hero.child[Speed].field[tSpeed].value)
           hero.child[xSwim].field[abValue].value = maximum(eachpick.field[abValue].value,hero.child[xSwim].field[abValue].value)
        nexteach
        hero.child[Speed].field[tSpeed].value = round(hero.child[Speed].field[tSpeed].value * 0.5,0,-1)
        hero.child[xSwim].field[abValue].value = round(hero.child[xSwim].field[abValue].value * 0.5,0,-1)
      elseif (landspeed > swimspeed) then
        hero.child[xSwim].field[abValue].value = hero.child[Speed].field[tSpeed].value
      elseif (swimspeed > landspeed) then
        hero.child[Speed].field[tSpeed].value = hero.child[xSwim].field[abValue].value

      endif

foreach pick in hero where "thingid.raGrab"
  if (eachpick.tagis[SpecSource.tmuDrdLace] = 0) then
     perform eachpick.assign[Helper.SpcDisable]
     perform eachpick.assign[Hide.Special]
  endif
nexteach]]></eval>
    <eval phase="PreLevel" priority="10000">~ We have bonuses to skills
      #skillbonus[skSwim] += 8</eval>
    <eval phase="Final" priority="10000" index="5"><![CDATA[ if (hero.tagis[Hero.Grab] = 0) then
        ~add a +4 bonus to the Grapple CMB
        hero.child[manGrapple].field[manCMB].value += 4
        endif

      perform hero.assign[Hero.Grab] 

foreach pick in hero where "wGroup.Natural"
       
      if (pos(eachpick.field[wDamExtra].text,"grab") = -1) then
        #extradamage[eachpick," plus grab",field[name].text]
      endif

nexteach]]></eval>
    <eval phase="First" priority="200" index="4"><![CDATA[~ assign tags

if (hero.childcount[wBite] <= 1) then
   perform hero.assign[Custom.drdLc_Bite]
endif

var hnds as number
hnds = herofield[tNumHands].value

if (hero.childcount[wClaw] <= 1) then
   perform hero.assign[Custom.drdLc_Claw]
   if (hnds > 0) then
   perform hero.child[wClaw].assignstr["Value." & hnds]
   endif
endif]]></eval>
    <eval phase="First" priority="1000" index="6"><![CDATA[var cnt as number

foreach pick in hero from BaseNatWep where "!Custom.drdLace"
  cnt += 1
nexteach

if (cnt <> 0) then
  if (hero.childfound[wBite].tagcount[Custom.drdLace] <> 0) then
     perform hero.child[wBite].delete[Helper.NatPrimary]
  endif
  if (hero.childfound[wClaw].tagcount[Custom.drdLace] <> 0) then
     perform hero.child[wClaw].delete[Helper.NatPrimary]
  endif
endif]]></eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuAllip" name="Allip" description="Those who fall prey to madness and take their own lives sometimes find themselves lost on the path to the afterlife, trapped in a state between life and death. These unfortunates, known as allips, suffer from the violent and incurable insanity they faced in life and take out their terror, confusion, and rage upon the living. They reach out to those they encounter-possibly in wrath, but also perhaps oblivious to their own insane nature-spreading the psychoses that led to their own untimely deaths.\n\nIn combat, allips relentlessly attack the nearest living creature, relying on their babble to let them close in before attacking with their touch of insanity. Many seem to be driven to states of ferocity upon witnessing the terror living creatures exhibit when facing their spectral forms, or when faced with the intangibility of their incorporeal states. While allips have no way to kill creatures, those knocked unconscious by an allip&apos;s Wisdom-draining touch often emerge from the state suffering from insanity-a fate that many would say qualifies as worse than death.\n\nAllips often seek to harm those who played a part in causing their mad, unholy condition. When faced with such foes, an allip ignores all other targets that confront it in favor of its hated enemies, attacking them until its tormentors have been forced into a vacant stupor. Alas, such vengeance does not put the allip to rest, but simply serves to further fuel its madness as it finds itself trapped in a world now no longer even holding the satisfaction of vengeance.\n\n“Allip” is an acquired template that can be added to any living creature with an Intelligence score of 3 or higher (referred to hereafter as the base creature) that commits suicide because of domination by an allip or at the command of some other creature." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="2"/>
    <fieldval field="tmCHA" value="8"/>
    <fieldval field="tmInfHD" value="Change to d8s"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <bootstrap thing="raAllToucI"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="stIncorpor"></bootstrap>
    <bootstrap thing="raAllBabbl"></bootstrap>
    <bootstrap thing="wOtherMel">
      <containerreq phase="First" priority="101">!(hero#Custom.HasNatural)</containerreq>
      <autotag group="wMaxStrBon" tag="0"/>
      <autotag group="wMaxStrPen" tag="0"/>
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Custom" tag="AddAttack"/>
      <assignval field="wDamExtra" value=" Wis"/>
      <assignval field="livename" value="Incorporeal Touch"/>
      </bootstrap>
    <bootstrap thing="raAllMadne"></bootstrap>
    <bootstrap thing="xImmMind"></bootstrap>
    <bootstrap thing="xImmDeath"></bootstrap>
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="xImmSleep"></bootstrap>
    <bootstrap thing="xImmParaly"></bootstrap>
    <bootstrap thing="xImmStun"></bootstrap>
    <bootstrap thing="xImmAbDmP"></bootstrap>
    <bootstrap thing="xImmAbilDr"></bootstrap>
    <bootstrap thing="xImmFatigu"></bootstrap>
    <bootstrap thing="xImmExhaus"></bootstrap>
    <bootstrap thing="xImmEnerDr"></bootstrap>
    <bootstrap thing="raImmNonLe"></bootstrap>
    <bootstrap thing="xImmBleed"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <eval phase="First" index="2"><![CDATA[~ do we have a natural attack
~ if we do assign tag

var wepCnt as number
wepCnt = -1

foreach pick in hero from BaseNatWep
  wepCnt += 1
nexteach

if (wepCnt > 0) then
  perform hero.assign[Custom.HasNatural]
endif]]></eval>
    <eval phase="PostAttr"><![CDATA[

foreach pick in hero from BaseNatWep
   eachpick.field[livename].text = "Incorporeal Touch"
   eachpick.field[wFixDamage].text = "1d4 Wis"
nexteach]]></eval>
    <eval phase="Final" index="3"><![CDATA[var mxSpd as number
mxSpd = hero.child[Speed].field[tSpeed].value
hero.child[Speed].field[tSpeed].value = 0

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
  mxSpd = maximum(eachpick.field[abValue].value,mxSpd)
  eachpick.field[abValue].value = 0
nexteach

hero.child[xFly].field[abValue].value = mxSpd


  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Perfect]]]></eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuAvian" name="Avian Creature" description="Sleek and slight, avian creatures live to fly. Feathers cover their forms, and each kind has its own coloration. Whether raven-black or peacock-plumed, avian creatures are masters of the open air." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="-2"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="lAuran"></bootstrap>
    <bootstrap thing="xBonusPerc">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <eval phase="First" priority="600"><![CDATA[field[livename].text = "Avian"]]>
      <before name="Template Name Modification"/>
      </eval>
    <eval phase="PreLevel" priority="1000" index="2"><![CDATA[if (hero.child[mNatural].field[Bonus].value <> 0) then
   hero.child[mNatural].field[Bonus].value -= 2
   hero.child[mNatural].field[Bonus].value = maximum(0,hero.child[mNatural].field[Bonus].value)
endif]]></eval>
    <eval phase="Final" index="3"><![CDATA[var mxSpd as number
mxSpd = hero.child[Speed].field[tSpeed].value

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
   mxSpd = maximum(eachpick.field[abValue].value,mxSpd)
nexteach

hero.child[xFly].field[abValue].value = mxSpd

if (hero.child[xFly].tagcount[Maneuver.Clumsy] + hero.child[xFly].tagcount[Maneuver.Poor] <> 0) then
  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Average]
endif]]></eval>
    <eval phase="First" index="4">hero.child[aCON].field[aNormMin].value = 1</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Cannot have fly speed">
      <validate><![CDATA[~once we've been selected, we're fine (since template gives fly speed).
        validif (@ispick <> 0)

validif (hero.child[xFly].field[abValue].value = 0)]]></validate>
      </prereq>
    <prereq message="Ooze type forbidden.">
      <validate><![CDATA[

        ~we're valid if the hero is not corporeal
        validif (#hastype[tpOoze] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuBipedal" name="Bipedal Creature" description="A bipedal creature possesses the body of a humanoid and the features of some other creature. It has two legs and at least two arms that are capable of wielding weapons and manipulating tools, and it stands either erect or hunched like an ape. Bipedal races often form stable societies, cultures, and nations, even if the multilegged or legless creatures they resemble are solitary beings or simple hunter-gatherers." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <eval phase="First" priority="600" index="2"><![CDATA[field[livename].text = "Bipedal"]]>
      <before name="Template Name Modification"/>
      </eval>
    <eval phase="First" priority="10000"><![CDATA[perform hero.childfound[wRake].assign[Hide.Weapon]

var spd as number
var spc as number
var rch as number


if (herofield[tSize].value <= -4) then
  spd = 5
  spc = .5
  rch = 0
elseif (herofield[tSize].value = -3) then
  spd = 10
  spc = 1
  rch = 0
elseif (herofield[tSize].value = -2) then
  spd = 20
  spc = 2.5
  rch = 0
elseif (herofield[tSize].value = -1) then
  spd = 20
  spc = 5
  rch = 5
elseif (herofield[tSize].value = 0) then
  spd = 30
  spc = 5
  rch = 5
elseif (herofield[tSize].value = 1) then
  spd = 40
  spc = 10
  rch = 10
elseif (herofield[tSize].value = 2) then
  spd = 50
  spc = 15
  rch = 15
elseif (herofield[tSize].value = 3) then
  spd = 60
  spc = 20
  rch = 20
elseif (herofield[tSize].value >= 4) then
  spd = 60
  spc = 30
  rch = 30
endif

if (hero.child[Speed].field[tSpeed].value = 0) then
  hero.child[Speed].field[tSpeed].value = round(spd/2,0,-1)
else
  hero.child[Speed].field[tSpeed].value = spd
endif

herofield[tSpace].value = spc
herofield[tReach].value = rch]]></eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuBldKnig" name="Blood Knight" description="Blood knights are the damned souls of fierce warriors who died in a particularly bloody manner. Cursed to walk the earth until their warlike ways lead to their destruction, blood knights seek always to fight and conquer.\n\nA blood knight wears the armor it died in, but its body is gone, wholly replaced by blood. This blood leaks from the armor in endless drips, runnels, and rivulets, cascading to the ground in a torrent that puddles around the creature&apos;s feet. The blood knight&apos;s blows leave wounds that do not close, and its own blood is poisonous. Most horrific of all, it can spray its blood out of its armor in great gouts that soak opponents in the poisonous fluid." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmInfHD" value="Change to d8s"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <bootstrap thing="xBonusEsAr">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="raGrab"></bootstrap>
    <bootstrap thing="raBleed">
      <assignval field="livename" value="Bleed (2)"/>
      </bootstrap>
    <bootstrap thing="rauBldKBlD"></bootstrap>
    <bootstrap thing="rauBldKBdB"></bootstrap>
    <bootstrap thing="rauBldKBlS"></bootstrap>
    <bootstrap thing="rauBldKFtB"></bootstrap>
    <bootstrap thing="rauBldKPoi">
      <assignval field="livename" value="Ingested"/>
      </bootstrap>
    <bootstrap thing="rauBldKBdA"></bootstrap>
    <bootstrap thing="fArmHeavy">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="xDamRdB">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xImmMind"></bootstrap>
    <bootstrap thing="xImmDis"></bootstrap>
    <bootstrap thing="xImmDeath"></bootstrap>
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="xImmSleep"></bootstrap>
    <bootstrap thing="xImmParaly"></bootstrap>
    <bootstrap thing="xImmStun"></bootstrap>
    <bootstrap thing="xImmAbDmP"></bootstrap>
    <bootstrap thing="xImmAbilDr"></bootstrap>
    <bootstrap thing="xImmFatigu"></bootstrap>
    <bootstrap thing="xImmExhaus"></bootstrap>
    <bootstrap thing="xImmEnerDr"></bootstrap>
    <bootstrap thing="raImmNonLe"></bootstrap>
    <bootstrap thing="xImmBleed"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <eval phase="First">~ AC remove natural AC bonus and add deflection AC bonus.

var baseNat as number
perform hero.findchild[BaseRace].setfocus

baseNat = focus.field[rAC].value

field[tmAC].value -= baseNat

hero.child[ArmorClass].field[tACDeflect].value = maximum(hero.child[ArmorClass].field[tACDeflect].value, 1 + baseNat)</eval>
    <eval phase="First" index="2"><![CDATA[~ does base race have a natural attack
~ if it does hide the slam given my this template

var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt <> 0) then
  foreach pick in hero from BaseNatWep where "Custom.AddAttack"
    perform eachpick.assign[Hide.Weapon]
  nexteach
endif]]></eval>
    <eval phase="Final" index="3"><![CDATA[~ each natural attack gains grab
foreach pick in hero from BaseNatWep
  eachpick.field[wDamExtra].text &= " plus grab"
nexteach]]></eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Light, Medium and Heavy Armor proficiency required,">
      <validate><![CDATA[validif (#hasfeat[fArmLight] + #hasfeat[fArmMedium] + #hasfeat[fArmHeavy] >= 3)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuBodak" name="Bodak" description="The world is filled with evil and unspeakable things. Dark clerics pray to vile gods, and wizards seeking unbridled power make pacts with foul demons, all of which allow sinister things to take root among the living. Yet evil is not merely a supernatural phenomenon-man&apos;s own inhumanity to man also brings with it a pall of evil and malevolence. Terrible wars and genocide spawn untold numbers of personal tragedies and events that scar the minds and souls of those unlucky enough to witness them. Torture victims endure days, weeks, or years of horrible, mind-bending pain and misery. Those lucky (or unlucky) enough to survive these horrors are forever changed.\nYet for some, bearing witness to true horror and supernatural evil does more than twist their minds-it ravages their souls to such a degree that they are themselves transformed. Requiring evil far beyond that normally found among mortals, this rare transformation occurs when unprepared mortals venture deep into those extraplanar spaces where humanity was not meant to tread-the deepest hiding holes of the evil planes. In these repositories of unholy knowledge, things are seen that cannot be unseen, and which indelibly stain the souls of the foolish. The creatures that emerge from these places are mortal no longer. Rather they are bodaks-misanthropic husks whose very eyes smoke with the horror of all they&apos;ve seen, destined to wander the planes and bring their terrible visions to the living.\n\nThe transformation into a bodak is as physically painful as it is spiritually damning. As the images of the horror are replayed over and over in the victim&apos;s mind, his body is wracked with pain, causing him to thrash about in debilitating seizures. The victim&apos;s eyelids clamp shut in a nearly unbreakable bond-nothing short of prying or cutting the eyelids apart will force them open. Those who witness this transformation and live to tell of it say that the victim&apos;s eyes seem to migrate about the face, growing and shrinking in size as if trying to escape from the person&apos;s head. Shortly thereafter, the rest of the body undergoes a change as well, with the limbs elongating, hair falling off, and skin drying out on the bones, giving the victim an emaciated, androgynous frame.\n\nWithin 24 hours, the conversion is complete and the victim has become a bodak. Only then do its eyes open once more, though now they are blank orbs set deep in cavernous sockets, constantly weeping foul, smoky vapors. The conversion seriously damages the muscles, giving the bodak a slow, shambling gait. The intellect of the victim also dwindles to pure, base instincts-yet strangely, it does not lose the ability to speak. When a bodak speaks, its words are full of venom, gibberish, and horrific threats and insults, reflecting its extreme anger and desire to inflict its own terrible fate on others. The purifying touch of sunlight also becomes intolerable to the bodak. Even a tiny sliver of sunlight damages and burns the creature, enraging it and forcing it to flee. For this reason, bodaks on the Material Plane only come out at night and must find a secluded place to hide during the day.\n\nThe eyes of the bodak serve as a conduit to the horrors that spawned its transformation. The shimmering, milky orbs briefly mesmerize anyone unlucky enough to catch a direct glimpse of them. If a victim lacks the will to break the gaze, he is quickly overwhelmed by its power and dies shortly thereafter-the transformation into another bodak begins immediately. Survivors of the bodak&apos;s deadly gaze speak of a flood of bizarre memories, flashes and snippets of the event that caused the bodak&apos;s transformation. Although a person lucky enough to resist the gaze is unharmed, these memories of the darkest reaches of the planes may haunt the survivor periodically for the rest of his life.\n\nBodaks are tortured creatures, driven by endless sorrow, terrible longing, and an extreme bitterness and jealousy toward the living. Bodaks lack even the malevolent joy that fiends seem to feel when tormenting and killing mortal creatures. Only by forcing living creatures to gaze into their eyes and perish do they find anything resembling relief, although that too is very short lived, forcing the bodak to find even more victims in an endless cycle. Some bodaks are so overwhelmed by their desire to turn the living into more of their kind that they drag off victims of their deadly gazes to secluded places in order to watch over the transformation and make sure nothing interrupts it. Once the new bodak arises, however, its creator typically loses interest, leaving the spawn on its own. In rare instances, however, bodaks band together in small units called gangs. This does not seem to reflect any true sense of companionship, but is most common when a bodak kills either a former loved one or the person who led it to the point of its original transformation-the bond between them is now twisted together into hate and loathing, but still unbreakable.\n\nThough inclined to wander the planes when given their freedom, the slow-witted bodaks are rarely seen outside the evil-aligned planes, and especially the Abyss, where powerful demons find them useful minions. On that plane, they often serve as guardians, assassins, or thralls, particularly for nabasu demons or liches (both of which are immune to its gaze). Extremely skilled necromancers are able to use powerful magic, notably create greater undead, to create bodaks, but only if the spellcaster is located on one of the evil Outer Planes. Mortal spellcasters who dare to summon a bodak must protect themselves with other magic to keep its deadly gaze at bay." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="2"/>
    <fieldval field="tmAC" value="8"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <bootstrap thing="xDamRdIron">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xImmElec"></bootstrap>
    <bootstrap thing="raBodVulnS"></bootstrap>
    <bootstrap thing="raBodDeatG"></bootstrap>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!(hero#Custom.HasNatural)</containerreq>
      <autotag group="wMain" tag="1d8_6"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="stExtrapla"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="xImmMind"></bootstrap>
    <bootstrap thing="xImmDis"></bootstrap>
    <bootstrap thing="xImmDeath"></bootstrap>
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="xImmSleep"></bootstrap>
    <bootstrap thing="xImmParaly"></bootstrap>
    <bootstrap thing="xImmStun"></bootstrap>
    <bootstrap thing="xImmAbDmP"></bootstrap>
    <bootstrap thing="xImmAbilDr"></bootstrap>
    <bootstrap thing="xImmFatigu"></bootstrap>
    <bootstrap thing="xImmExhaus"></bootstrap>
    <bootstrap thing="xImmEnerDr"></bootstrap>
    <bootstrap thing="raImmNonLe"></bootstrap>
    <bootstrap thing="xImmBleed"></bootstrap>
    <eval phase="First"><![CDATA[~ do we have a natural attack
~ if we do assign tag

var wepCnt as number
wepCnt = -1

foreach pick in hero from BaseNatWep
  wepCnt += 1
nexteach

if (wepCnt > 0) then
  perform hero.assign[Custom.HasNatural]
endif]]></eval>
    <eval phase="PreAttr" index="2"><![CDATA[if (hero.child[aINT].field[aFinalVal].value <= 0) then
  hero.child[aINT].field[aStartMod].value = hero.child[aINT].field[aFinalVal].value - 2

endif]]></eval>
    <eval phase="First" index="3">hero.child[aINT].field[aNormMin].value = 1</eval>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuCaveCre" name="Cave Creature" description="Cave creatures are degenerate beings that have adapted to life in the everdark realms beneath the earth. Strong and hale, they rely on their thick skins and natural weapons to protect them while they hunt for sustenance underground. Although they can be quite intelligent, cave creatures often lack the quicker wits of the surface-dwelling creatures they resemble." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="2"/>
    <fieldval field="tmINT" value="-2"/>
    <fieldval field="tmAC" value="1"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="Custom" tag="AddAttack" name="Added Attack"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="4"/>
      <assignval field="livename" value="in areas of natural stone"/>
      </bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="rBlindSi">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raLightBl"></bootstrap>
    <eval phase="Final" priority="1000" index="5"><![CDATA[~ check if we have natural attacks
~ if so hide the claw attacks given my this template

var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt = 0) then
  foreach pick in hero from BaseNatWep where "thingid.wClaw"
      perform eachpick.assignstr["Value." & herofield[tNumHands].value]
  nexteach
else
  foreach pick in hero from BaseNatWep where "thingid.wClaw & Custom.AddAttc"
    perform eachpick.assign[Hide.Weapon]
  nexteach
endif]]></eval>
    <eval phase="First" index="2">hero.child[aDEX].field[aNormMin].value = 1
hero.child[aINT].field[aNormMin].value = 1</eval>
    <eval phase="First" priority="600"><![CDATA[field[livename].text = "Cave"]]>
      <before name="Template Name Modification"/>
      </eval>
    <eval phase="First" priority="20000" index="3">var lndSp as number
var clbSp as number

lndSp = hero.child[Speed].field[tSpeed].value
clbSp = hero.child[xClimb].field[abValue].value

if (clbSp = 0) then
  hero.child[xClimb].field[abValue].value = round(lndSp/2,0,-1)
endif

if (lndSp = 0) then
  hero.child[xClimb].field[abValue].value = 10
  hero.child[Speed].field[tSpeed].value = 10
endif</eval>
    <prereq message="Ooze type forbidden.">
      <validate><![CDATA[
        ~we're valid if the hero is not corporeal
        validif (#hastype[tpOoze] = 0)]]></validate>
      </prereq>
    <prereq message="Dexterity score required.">
      <validate>validif (hero.child[aDEX].tagis[Helper.NoScore] = 0)</validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuCelBles" name="Celestial-Blessed" description="A prophet imbued with miraculous power, a child protected by angels, or a paladin willing to endure capture by fiends-any of these beings could be celestial-blessed. A celestial-blessed creature is inhabited by a celestial that has willingly given up its form and its powers to imbue a fortunate mortal with divine grace. Gods or more powerful celestials sometimes command celestials to grant this boon, but some do so of their own free will.\n\nA celestial can merge with a chosen mortal only if both are willing (that is, not compelled by magic or force) and of good alignment. The process requires that both remain conscious and in physical contact for one hour. Otherwise, the merging fails and cannot be attempted again that day.\n\nA celestial might choose to give up its form and free will for any of several reasons. Imbuing a mortal creature with its essence allows great deeds of heroism to be accomplished without obvious celestial interference in mortal affairs. A god might wish to make a mortal its messenger but provide it with celestial protection. A celestial might use this technique to go where it otherwise could not, since it is undetectable by all but the most powerful magic when inhabiting another creature. It might also use this technique to evade pursuers.\n\nOnce it has occupied a creature, a celestial can neither leave of its own volition nor make its presence known. Only the host&apos;s death or a special ritual involving powerful magic of the abjuration school can release it. A celestial often insists anyone it intends to bless agree to a limited term of service, after which the blessed creature will undergo the Ritual of Release. But the celestial has no power to enforce such an agreement once it has merged with a mortal, and some celestial-blessed creatures enjoy their powers so much that they refuse the ritual when the time comes. A few even succumb to the temptation to use their divine abilities for unwholesome ends. The possibility of inhabiting a creature that has turned evil makes many celestials loath to merge with mortal creatures.\n\nA celestial&apos;s presence can have physical effects on the mortal creature with which it merges. A creature inhabited by a lantern archon, for example, often loses pigmentation in its hair, skin, and eyes, and its whole body becomes paler. A hound-archon-blessed creature grows more hair, and the limbs of a creature joined with an avoral grow longer. If a leonal agreed to inhabit a mortal, its hair might grow into a mane. A ghaele-blessed creature&apos;s eyes are usually opalescent white, while the hair of a bralani-blessed creature always seems tousled by a light breeze. Small patches of feathers often grow from the back of a creature inhabited by a trumpet archon. Creatures that merge with astral devas usually have unblemished skin, planetar-blessed creatures typically become bald, and solar-blessed creatures generally have topaz eyes.\n\n{b}Note:{/b} Although the template can be applied only to creatures of good alignment, all its changes remain in effect even if the celestial-blessed creature thereafter changes alignment." compset="Template" uniqueness="unique">
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="rauCBBless"></bootstrap>
    <bootstrap thing="rauCBHevHt"></bootstrap>
    <bootstrap thing="rauCBInhab"></bootstrap>
    <bootstrap thing="rauCBSacre"></bootstrap>
    <bootstrap thing="rauCBSplVu"></bootstrap>
    <bootstrap thing="stGood"></bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="20"/>
      </bootstrap>
    <bootstrap thing="cfguCelBle"></bootstrap>
    </thing>
  <thing id="tmuChaosBo" name="Chaosborne" description="Chaosbornes drift in the randomness of the universe, floating on the winds of change. Unhinged by contact with far realms or extraplanar entities that are foreign to sane minds, the chaosbornes are driven to cause chaos in every waking moment. In keeping with the anarchic insanity that is the curse of their vision, they transfer their skewed version of reality to other creatures already swayed by chaos.\n\nSome chaosbornes are manic and crazed; others are patient and calculating. All, however, strive to create anarchy wherever they go. They have no special desire to harm others, but their drive to disrupt order can manifest in activities ranging from innocuous pranks to deadly destruction. For example, a chaosborne might rearrange the books in a library or rewrite the entries in an accountant&apos;s ledger, or it might break open a dam to flood a city.\n\nIf a chaosborne encounters a large group of other chaotic creatures, the result can be a plague of chaosbornes sweeping across the land, leaving only destruction, death, and madness in their wake." compset="Template" uniqueness="unique">
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="ChaotNeut"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="rauCsBCurs"></bootstrap>
    <bootstrap thing="rauCsBEntB"></bootstrap>
    <bootstrap thing="rauCsbGaze"></bootstrap>
    <bootstrap thing="rauCsBLawD"></bootstrap>
    <bootstrap thing="rauCsBPrtL"></bootstrap>
    <bootstrap thing="rauCsbRndI"></bootstrap>
    <bootstrap thing="rauCsbSeeC"></bootstrap>
    <bootstrap thing="rauCsBSplV"></bootstrap>
    <bootstrap thing="cfguCsBAbi"></bootstrap>
    <bootstrap thing="stChaotic"></bootstrap>
    <bootstrap thing="wOtherMel">
      <assignval field="livename" value="Touch"/>
      <assignval field="wFixDamage" value="chaosborne curse"/>
      </bootstrap>
    </thing>
  <thing id="tmuCrystal" name="Crystal Creature" description="Horrors spread on the wings of plague, the beautiful and terrible crystal creatures inspire awe and fear in all who view them. These creatures are generated by brilliant pestilence, an insidious disease created by an evil god on the Elemental Plane of Earth.\n\nA crystal creature looks much like it did before its infection, but every muscle and organ of its body has been transformed into clear crystal. Through crystalline skin and bone, a faceted heart is visible, pumping translucent blood that refracts light and makes the creature glow from within. Under light as dim as a candle or as bright as the sun, a crystal creature shines with such brilliance that it dazzles and blinds other creatures.\n\nCrystal creatures are driven to spread the disease that created them. Creatures infected on the Elemental Plane of Earth are set lose on the Material Plane to spread their transforming affliction. When enough creatures are converted into crystal creatures, the god that created the disease will transfer its essence to the Material Plane and establish its domination of the world." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="2"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmAC" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="TypeAndAug" tag="tpOutsider"/>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <bootstrap thing="rauCysImmL"></bootstrap>
    <bootstrap thing="rauCryBril"></bootstrap>
    <bootstrap thing="rauCryDazF"></bootstrap>
    <bootstrap thing="rauCryLgtA"></bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xVulSonic"></bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="stEarth"></bootstrap>
    <bootstrap thing="stElement"></bootstrap>
    <bootstrap thing="stNative"></bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <eval phase="First" priority="10000" index="2"><![CDATA[if (hero.child[aINT].field[aFinalVal].value <= 0) then
  perform hero.child[aINT].delete[Helper.NoScore]
endif]]></eval>
    <eval phase="Final" priority="10000" index="4"><![CDATA[~ count natural attacks
~ if we have natural attacks hide the slam granted by this template

var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt > 0) then

foreach pick in hero from BaseNatWep where "Custom.AddAttack & thingid.wSlam"
  perform eachpick.assign[Hide.Weapon]
nexteach

endif]]></eval>
    <eval phase="First" priority="600"><![CDATA[field[livename].text = "Crystal"]]>
      <before name="Template Name Modification"/>
      </eval>
    <exprreq message="Corporeal creature required.">#hassubtype[stIncorpor] = 0</exprreq>
    </thing>
  <thing id="tmuDevlBnd" name="Devil-Bound Creature" description="Demons possess and angels bless, but devils bargain. Of all the outsiders that use the bodies of other creatures, devils reign as the most accomplished and experienced controllers. For eons, these creatures have been striking bargains and brokering deals with mortals. Their blood-signed contracts have set countless souls on the path to hell; once a devil&apos;s agreement has been signed, there is no escape. The devil must have its due, and failure to fulfill the terms of the contract means the mortal&apos;s soul is forfeit.\n\nBarbed devils prey upon mortals who wish to protect other people, objects of importance, or caches of wealth. Their contracts usually require the signer to guard something of importance to the devil for the same duration as the devil provided protection. A wise mortal learns as much as possible about what the barbed devil wants him to guard, but invariably the guardianship requires participation in some unexpected act of evil. Failure to fulfill the contract means the mortal dies and loses his immortal soul.\n\nBearded devils tempt mortals in need of brute strength. They especially love trading their services to bullied and downtrodden creatures that desire revenge on their oppressors. Bearded devils enjoy irony as much as other devils do, but their dimwitted nature makes for hamhanded attempts at the art. Their contracts usually require the signers to oppress and bully others after their own oppressors have been slain or cowed.\n\nBone devils concentrate on mortals who wish to spy on others-particularly in order to punish others for breaking laws or taboos. A bone devil often supports and encourages its target&apos;s feelings of righteousness, exhorting him to take command and solve the “problems” or punish the “wicked” himself. Contracts written by bone devils often require the signer to support the rule of tyrants, encourage xenophobia, and ruthlessly enforce adherence to laws.\n\nChain devils strike bargains with those who feel enslaved, offering freedom and vengeance to mortals who are unlawfully imprisoned or held captive. Not surprisingly, a chain devil&apos;s contract often demands that the signer enslave others, starting with those she loves most.\n\nErinyes often deceive their dupes into believing that they are bargaining with celestial beings. Only when the contract is before him does such a mortal learn of his helper&apos;s true nature. By that time, there is often so much riding on the deal that the mortal is loath to let the offer slip away.\n\nA hellcat typically follows its chosen target for a few months before revealing itself. The hellcat telepathically offers warnings and advice, hoping to win over its target with honeyed words and invisible aid. When the mortal has come to rely on the hellcat and needs help desperately, it proffers its contract.\n\nHorned devils dislike subtlety and deceit, but they too offer contracts that outline the powers they&apos;ll grant to willing creatures. Horned devils prefer to sign contracts with creatures of similarly warlike bent. They seek out old warriors who wish to prove that their strength has not waned, power-hungry generals, proud but inexperienced youths, and others who seek power through conquest. Horned devils&apos; contracts are not as specific as those of other devils. Most merely require the signer to advance the devil&apos;s aims at some point in the future-often when doing so means betraying those they hold dear.\n\nIce devils always have plans, and their contracts require the signers to aid such plans in any number of ways. They always seem to offer contracts reluctantly, as though doing so is a distasteful option they are forced to make available. In truth, however, their offers are usually part of some larger strategy that has been in motion for months or even years beforehand. Ice devils often disguise their brilliance because they prefer to let their victims think themselves smarter and cleverer than any devil.\n\nImps are weak devils that strike correspondingly weak bargains. The recompense they require for the meager powers they grant often seems trivial. But what might seem more like a prank than an act of evil always has unforeseen consequences-unforeseen to everyone except the imp, that is.\n\nLemures are the weakest devils. As mindless creatures, they can offer no contracts.\n\nPit fiends, the rulers of devilkind, prepare the most subtle and convoluted contracts. They offer great power, and they know better than to make it seem as though they offer it for nothing. A pit fiend&apos;s contract often requires several tasks of the signer, many of which seem unreasonable. The pit fiend at first acts as though the contract is immutable, but with a great show of reluctance and regret, it “lets slip” that bargaining is possible. After much haggling, the pit fiend strikes several tasks, then grudgingly offers the revised contract for signing, all the while secretly gleeful that the remaining tasks-its true desires-have stayed on the table." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="cfguDvBoun"></bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xImmFire"></bootstrap>
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="stEvil"></bootstrap>
    <eval phase="PostAttr" priority="1000">#applybonus[BonProfane,hero.child[ArmorClass],2]</eval>
    </thing>
  <thing id="tmuDrdAlli" name="Dread Allip" description="Babbling, whispering, screaming, and muttering, dread allips pass through walls and strike at living creatures, hoping to gain companions in undeath and madness. A dread allip is a crazed incorporeal undead created when a sentient creature follows an order to commit suicide against its own wishes. The angry spirit that rises from the corpse is insane because its mind was conflicted at death, and it seeks to inflict a similar fate on others. Dread allips enjoy suicides, and their mad ramblings are often interrupted by insane laughter when they witness another creature taking its own life.\n\nA dread allip looks much like it did in life, but its body appears black and trails off in flamelike wisps of ectoplasm. The distinct features of the individual it once was are indistinguishable, but a person listening to the dread allip&apos;s maddening speech might recognize a particular creature&apos;s voice." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="2"/>
    <fieldval field="tmCHA" value="8"/>
    <fieldval field="tmInfHD" value="Change to d8s."/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="Custom" tag="DrdAllipAt" name="Dread Allip Attack"/>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="wOtherMel">
      <autotag group="wMaxStrBon" tag="0"/>
      <autotag group="wMaxStrPen" tag="0"/>
      <autotag group="Custom" tag="AddAttack"/>
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Helper" tag="FixSizeDmg"/>
      <assignval field="wDamExtra" value=" Wis drain"/>
      <assignval field="livename" value="Incorporeal Touch"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raAllBabbl"></bootstrap>
    <bootstrap thing="rauCmdAlli"></bootstrap>
    <bootstrap thing="rauDrdAlSp"></bootstrap>
    <bootstrap thing="rauDrAlDmT"></bootstrap>
    <bootstrap thing="rauDrdAlMd"></bootstrap>
    <bootstrap thing="rauDrdAlWD"></bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <bootstrap thing="stIncorpor"></bootstrap>
    <eval phase="Final" priority="10000" index="3"><![CDATA[var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt <> 0) then
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
   eachpick.field[livename].text = "Incorporeal Touch"
   eachpick.field[wFixDamage].text = "1d6 Wis drain"
nexteach
foreach pick in hero from BaseNatWep where "Custom.AddAttack & thingid.wOtherMel"
  perform eachpick.assign[Hide.Weapon]
nexteach
endif]]></eval>
    <eval phase="Final"><![CDATA[var mxSpd as number
mxSpd = hero.child[Speed].field[tSpeed].value
hero.child[Speed].field[tSpeed].value = 0

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
  mxSpd = maximum(eachpick.field[abValue].value,mxSpd)
  eachpick.field[abValue].value = 0
nexteach

hero.child[xFly].field[abValue].value = mxSpd

  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Perfect]]]></eval>
    </thing>
  <thing id="tmuDrdBldK" name="Dread Blood Knight" description="Blood knights are the damned souls of fierce warriors who died in a particularly bloody manner. Cursed to walk the earth until their warlike ways lead to their destruction, blood knights seek always to fight and conquer.\n\nA blood knight wears the armor it died in, but its body is gone, wholly replaced by blood. This blood leaks from the armor in endless drips, runnels, and rivulets, cascading to the ground in a torrent that puddles around the creature&apos;s feet. The blood knight&apos;s blows leave wounds that do not close, and its own blood is poisonous. Most horrific of all, it can spray its blood out of its armor in great gouts that soak opponents in the poisonous fluid." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="6"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmHitDice" value="5"/>
    <fieldval field="tmHDSides" value="8"/>
    <fieldval field="tmInfHD" value="Change to d8s"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <tag group="TemplHelp" tag="AddHitDice"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <bootstrap thing="raBleed">
      <assignval field="livename" value="Bleed (2d4)"/>
      </bootstrap>
    <bootstrap thing="rauDrdBKBD"></bootstrap>
    <bootstrap thing="rauBldKBdB"></bootstrap>
    <bootstrap thing="rauBldKBlS"></bootstrap>
    <bootstrap thing="rauDrdBKFB"></bootstrap>
    <bootstrap thing="rauBldKPoi">
      <assignval field="livename" value="Ingested"/>
      </bootstrap>
    <bootstrap thing="rauBldKBdA"></bootstrap>
    <bootstrap thing="fArmHeavy">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="xDamRdB">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="fImpNatAtt">
      <containerreq phase="First" priority="250">!(hero#Custom.HasNatural)</containerreq>
      <autotag group="thing" tag="skipprereq"/>
      <autotag group="Target" tag="wSlam"/>
      </bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xBonusEsAr">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!(hero#Custom.HasNatural)</containerreq>
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="fAbilFoc">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fToughness">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xImmSoni"></bootstrap>
    <bootstrap thing="raGrab"></bootstrap>
    <eval phase="Final" index="3"><![CDATA[~ each natural attack gains grab
foreach pick in hero from BaseNatWep
  eachpick.field[wDamExtra].text &= " plus grab"
nexteach

~ apply sr 

#applysr[12 + herofield[tCR].value]]]></eval>
    <eval phase="First">~ AC remove nat AC bonus and add deflection AC bonus.

var baseNat as number
perform hero.findchild[BaseRace].setfocus

baseNat = focus.field[rAC].value

field[tmAC].value -= baseNat

hero.child[ArmorClass].field[tACDeflect].value = maximum(hero.child[ArmorClass].field[tACDeflect].value, 3 + baseNat)</eval>
    <eval phase="First" index="2"><![CDATA[~ do we have a natural attack
~ if we do assign tag

var wepCnt as number
wepCnt = -1

foreach pick in hero from BaseNatWep
  wepCnt += 1
nexteach

if (wepCnt > 0) then
  perform hero.assign[Custom.HasNatural]
endif]]></eval>
    <eval phase="First" index="4">if (hero.child[Speed].field[tSpeed].value = 0) then
  hero.child[Speed].field[tSpeed].value = 40
else
  hero.child[Speed].field[tSpeed].value += 10
endif</eval>
    <prereq message="Light, Medium and Heavy Armor proficiency required,">
      <validate><![CDATA[validif (#hasfeat[fArmLight] + #hasfeat[fArmMedium] + #hasfeat[fArmHeavy] >= 3)]]></validate>
      </prereq>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuDrdBoda" name="Dread Bodak" description="Bodaks are extraplanar undead created when living beings are touched by ultimate evil. Dread bodaks resemble their extraplanar counterparts, but this resemblance hides an even greater threat.\n\nA dread bodak is sometimes created when an intelligent creature turns traitor and kills an ally or murders a friend. In particular, the use of the death knell spell on a friend seems most likely to create a dread bodak. A dread bodak is consumed with the desire for revenge on everyone it knew in life and anyone who gets in the way. Worse still, it can create more of its vile kind. Its gaze brings foes to the brink of death, and its voice then snuffs out their life force and turns them into dread bodaks.\n\nA dread bodak&apos;s body is lithe and muscular, covered in dead skin or scales that often appear gray. Its head is elongated both above and below the brow. Its eyes and nose are sunken to the point of vanishing, and glowing pinpricks of evil light glow from deep within its eye sockets." compset="Template" uniqueness="unique">
    <fieldval field="tmAC" value="8"/>
    <fieldval field="tmInfHD" value="Change to d8s"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="2"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="rauDrBdkVS"></bootstrap>
    <bootstrap thing="xDamRdIron">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRdMag">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="20"/>
      </bootstrap>
    <bootstrap thing="xImmElec"></bootstrap>
    <bootstrap thing="rauDrdBkCm"></bootstrap>
    <bootstrap thing="rauDrdBkCS"></bootstrap>
    <bootstrap thing="rauDrdBkDK"></bootstrap>
    <bootstrap thing="rauDrdBkDG"></bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d8_6"/>
      <autotag group="Custom" tag="AddAttack"/>
      </bootstrap>
    <bootstrap thing="xImmFire"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <eval phase="Final" priority="10000" index="2"><![CDATA[var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt <> 0) then
  foreach pick in hero from BaseNatWep where "thingid.wSlam & Custom.AddAttack"
    perform eachpick.assign[Hide.Weapon]
  nexteach
endif]]></eval>
    <eval phase="First">hero.child[aINT].field[aNormMin].value = 1</eval>
    </thing>
  <thing id="tmuDrdLich" name="Dread Lich" description="Like normal liches, dread liches are powerful undead spellcasters who used vile magic and dreadful ceremonies to prolong their time in the living world. However, the process of becoming a dread lich is a greater secret than the evil ceremonies required to become a normal lich. Although powerful spellcasters sometimes discover this secret while preparing for lichdom, most dread liches were once normal liches who spent centuries researching arcane lore in search of the secret." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="2"/>
    <fieldval field="tmINT" value="4"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmAC" value="7"/>
    <fieldval field="tmInfHD" value="Change all racial to d8s"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="AlgnReq" tag="AnyNeutral"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xDamRdGood">
      <autotag group="Value" tag="15"/>
      </bootstrap>
    <bootstrap thing="xDamRdMag">
      <autotag group="Value" tag="15"/>
      </bootstrap>
    <bootstrap thing="xImmCold"></bootstrap>
    <bootstrap thing="xImmElec"></bootstrap>
    <bootstrap thing="xImmPoly"></bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="120"/>
      </bootstrap>
    <bootstrap thing="xLichRej"></bootstrap>
    <bootstrap thing="fComCast">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fGrtSpPen">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fSpellFoc">
      <autotag group="Target" tag="ssNecro"/>
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fSpellPen">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fCommandUn">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    </thing>
  <thing id="tmuPsyTelp" name="Psychic (Telepath)" description="Gifted with abnormal mental fortitude and strange mind powers by some accident of birth, psychics have access to knowledge and talents that other creatures of their kinds do not. As they age, experience hones their minds even further, granting them ever more power.\n\nPsychics come in eight different varieties according to their particular specialties: clairaudiant, clairvoyant, empath, precognizant, psychometer, pyrokinetic, telekinetic, and telepath. Any given psychic may have one or more of these specialties, which are defined as follows.\n\n    {b}Clairaudiants{/b} can hear sounds made in locations other than their own and have powers over sound.\n    {b}Clairvoyants{/b} can see events in locations other than their own and have power over sight.\n    {b}Empaths{/b} are sensitive to other creature&apos;s feelings and have powers over emotion.\n    {b}Precognizants{/b} can see future events and determine appropriate courses of action.\n    {b}Psychometers{/b} can determine the history and qualities of an object or place by concentrating.\n    {b}Pyrokenetics{/b} can control and produce flame with a thought.\n    {b}Telekinetics{/b} can move objects and produce force effects with their minds.\n    Telepaths can read and project thoughts.\n\nA psychic looks like any other member of its race, and psychics with different specialties are indistinguishable except for their abilities." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="spDeteTho2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="AtWill"/>
      </bootstrap>
    <bootstrap thing="spDream4">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spMindBla8">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spPhanKil6">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spTeleBon5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="fIronWill"></bootstrap>
    <bootstrap thing="xTelepathy">
      <autotag group="Value" tag="100"/>
      </bootstrap>
    <bootstrap thing="rauTlpInfP"></bootstrap>
    <eval phase="First" priority="600"><![CDATA[field[livename].text = "Telepathic"]]>
      <before name="Template Name Modification"/>
      </eval>
    </thing>
  <thing id="tmuDrdWrSv" name="Dread Wraith Sovereign" description="Ancient and evil beyond measure, dread wraith sovereigns dwell in the hearts of lost cities and in abandoned graveyards. No living things dwell near such places, but a dread wraith sovereign often holds court over a host of the undead, both those it created and those that bowed to its rule. The dread wraith sovereign can sense nearby life and seeks to snuff it out wherever it might be.\n\nThe spectral figure of a dread wraith sovereign looks much like it did in life, but its form and features are constantly shrouded in darkness. A dread wraith sovereign can be distinguished from a normal wraith or a dread wraith by the gloom accompanying it and the unnatural chill that fills the air wherever it passes." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="20"/>
    <fieldval field="tmINT" value="6"/>
    <fieldval field="tmWIS" value="8"/>
    <fieldval field="tmCHA" value="14"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    
    <tag group="AlgnReq" tag="Evil"/>
    <bootstrap thing="raLifesens">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raAuUnnat">
      <autotag group="Value" tag="100"/>
      </bootstrap>
    <bootstrap thing="xChanRes"></bootstrap>
    <bootstrap thing="xImmCold"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="wOtherMel">
      <autotag group="wMain" tag="1d8_6"/>
      <autotag group="wMaxStrBon" tag="0"/>
      <autotag group="wMaxStrPen" tag="0"/>
      <autotag group="Custom" tag="AddAttack"/>
      <assignval field="wDamExtra" value=" neg. energy"/>
      <assignval field="livename" value="Incorporeal Touch"/>
      </bootstrap>
    <bootstrap thing="fAlertness">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fImpInit">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="stIncorpor"></bootstrap>
    <bootstrap thing="rauDWSUnCh"></bootstrap>
    <bootstrap thing="rauDWSCmdW"></bootstrap>
    <bootstrap thing="rauDWSConD"></bootstrap>
    <bootstrap thing="rauDWSCrSp"></bootstrap>
    <bootstrap thing="rauDWSDayV"></bootstrap>
    <eval phase="Final" priority="1000"><![CDATA[~ channel resistance +4
hero.child[xChanRes].field[abValue].value += 4

~ spell resistance
var sr as number
sr = herofield[tCR].value + 12
#applysr[sr]

~ speeds
var mxSpd as number
mxSpd = hero.child[Speed].field[tSpeed].value
hero.child[Speed].field[tSpeed].value = 0

foreach pick in hero from Ability where "SpecType.Movement & !component.SelectHelp"
  mxSpd = maximum(eachpick.field[abValue].value,mxSpd)
  eachpick.field[abValue].value = 0
nexteach

hero.child[xFly].field[abValue].value = mxSpd

  perform hero.child[xFly].delete[Maneuver.?]
  perform hero.child[xFly].assign[Maneuver.Perfect]]]></eval>
    <eval phase="First" priority="10000" index="2"><![CDATA[var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt <> 0) then
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
   eachpick.field[livename].text = "Incorporeal Touch"
   perform eachpick.assign[wMaxStrBon.0]
   perform eachpick.assign[wMaxStrPen.0]
   eachpick.field[wDamExtra].text = " neg. energy"
nexteach
foreach pick in hero from BaseNatWep where "Custom.AddAttack & thingid.wOtherMel"
  perform eachpick.assign[Hide.Weapon]
nexteach
endif]]></eval>
    </thing>
  <thing id="tmuDrdSkel" name="Dread Skeleton" description="The similarity of dread skeletons to the mindless creatures so often animated by spellcasters leads many to underestimate them. A dread skeleton looks much like a normal skeleton (or exoskeleton, depending on the nature of the base creature), but it retains many qualities of the base creature that its lesser cousin does not. For example, a dread skeleton remorhaz still blurs the air with the heat from its body, and a dread skeleton troglodyte continues to fill the area around it with a terrible stench. Dread skeletons can speak and make vocal noises and their living forms could.\n\nMost dread skeletons are motivated by hatred of the living and a desire to dominate all they survey. They seek the death of the living and even resent the existence of other thinking undead. Dread skeletons prefer to be the only free-willed creatures in the world, but they suffer the existence of others in order to attain their goal of dominance and gain more mindless skeleton servants.\n\n{b}Creating a Dread Skeleton{/b} \n&quot;Dread skeleton&quot; is an acquired template that can be added to any living creature with a skeleton or exoskeleton." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="2"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmInfHD" value="Change all racial to d8s"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ClVaryName" tag="AppNoComma"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    <bootstrap thing="xDamRdB">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="AvB_Atk" tag="DrdSkelet"/>
      <autotag group="wMain" tag="1d4_4"/>
      </bootstrap>
    <bootstrap thing="raAuUnnat">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="rauDrdSkCm"></bootstrap>
    <bootstrap thing="xImmCold"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <bootstrap thing="xxUndeadIm"></bootstrap>
    <bootstrap thing="fImpInit">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <eval phase="PreLevel" priority="1000"><![CDATA[
      ~ assign natural ac bonus based on size
      var bon as number

      ~ clear natural armor bonus
      hero.child[ArmorClass].field[tACNatural].value = 0

      if (herofield[tSize].value <= -2) then
        bon = 0
      elseif (herofield[tSize].value = -1) then
        bon = 1
      elseif (herofield[tSize].value <= 1) then
        bon = 2
      elseif (herofield[tSize].value = 2) then
        bon = 3
      elseif (herofield[tSize].value = 3) then
        bon = 6
      elseif (herofield[tSize].value >= 4) then
        bon = 10
      endif

      field[tmAC].value = bon]]></eval>
    <eval phase="PostAttr" priority="2000" index="3">
      hero.child[aINT].field[aNormMin].value = 0
      if (#attrvalue[aINT] = 0) then
        perform hero.child[aINT].assign[Helper.NoScore]
      endif</eval>
    <eval phase="Final" priority="10000" index="4"><![CDATA[
      ~ count natural weapons to see if we get the slam attack
      var cnt as number
      cnt = 0
      foreach pick in hero from BaseNatWep where "!AvB_Atk.DrdSkelet"
        cnt += 1
      nexteach

      if (cnt <> 0) then
        foreach pick in hero from BaseNatWep where "AvB_Atk.DrdSkelet"
          perform eachpick.assign[Helper.NatOverSec]
        nexteach
      endif]]></eval>
    <eval phase="First" index="2">
      ~ remove con
      perform hero.child[aCON].assign[Helper.NoScore]</eval>
    <exprreq message="Corporeal creature required.">#hassubtype[stIncorpor] = 0</exprreq>
    <prereq message="Living creature required.">
      <validate><![CDATA[        
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)
        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuAboreal" name="Arboreal Creature" description="Arboreal creatures live in the canopies of forests and jungles.  They conduct their lives entirely above-ground, swinging from bough to bough, climbing through the branches, and balancing on tree limbs as they move from place to place.\n\nThe coloration of an arboreal creature aids its ability to hide in the high boughs of trees. Its skin may be green, gray, or brown, depending on its environment, and its hair color may change with the seasons.  A typical arboreal creature has long climbing limbs that are awkward to walk on, but occasionally one may climb primarily with two limbs and have stunted hind legs." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="2"/>
    <usesource source="srcAdvBest" parent="pHLComm" name="Advanced Bestiary"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Inherited" name="Inherited" abbrev="Inherited"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <bootstrap thing="xClimb"></bootstrap>
    <bootstrap thing="rauBrachia"></bootstrap>
    <bootstrap thing="rauAbTreeL"></bootstrap>
    <bootstrap thing="xBonusAcro">
      <autotag group="Value" tag="15"/>
      </bootstrap>
    <bootstrap thing="xBonusClim">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="xBonusPerc">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xBonusStea">
      <autotag group="Value" tag="4"/>
      <assignval field="livename" value="in forested or jungle environments"/>
      </bootstrap>
    <bootstrap thing="xBonusSurv">
      <autotag group="Value" tag="4"/>
      <assignval field="livename" value="in forested or jungle environments"/>
      </bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="Value" tag="1"/>
      <autotag group="Custom" tag="AddAttack"/>
      <autotag group="wMain" tag="1d6_5"/>
      <assignval field="livename" value="Brachiating Slam"/>
      </bootstrap>
    <eval phase="PreAttr" priority="1000" index="2"><![CDATA[~ if we have natural attack not added by the template
~ brachiating slam is primary otherwise secondary

var cnt as number
cnt = 0
foreach pick in hero from BaseNatWep where "!Custom.AddAttack"
  cnt += 1
nexteach

if (cnt <> 0) then
  foreach pick in hero from BaseNatWep where "Custom.AddAttack & thingid.wSlam"
    perform eachpick.assign[Helper.NatOverSec]
  nexteach
endif]]></eval>
    <eval phase="Final" priority="5000"><![CDATA[var climbspeed as number
climbspeed = hero.child[xClimb].field[abValue].value
var ishigher as number
ishigher = 0
var newspeed as number
newspeed = 0

if (climbspeed >= hero.child[xBurrow].field[abValue].value) then
   if (climbspeed >= hero.child[Speed].field[tSpeed].value) then
      if (climbspeed >= hero.child[xSwim].field[abValue].value) then
         ishigher = 1
      endif
   endif
endif
if (ishigher = 1) then
   hero.child[xClimb].field[abValue].value += 10
elseif (ishigher = 0) then
   newspeed = maximum(hero.child[Speed].field[tSpeed].value,hero.child[xBurrow].field[abValue].value)
   newspeed = maximum(newspeed,hero.child[xSwim].field[abValue].value)
   perform hero.child[xClimb].delete[Value.?]
   hero.child[xClimb].field[abValue].value = newspeed
endif

~ Set fly speed to zero
if (hero.child[xFly].field[abValue].value > 0) then
   perform hero.child[xFly].delete[Value.?]
   hero.child[xFly].field[abValue].value = 0
endif
   
~ adjust all other movement rates by subtracting 10 but
~ ensuring we have a minimum of 5 feet of movement
~ if we are lower than 5.
   
~ Set base land speed as ten less than the Tag Value
if (hero.child[Speed].field[tSpeed].value > 0) then
   hero.child[Speed].field[tSpeed].value = maximum(hero.child[Speed].field[tSpeed].value - 10, 5)
   hero.child[Speed].field[tSpeedMod].value = 0
endif
   
~ Set Burrow speed as ten less than the Tag Value
if (hero.child[xBurrow].field[abValue].value > 0) then
   perform hero.child[xBurrow].delete[Value.?]
   hero.child[xBurrow].field[abValue].value = maximum(hero.child[xBurrow].field[abValue].value - 10, 5)
endif

~ Set Swim speed as ten less than the Tag Value
if (hero.child[xSwim].field[abValue].value > 0) then
   perform hero.child[xSwim].delete[Value.?]
   hero.child[xSwim].field[abValue].value = maximum(hero.child[xSwim].field[abValue].value - 10, 5)
endif]]></eval>
    <eval phase="First" priority="600" index="5"><![CDATA[field[livename].text = "Arboreal"]]>
      <before name="Template Name Modification"/>
      </eval>
    <prereq message="Aquatic subtype forbidden.">
      <validate><![CDATA[ ~we're valid if the creature is a swarm
        validif (#hassubtype[stAquatic] = 0)]]></validate>
      </prereq>
    <prereq message="Living creature required.">
      <validate><![CDATA[        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required.">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since an undead template might be added later).
        validif (@ispick <> 0)

        ~we're valid if the hero is not corporeal
        validif (#hassubtype[stIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="cfguDvBoun" name="Devil-Bound" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Devil Types"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="cfgDmnPoss" name="Demon-Possessed" compset="Configure" uniqueness="unique">
    <fieldval field="cfgObject1" value="Demon Types"/>
    <fieldval field="cfgMax1" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="ProductId" tag="HLCommunit"/>
    </thing>
  <thing id="cfguDivGud" name="Divine Subtypes" description="A divine guardian&apos;s type remains unchanged, but the creature might gain one or more alignment or elemental subtypes, depending on the alignment and portfolio of the deity that granted it the template. Possible subtypes include air, chaotic, cold, earth, evil, fire, good, lawful, and water. For instance, a lawful good deity&apos;s divine guardian would have the lawful and good subtypes, even if it were actually of some other alignment. Similarly, a neutral god of water and ice would grant its divine guardian the water and cold subtypes." compset="Configure" uniqueness="unique">
    <fieldval field="cfgObject1" value="Subtypes"/>
    <tag group="Helper" tag="Allow1Abil"/>
    </thing>
  <thing id="cfguGenBnd" name="Genie-Bound" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Genie Masters"/>
    </thing>
  <thing id="cfguHalfGi" name="Giant Quality" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Giant Parent"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="cfguMetalC" name="Metal Type" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Metal Types"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="cfguDrdGhs" name="Dread Ghost" compset="Configure" uniqueness="unique">
    <fieldval field="cfgObject1" value="Dread Ghost Abilities"/>
    <eval phase="Final" priority="10000"><![CDATA[
      ~we get a ghost ability for every 3 CR we have, minimum 1
      ~the first ability slot is always spent on Corrupting Touch, so that's a permanent bootstrap
      ~and not included in this list
      field[cfgMax1].value += maximum(round(herofield[tCR].value/3,0,-1),1) - 1]]></eval>
    </thing>
  <thing id="cfguPrimSe" name="Primary/Secondary" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Gore Attack"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="cfguCelBle" name="Celestial-Blessed" compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <fieldval field="cfgObject1" value="Celestial"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="cfguCsBAbi" name="Ability Modifiers" description="When a creature acquires the chaosborne curse, its ability scores change in a random way." compset="Configure" uniqueness="unique">
    <fieldval field="cfgMax1" value="1"/>
    <usesource source="srcAdvBest"/>
    </thing>
  <thing id="JBKoruvus" name="Koruvus Mutation" description="Koruvus, having stumbled into the Temple of Wraith, drank from the waters laying before the alter. The water drove him insane and reformed him into a monstrous, deformed parody of his previous form." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="+6"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="+2"/>
    <fieldval field="tmAC" value="+4"/>
    <fieldval field="tmINT" value="-7"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="RaceSize" tag="Medium0"/>
    <tag group="TypeAndAug" tag="Mutated"/> 
    <tag group="ProductId" tag="HLCommunit"/> 
    <bootstrap thing="xImmPois"></bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="xImmAcid"></bootstrap>
    <bootstrap thing="JBKorvBW"></bootstrap>
    <bootstrap thing="xImmMind"></bootstrap>
    <bootstrap thing="xImmParaly"></bootstrap>
    <eval phase="First">herofield[tNumHands].value += 1</eval>
    </thing>
  <thing id="cfgCelBlsd" name="Celestial-Blessed" compset="Configure" uniqueness="unique">
    <fieldval field="cfgObject1" value="Celestial Types"/>
    <fieldval field="cfgMax1" value="1"/>
    <usesource source="srcAdvBest"/> 
    <tag group="ProductId" tag="HLCommunit"/>
    </thing>
  <thing id="tmABDivGrd" name="Divine Guardian" description="Ageless creatures filled with ancient melancholy, divine guardians spend centuries in penitent prayer, thanking their gods for the bittersweet blessing of eternal life. In lost temples and forgotten holy shrines, they while away long years in contemplation, weighing all that they have gained against what they would gain by losing everything.\n\nA divine guardian is a creature charged by a deity to guard an area it considers sacred. This guardianship might be a permanent assignment granted to a willing creature, penitence for a great sin, or a curse laid by the deity on someone who has injured its faithful.\n\nA divine guardian does not age and need not fear hunger or disease so long as it remains in the area it has been tasked to guard. Should it ever leave, it must soon recant the dereliction of its duties, or the long years will weigh heavily upon it, and it will find its freedom in death." compset="Template" uniqueness="unique">
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="cLevelAdj" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="Custom" tag="DivGrd9"/>
    <tag group="Custom" tag="DivGrd11"/>
    <tag group="Custom" tag="DivGrd13"/>
    <tag group="Custom" tag="DivGrd15"/>
    <tag group="Custom" tag="DivGrd17"/>
    <tag group="Custom" tag="DivGrd19"/>
    <tag group="Custom" tag="DivGrd21"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="Custom" tag="DivGrd3"/>
    <tag group="Custom" tag="DivGrd1"/>
    <tag group="Custom" tag="DivGrd5"/>
    <tag group="Custom" tag="DivGrd7"/> <tag group="ProductId" tag="HLCommunit"/> <bootstrap thing="spDismiss4">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd7"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spCommune5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd9"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spGuarWar6">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd11"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spForbidd6">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd13"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spBanishm5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd15"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spRepulsi5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd17"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spScreen7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd19"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spAntipat6">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Custom" tag="DivGrd21"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="abAbilHeal">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <assignval field="abValue" value="1"/>
      </bootstrap>
    <bootstrap thing="raABBlsLif">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="raABDimDor">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xImmMind">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="xImmDis">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="xImmPois">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="raABSacSit">
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      </bootstrap>
    <bootstrap thing="spHoldPor1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd1"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spAlarm1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd1"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spArcaLoc1">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd3"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spKnock2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd3"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spAugury2">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd5"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spClairau3">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <autotag group="SpecSource" tag="tmABDivGrd"/>
      <autotag group="Custom" tag="DivGrd5"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <eval phase="Final" priority="1000" index="3"><![CDATA[
hero.child[Speed].field[tSpeed].value = 2* hero.child[Speed].field[tSpeed].value
hero.child[xBurrow].field[abValue].value = 2* hero.child[xBurrow].field[abValue].value
hero.child[xSwim].field[abValue].value = 2* hero.child[xSwim].field[abValue].value
hero.child[xClimb].field[abValue].value = 2* hero.child[xClimb].field[abValue].value

if (hero.child[xFly].field[abValue].value > 0) then
   perform hero.child[xFly].delete[Value.?]
   perform hero.child[xFly].delete[Maneuver.?]
   perform hero.child[xFly].assign[Maneuver.Perfect]
   hero.child[xFly].field[abValue].value = 2* hero.child[xFly].field[abValue].value
endif]]></eval>
    <eval phase="PostLevel" index="4">#skillbonus[skPercep] += 5
#skillbonus[skSenseMot] += 5</eval>
    <eval phase="PostLevel"><![CDATA[
var clev as number
clev = hero.tagcount[Classes.?]

if (clev < 1) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd1"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 3) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd3"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 5) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd5"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 7) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd7"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 9) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd9"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 11) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd11"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 13) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd13"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 15) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd15"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 17) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd17"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 19) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd19"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif

if (clev < 21) then
   foreach pick in hero from BaseSpell where "Custom.DivGrd21"
      perform eachpick.assign[Helper.SpcDisable]
   nexteach
endif]]></eval>
    <eval phase="PreLevel" priority="5000" index="2">hero.child[Initiative].field[Bonus].value += 4</eval>
    </thing>
  <thing id="tmABClkCr" name="Clockwork Creature" description="The clockwork creature whirs to life at the whim of its master. Made of various metals and granted the soul of a monster, this intelligent construct is designed to resemble a living creature in both form and function. A clockwork creature serves as an intelligent aide, guardian, or even friend to its creator, or to anyone its creator designates.\n\nA clockwork creature's body is a complicated construction of gears, wires, chains, and struts, often covered with riveted metal plating to give it the form of the living creature it mimics. Magic and engineering give a clockwork creature access to the powers of the creature it resembles, thus enabling its creator to effectively gain the aid of any being desired." compset="Template" uniqueness="unique">
    <fieldval field="tmReplRaHD" value="10"/>
    <fieldval field="tmAC" value="5"/>
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmWIS" value="-4"/>
    <fieldval field="tmCHA" value="-4"/>
    <fieldval field="cLevelAdj" value="4"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TypeAndAug" tag="tpConst"/>
    <tag group="AlgnReq" tag="NeutNeut"/> <tag group="ProductId" tag="HLCommunit"/> <bootstrap thing="raHardness">
      <autotag group="SpecSource" tag="tmABClkCr"/>
      </bootstrap>
    <bootstrap thing="raABMtlBdy">
      <autotag group="SpecSource" tag="tmABClkCr"/>
      </bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xConstruct"></bootstrap>
    <bootstrap thing="raABCrMnd">
      <autotag group="SpecSource" tag="tmABClkCr"/>
      </bootstrap>
    <bootstrap thing="skCrafArmr"></bootstrap>
    <bootstrap thing="skCrafWeap"></bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xVulElec"></bootstrap>
    <bootstrap thing="raWinding">
      <autotag group="SpecSource" tag="tmABClkCr"/>
      </bootstrap>
    <eval phase="PostLevel" index="2">#skillbonus[skCrafArmr] += 5
#skillbonus[skCrafWeap] += 5
#skillbonus[skDisable] += 5
#skillbonus[skStealth] -= 2</eval>
    <eval phase="PreLevel" priority="500"><![CDATA[
~let's make sure racial HD are replaced properly
var newHD as number
newHD = field[tmReplRaHD].value

perform hero.findchild[BaseRace].setfocus
doneif (state.isfocus = 0)

focus.field[rHDSides].value = newHD]]></eval>
    <prereq message="Ooze type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is not an ooze
        validif (#hastype[tpOoze] = 0)]]></validate>
      </prereq>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABBrkSol" name="Broken Soul" description="Agony given physical form, a broken soul is the remains of a creature tortured to madness and beyond. The horrifying and heinous treatment he endured lend him unimaginable toughness and grants the power to cause pain and invoke fear in others. Most broken souls are completely mad creatures that hate themselves and all who look upon them.\n\nA broken soul is a horrifying sight. Its twisted and broken body is a mass of bruises, scars, and infected, oozing sores. Its face is a mask of madness and pain.\n\nThe exact circumstances that create a broken soul are unknown, but they invariably form from creatures severely physically and mentally tortured and yet allowed to live. Some believe a broken soul is blessed with power by some god of pain or vengeance, but others say it is the result of a dark bargain between the tortured creature and some infernal being. Whatever their origins, most broken souls seek out their torturers and do all they can to bring upon them even worse pain and fear than they inflicted upon their helpless victims." compset="Template" uniqueness="unique">
    <fieldval field="tmAC" value="4"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="-4"/>
    <fieldval field="tmCON" value="6"/>
    <fieldval field="tmWIS" value="-2"/>
    <fieldval field="tmCHA" value="-6"/>
    <fieldval field="cLevelAdj" value="4"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/> <tag group="ProductId" tag="HLCommunit"/> <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsSoni">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="raABAgnWal">
      <autotag group="SpecSource" tag="tmABBrkSol"/>
      </bootstrap>
    <bootstrap thing="fDiehard">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fEndure">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fToughness">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="raABTrtTch">
      <autotag group="SpecSource" tag="tmABBrkSol"/>
      </bootstrap>
    <bootstrap thing="raABBalGaz">
      <autotag group="SpecSource" tag="tmABBrkSol"/>
      </bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <eval phase="PostLevel" index="2">#skillbonus[skIntim] += 8
herofield[tConcCheck].value -= 10</eval>
    <eval phase="Final" priority="1000"><![CDATA[
      ~ Set base land speed as ten less than the Tag Value
      if (hero.child[Speed].field[tSpeed].value > 0) then
         hero.child[Speed].field[tSpeed].value = maximum(hero.child[Speed].field[tSpeed].value - 10, 5)
         hero.child[Speed].field[tSpeedMod].value = maximum(hero.child[Speed].field[tSpeedMod].value - 10, 5)
      endif
         
      ~ Set fly speed as ten less than the Tag Value
      if (hero.child[xFly].field[abValue].value > 0) then
         perform hero.child[xFly].delete[Value.?]
         hero.child[xFly].field[abValue].value = maximum(hero.child[xFly].field[abValue].value - 10, 5)
      endif
         
      ~ Set Climb speed as ten less than the Tag Value
      if (hero.child[xClimb].field[abValue].value > 0) then
         perform hero.child[xClimb].delete[Value.?]
         hero.child[xClimb].field[abValue].value = maximum(hero.child[xClimb].field[abValue].value - 10, 5)
      endif
         
      ~ Set Burrow speed as ten less than the Tag Value
      if (hero.child[xBurrow].field[abValue].value > 0) then
         perform hero.child[xBurrow].delete[Value.?]
         hero.child[xBurrow].field[abValue].value = maximum(hero.child[xBurrow].field[abValue].value - 10, 5)
      endif

      ~ Set Swim speed as ten less than the Tag Value
      if (hero.child[xSwim].field[abValue].value > 0) then
         perform hero.child[xSwim].delete[Value.?]
         hero.child[xSwim].field[abValue].value = maximum(hero.child[xSwim].field[abValue].value - 10, 5)
      endif]]></eval>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="INT score required">
      <validate><![CDATA[
        ~we're valid if we have a INT score
        validif (hero.child[aINT].tagis[Helper.NoScore] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABCrSwm" name="Creature Swarm" description="A swarm is a dense mass of tiny creatures that alone present little threat but together become deadly. Creature swarms are made up not of normal bats, rats, insects, or other vermin, but of creatures that resemble larger monsters." compset="Template" uniqueness="unique">
    <fieldval field="cLevelAdj" value="4"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raABNoGrpl">
      <autotag group="SpecSource" tag="tmABCrSwm"/>
      </bootstrap>
    <bootstrap thing="stSwarm"></bootstrap>
    <bootstrap thing="raABHvMnd">
      <autotag group="SpecSource" tag="tmABCrSwm"/>
      </bootstrap>
    <eval phase="Validation" priority="1000" index="3">herofield[tSpace].value = 10
herofield[tReach].value = 0</eval>
    <eval phase="First"><![CDATA[
var nat as number
nat = hero.child[mNatural].field[Bonus].value

if (herofield[tSize].value <= -4) then
  herofield[tSize].value = -4
elseif (herofield[tSize].value = -3) then
  herofield[tSize].value = -4
  hero.child[aDEX].field[aStartMod].value += 2
elseif (herofield[tSize].value = -2) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 2
  hero.child[aDEX].field[aStartMod].value += 4
elseif (herofield[tSize].value = -1) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 6
  hero.child[aDEX].field[aStartMod].value += 6
elseif (herofield[tSize].value = 0) then
  herofield[tSize].value = -4
  hero.child[aSTR].field[aStartMod].value -= 10
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 2
elseif (herofield[tSize].value = 1) then
  herofield[tSize].value = -3
  hero.child[mNatural].field[Bonus].value = maximum(nat-2,0)
  hero.child[aSTR].field[aStartMod].value -= 18
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 6
elseif (herofield[tSize].value = 2) then
  herofield[tSize].value = -3
  hero.child[mNatural].field[Bonus].value = maximum(nat-5,0)
  hero.child[aSTR].field[aStartMod].value -= 26
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 10
elseif (herofield[tSize].value = 3) then
  herofield[tSize].value = -2
  hero.child[mNatural].field[Bonus].value = maximum(nat-9,0)
  hero.child[aSTR].field[aStartMod].value -= 32
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 14
elseif (herofield[tSize].value >= 4) then
  herofield[tSize].value = -2
  hero.child[mNatural].field[Bonus].value = maximum(nat-14,0)
  hero.child[aSTR].field[aStartMod].value -= 40
  hero.child[aDEX].field[aStartMod].value += 8
  hero.child[aCON].field[aStartMod].value -= 18
endif]]></eval>
    <eval phase="PreLevel" priority="1000" index="2"><![CDATA[
var DontKeep as string
DontKeep = "!(wGroup.Natural & (wCategory.RangeThrow | wCategory.RangeProj))"

~ disable all except Natural thrown/hurled weapons on hero
foreach pick in hero from BaseWep where DontKeep
  ~ wManSpike is not listed as a Natural weapon, so ignore it specifically:
  if (eachpick.tagis[IsWeapon.wManSpike] = 0) then
    perform eachpick.assign[Hide.Weapon]
  endif
nexteach]]></eval>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABCryCr" name="Crystal Creature" description="Horrors spread on the wings of plague, the beautiful and terrible crystal creatures inspire awe and fear in all who view them. These creatures are generated by brilliant pestilence, an insidious disease created by an evil god on the Elemental Plane of Earth.\n\nA crystal creature looks much like it did before its infection, but every muscle and organ of its body has been transformed into clear crystal. Through crystalline skin and bone, a faceted heart is visible, pumping translucent blood that refracts light and makes the creature glow from within. Under light as dim as a candle or as bright as the sun, a crystal creature shines with such brilliance that it dazzles and blinds other creatures.\n\nCrystal creatures are driven to spread the disease that created them. Creatures infected on the Elemental Plane of Earth are set lose on the Material Plane to spread their transforming affliction. When enough creatures are converted into crystal creatures, the god that created the disease will transfer its essence to the Material Plane and establish its domination of the world." compset="Template" uniqueness="unique">
    <fieldval field="tmAC" value="4"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="2"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="cLevelAdj" value="3"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="Custom" tag="ABHasNat"/>
    <tag group="TypeAndAug" tag="tpOutsider"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="NeutEvil"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raCryDisea">
      <autotag group="SpecSource" tag="tmABCryCr"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="raCryImm">
      <autotag group="SpecSource" tag="tmABCryCr"/>
      </bootstrap>
    <bootstrap thing="raLtAmplif">
      <autotag group="SpecSource" tag="tmABCryCr"/>
      </bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <bootstrap thing="xVulSonic"></bootstrap>
    <bootstrap thing="xDamRsAcid">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="xDamRsFire">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="stEarth"></bootstrap>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!hero#Custom.ABHasNat</containerreq>
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <bootstrap thing="lTerran"></bootstrap>
    <bootstrap thing="stElement"></bootstrap>
    <bootstrap thing="raABBlndGz">
      <autotag group="SpecSource" tag="tmABCryCr"/>
      </bootstrap>
    <bootstrap thing="raABDzlFrm">
      <autotag group="SpecSource" tag="tmABCryCr"/>
      </bootstrap>
    <eval phase="First" index="2">perform hero.childfound[xImmSoni].assign[Helper.SpcDisable]
perform hero.childfound[xDamRsSoni].assign[Helper.SpcDisable]
perform hero.childfound[raLightBl].assign[Helper.SpcDisable]
perform hero.childfound[raLightSen].assign[Helper.SpcDisable]</eval>
    <eval phase="First"><![CDATA[
var searchexpr as string
var natfound as number
searchexpr = "wGroup.Natural & !thingid.wSlam"
natfound = 0

~search for existence of Natural weapons
foreach pick in hero from BaseWep where searchexpr
  natfound += 1
nexteach
if (natfound > 0) then
  perform hero.assign[Custom.ABHasNat]
endif]]></eval>
    <prereq message="Must be susceptible to disease">
      <validate><![CDATA[
   ~we're valid if the Immunity to Disease special isn't present
   validif (#hasability[xImmDis] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABDmnPos" name="Demon-Possessed Creature" description="No evil is as terrible as one having the outward form of goodness. Demons can cavort in the skins of mortal creatures and cause havoc while disguised by the flesh of virtue. While in the guise of a mortal, a demon can convert the weak-willed to evil and provide power and counsel to other mortal pawns while gleefully using the mortal body as a shield against attack.\n\nA demon&apos;s presence can have a variety of physical effects on the mortal creature it possesses. Glowing eyes, bristly hair, warts, boils, scars, long nails, and twisted limbs can all be signs of demon possession, as can more obvious characteristics, such as bulging muscles and flaming-red skin. Many demon-possessed creatures, however, show no outward sign at all.\n\nDemons possess mortal creatures for countless reasons, and their chaotic nature makes patterns of behavior difficult to determine. They enjoy corrupting goodness and helping evil creatures, but many also use possession to hide from pursuit or to acquire protection. For example, a demon in combat might possess a foe to make itself a difficult target for the other members of the group." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="ChaotEvil"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="cfgDmnPoss"></bootstrap>
    <bootstrap thing="spMagiGoo3">
      <containerreq phase="First" priority="250">hero#Custom.DPBebilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spFireSto7">
      <containerreq phase="First" priority="250">hero#Custom.DPBalor</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spTelekin5">
      <containerreq phase="First" priority="250">hero#Custom.DPBalor</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spPoison3">
      <containerreq phase="First" priority="250">hero#Custom.DPBebilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spWeb2">
      <containerreq phase="First" priority="250">hero#Custom.DPBebilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spScare2">
      <containerreq phase="First" priority="250">hero#Custom.DPDretch</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spStinClo3">
      <containerreq phase="First" priority="250">hero#Custom.DPDretch</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spChaoHam4">
      <containerreq phase="First" priority="250">hero#Custom.DPGlabrzu</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spConfusi3">
      <containerreq phase="First" priority="200">hero#Custom.DPGlabrzu</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spDispMag3">
      <containerreq phase="First" priority="200">hero#Custom.DPGlabrzu</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spGaseFor3">
      <containerreq phase="First" priority="200">hero#Custom.DPHezrou</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="3"/>
      </bootstrap>
    <bootstrap thing="spAligWea2">
      <containerreq phase="First" priority="200">hero#Custom.DPMarilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spBladBar6">
      <containerreq phase="First" priority="200">hero#Custom.DPMarilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spMagiWea1">
      <containerreq phase="First" priority="200">hero#Custom.DPMarilith</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spDeteGoo1">
      <containerreq phase="First" priority="200">hero#Custom.DPQuasit</containerreq>
      <autotag group="Usage" tag="AtWill"/>
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spDeteMag0">
      <containerreq phase="First" priority="200">hero#Custom.DPQuasit</containerreq>
      <autotag group="Usage" tag="AtWill"/>
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spInvisib2">
      <containerreq phase="First" priority="200">hero#Custom.DPQuasit</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spCharMon4">
      <containerreq phase="First" priority="200">hero#Custom.DPSuccub</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spDeteTho2">
      <containerreq phase="First" priority="200">hero#Custom.DPSuccub</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spSuggest2">
      <containerreq phase="First" priority="200">hero#Custom.DPSuccub</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spHeroism2">
      <containerreq phase="First" priority="200">hero#Custom.DPVrock</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spMirrIma2">
      <containerreq phase="First" priority="200">hero#Custom.DPVrock</containerreq>
      <autotag group="Usage" tag="Day"/>
      <autotag group="Helper" tag="SpellLike"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="raABPrfane">
      <autotag group="SpecSource" tag="tmABDmnPos"/>
      </bootstrap>
    <bootstrap thing="xDamRdIron">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raABPossd">
      <autotag group="SpecSource" tag="tmABDmnPos"/>
      </bootstrap>
    <bootstrap thing="raABPoiRes">
      <autotag group="SpecSource" tag="tmABDmnPos"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="20"/>
      </bootstrap>
    <bootstrap thing="raABDmnVul">
      <autotag group="SpecSource" tag="tmABDmnPos"/>
      </bootstrap>
    <bootstrap thing="spSeeInv2">
      <containerreq phase="First" priority="200">hero#Custom.DPBalor</containerreq>
      <autotag group="Usage" tag="Constant"/>
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spTrueSee5">
      <containerreq phase="First" priority="200">hero#Custom.DPGlabrzu</containerreq>
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Constant"/>
      </bootstrap>
    <bootstrap thing="spTongues2">
      <containerreq phase="First" priority="200">hero#Custom.DPSuccub</containerreq>
      <autotag group="Usage" tag="Constant"/>
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="stChaotic"></bootstrap>
    <bootstrap thing="stEvil"></bootstrap>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABAmph" name="Amphibious Creature" description="Amphibious creatures belong to neither air nor water and are native to neither land nor sea. Bogs, swamps, and mires-whether hot, mild, or frozen-are their homes.  An amphibious creature breathes both air and water and is comfortable in both. It has slick-looking, smooth skin and large eyes that gather light, granting it clear vision even in the murk of muddy waters. It also possesses fins or webbed appendages serving it well in\nwater and legs allowing it to move about on land." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raABBrSk">
      <autotag group="SpecSource" tag="tmABAmph"/>
      </bootstrap>
    <bootstrap thing="stAquatic"></bootstrap>
    <bootstrap thing="raLowLight">
      <autotag group="SpecSource" tag="tmABAmph"/>
      </bootstrap>
    <bootstrap thing="xSwim"></bootstrap>
    <bootstrap thing="raABHlpSw">
      <autotag group="SpecSource" tag="tmABAmph"/>
      </bootstrap>
    <bootstrap thing="lAquan"></bootstrap>
    <bootstrap thing="raABAmph">
      <autotag group="SpecSource" tag="tmABAmph"/>
      </bootstrap>
    <eval phase="Final" priority="14900"><![CDATA[var landspeed as number
landspeed = hero.child[xClimb].field[abValue].value + hero.child[xBurrow].field[abValue].value + hero.child[Speed].field[tSpeed].value
var swimspeed as number
swimspeed = hero.child[xSwim].field[abValue].value

if (swimspeed > 0) then
   if (landspeed = 0) then
      hero.child[Speed].field[tSpeed].value = maximum(swimspeed - 10, 5)
      hero.child[Speed].field[tSpeedMod].value = maximum(swimspeed - 10, 5)
   endif
   perform hero.childfound[raABHlpSw].assign[Helper.SpcDisable]
   done
endif

if (landspeed > 0) then
   if (swimspeed = 0) then
      ~ Set Swim speed as highest base land speed
      var biggest as number
      biggest = maximum(hero.child[xClimb].field[abValue].value, hero.child[xBurrow].field[abValue].value)
      biggest = maximum(biggest, hero.child[Speed].field[tSpeed].value)
      perform hero.child[xSwim].delete[Value.?]
      hero.child[xSwim].field[abValue].value = biggest
         
      ~ adjust all other movement rates by subtracting 10 but
      ~ ensuring we have a minimum of 5 feet of movement
      ~ if we are lower than 5.
         
      ~ Set base land speed as ten less than the Tag Value
      if (hero.child[Speed].field[tSpeed].value > 0) then
         hero.child[Speed].field[tSpeed].value = maximum(hero.child[Speed].field[tSpeed].value - 10, 5)
         hero.child[Speed].field[tSpeedMod].value = maximum(hero.child[Speed].field[tSpeedMod].value - 10, 5)
      endif
         
      ~ Set fly speed as ten less than the Tag Value
      if (hero.child[xFly].field[abValue].value > 0) then
         perform hero.child[xFly].delete[Value.?]
         hero.child[xFly].field[abValue].value = maximum(hero.child[xFly].field[abValue].value - 10, 5)
      endif
         
      ~ Set Climb speed as ten less than the Tag Value
      if (hero.child[xClimb].field[abValue].value > 0) then
         perform hero.child[xClimb].delete[Value.?]
         hero.child[xClimb].field[abValue].value = maximum(hero.child[xClimb].field[abValue].value - 10, 5)
      endif
         
      ~ Set Burrow speed as ten less than the Tag Value
      if (hero.child[xBurrow].field[abValue].value > 0) then
         perform hero.child[xBurrow].delete[Value.?]
         hero.child[xBurrow].field[abValue].value = maximum(hero.child[xBurrow].field[abValue].value - 10, 5)
      endif
   endif
endif]]></eval>
    <eval phase="PostLevel" index="2"><![CDATA[hero.child[mNatural].field[Bonus].value -= 2
if (hero.child[mNatural].field[Bonus].value < 0) then
   hero.child[mNatural].field[Bonus].value = 0
endif]]></eval>
    </thing>
  <thing id="tmABApSwm" name="Apocalypse Swarm" description="Deities show their wrath in many ways-storms, floods, earthquakes, volcanic eruptions, disease-but few means are as viscerally terrifying as a plague.  Locusts that devour a nation&apos;s crops, clouds of flies that clog people&apos;s mouths, hordes of rats that spread contagion-these are the so-called apocalypse swarms, the deadly messengers of angry gods.\n\nAn apocalypse swarm looks like a normal swarm of creatures until it engages in combat.  Other creatures watching such a battle obtain a better understanding of what apocalypse really means-in the death of another being, they clearly see their own nearness to oblivion.  Few can witness another creature&apos;s death by such a means and not find it chilling.  Even creatures that were initially willing to stand firm and fight the swarm soon regret their bravery, for damaging such swarms only makes more of them. Thus, an apocalypse swarm grows in destructive capability even as foes succeed in diminishing its strength." compset="Template" uniqueness="unique">
    <fieldval field="tmHDSides" value="8"/>
    <fieldval field="tmHitDice" value="5"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="2"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="TemplHelp" tag="AddHitDice"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="fAbilFoc">
      <autotag group="SpecSource" tag="tmABApSwm"/>
      </bootstrap>
    <bootstrap thing="raABFearA">
      <autotag group="SpecSource" tag="tmABApSwm"/>
      <assignval field="abValue" value="100"/>
      </bootstrap>
    <bootstrap thing="raSplit">
      <autotag group="SpecSource" tag="tmABApSwm"/>
      </bootstrap>
    <bootstrap thing="raABGrtDis">
      <autotag group="SpecSource" tag="tmABApSwm"/>
      </bootstrap>
    <bootstrap thing="xFastHeal">
      <autotag group="Value" tag="10"/>
      <autotag group="Helper" tag="ShowSpec"/>
      <autotag group="SpecSource" tag="tmABApSwm"/>
      </bootstrap>
    <eval phase="Final" priority="2000"><![CDATA[hero.child[Speed].field[tSpeed].value += hero.child[Speed].field[tSpeed].value
hero.child[Speed].field[tSpeedMod].value += hero.child[Speed].field[tSpeedMod].value

var nTemp as number
var sTemp as String

nTemp = hero.child[xClimb].field[abValue].value
if (nTemp > 0) then
  nTemp += nTemp
  sTemp = "Value." & nTemp
  perform hero.child[xClimb].delete[Value.?]
  perform hero.child[xClimb].assignstr[sTemp]
  hero.child[xClimb].field[abValue].value = nTemp
endif

nTemp = hero.child[xBurrow].field[abValue].value
if (nTemp > 0) then
  nTemp += nTemp
  sTemp = "Value." & nTemp
  perform hero.child[xBurrow].delete[Value.?]
  perform hero.child[xBurrow].assignstr[sTemp]
  hero.child[xBurrow].field[abValue].value = nTemp
endif

nTemp = hero.child[xSwim].field[abValue].value
if (nTemp > 0) then
  nTemp += nTemp
  sTemp = "Value." & nTemp
  perform hero.child[xSwim].delete[Value.?]
  perform hero.child[xSwim].assignstr[sTemp]
  hero.child[xSwim].field[abValue].value = nTemp
endif

nTemp = hero.child[xFly].field[abValue].value
if (nTemp > 0) then
  nTemp += nTemp
  sTemp = "Value." & nTemp
  perform hero.child[xFly].delete[Value.?]
  perform hero.child[xFly].assignstr[sTemp]
  hero.child[xFly].field[abValue].value = nTemp
endif]]></eval>
    <eval phase="Final" priority="5000" index="2"><![CDATA[
if (hero.tagcount[Hero.HitDice] < 26) then
   hero.childfound[raSwarmAtk].field[abValue].value += 1
endif]]></eval>
    <eval phase="Final" priority="11000" index="3">var hd as number
      hd = hero.tagcount[Hero.HitDice]

      ~ Set up our spell resistance
      hd = 11 + round(hd / 2,0,-1)
      #applysr[hd]</eval>
    <prereq message="Swarm type required">
      <validate><![CDATA[        ~we're valid if the creature is a swarm
        validif (#hassubtype[stSwarm] = 1)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABArbCr" name="Arboreal Creature" description="Arboreal creatures live in the canopies of forests and jungles.  They conduct their lives entirely above-ground, swinging from bough to bough, climbing through the branches, and balancing on tree limbs as they move from place to place.\n\nThe coloration of an arboreal creature aids its ability to hide in the high boughs of trees. Its skin may be green, gray, or brown, depending on its environment, and its hair color may change with the seasons.  A typical arboreal creature has long climbing limbs that are awkward to walk on, but occasionally one may climb primarily with two limbs and have stunted hind legs." compset="Template" uniqueness="unique">
    <fieldval field="tmDEX" value="2"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="cLevelAdj" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="Custom" tag="ArbNoSlam"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xClimb"></bootstrap>
    <bootstrap thing="raABArbSk"></bootstrap>
    <bootstrap thing="raABTrLeap"></bootstrap>
    <bootstrap thing="raABBrach"></bootstrap>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!hero#Custom.ArbNoSlam</containerreq>
      <autotag group="Value" tag="1"/>
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <eval phase="First" index="2"><![CDATA[If (hero.childlives[wHooves] + hero.childlives[wKick] + hero.childlives[wSting] + hero.childlives[wTailSlap] + hero.childlives[wTentacle] + hero.childlives[wVine] > 0) Then
    perform hero.assign[Custom.ArbNoSlam]
Endif]]></eval>
    <eval phase="Final" priority="5000"><![CDATA[var climbspeed as number
climbspeed = hero.child[xClimb].field[abValue].value
var ishigher as number
ishigher = 0
var newspeed as number
newspeed = 0

if (climbspeed >= hero.child[xBurrow].field[abValue].value) then
   if (climbspeed >= hero.child[Speed].field[tSpeed].value) then
      if (climbspeed >= hero.child[xSwim].field[abValue].value) then
         ishigher = 1
      endif
   endif
endif
if (ishigher = 1) then
   hero.child[xClimb].field[abValue].value += 10
elseif (ishigher = 0) then
   newspeed = maximum(hero.child[Speed].field[tSpeed].value,hero.child[xBurrow].field[abValue].value)
   newspeed = maximum(newspeed,hero.child[xSwim].field[abValue].value)
   perform hero.child[xClimb].delete[Value.?]
   hero.child[xClimb].field[abValue].value = newspeed
endif

~ Set fly speed to zero
if (hero.child[xFly].field[abValue].value > 0) then
   perform hero.child[xFly].delete[Value.?]
   hero.child[xFly].field[abValue].value = 0
endif
   
~ adjust all other movement rates by subtracting 10 but
~ ensuring we have a minimum of 5 feet of movement
~ if we are lower than 5.
   
~ Set base land speed as ten less than the Tag Value
if (hero.child[Speed].field[tSpeed].value > 0) then
   hero.child[Speed].field[tSpeed].value = maximum(hero.child[Speed].field[tSpeed].value - 10, 5)
   hero.child[Speed].field[tSpeedMod].value = 0
endif
   
~ Set Burrow speed as ten less than the Tag Value
if (hero.child[xBurrow].field[abValue].value > 0) then
   perform hero.child[xBurrow].delete[Value.?]
   hero.child[xBurrow].field[abValue].value = maximum(hero.child[xBurrow].field[abValue].value - 10, 5)
endif

~ Set Swim speed as ten less than the Tag Value
if (hero.child[xSwim].field[abValue].value > 0) then
   perform hero.child[xSwim].delete[Value.?]
   hero.child[xSwim].field[abValue].value = maximum(hero.child[xSwim].field[abValue].value - 10, 5)
endif]]></eval>
    <eval phase="Final" index="4"><![CDATA[
doneif (tagis[Custom.ArbNoSlam] <> 0)

var searchexp as string
var natfound as number
searchexp = "(wGroup.Natural & !thingid.wSlam)"
natfound = 0

~search for existence of Natural weapons
foreach pick in hero from BaseWep where searchexp
  natfound += 1
nexteach

~Slam becomes secondary attack if a Natural Attack exists already
if (natfound <> 0) then
  foreach pick in hero from BaseWep where "thingid.wSlam"
    perform eachpick.assign[Helper.NatOverSec]
  nexteach
endif]]></eval>
    <eval phase="PreLevel" priority="1000" index="3">#skillbonus[skAcrobat] += 15
#skillbonus[skPercep] += 4</eval>
    </thing>
  <thing id="tmABBipCr" name="Bipedal Creature" description="A bipedal creature possesses the body of a humanoid and the features of some other creature. It has two legs and at least two arms that are capable of wielding weapons and manipulating tools, and it stands either erect or hunched like an ape.  Bipedal races often form stable societies, cultures, and nations, even if the multilegged or legless creatures they resemble are solitary beings or simple hunter-gatherers.\n\nTwo of the base creature&apos;s limbs (usually the last pair) become legs, and any other limb except a head that has a natural attack becomes an arm capable of either wielding a weapon or making a natural attack, as the creature chooses. Arms need not be jointed limbs in the typical sense; tentacles or other limbs could also be capable of wielding weapons and objects. If these transformations do not grant the bipedal creature at least two arms and two legs, it either converts limbs that do not have natural attacks or grows limbs until it meets these minimum numbers.\n\nIf the base creature has wings or a tail that do not make natural attacks, these limbs remain as they were, adjusting in size to fi t the bipedal creature&apos;s body without dragging. Any of the base creature&apos;s limbs not accounted for in this process become vestigial." compset="Template" uniqueness="unique">
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <eval phase="Final" priority="14900"><![CDATA[
var newspeed as number
if (hero.tagis[Size.Fine] <> 0) then
  newspeed = 5
elseif (hero.tagis[Size.Diminutive] <> 0) then
  newspeed = 10
elseif (hero.tagis[Size.Tiny] + hero.tagis[Size.Small] <> 0) then
  newspeed = 20
elseif (hero.tagis[Size.Medium] <> 0) then
  newspeed = 30
elseif (hero.tagis[Size.Large] <> 0) then
  newspeed = 40
elseif (hero.tagis[Size.Huge] <> 0) then
  newspeed = 50
elseif (hero.tagis[Size.Gargantuan] + hero.tagis[Size.Colossal] <> 0) then
  newspeed = 60
endif

var landspeed as number
landspeed = hero.child[Speed].field[tSpeed].value

if (landspeed > 0) then
  hero.child[Speed].field[tSpeed].value = newspeed
else
  hero.child[Speed].field[tSpeed].value = maximum(newspeed/2,5)
endif]]></eval>
    <eval phase="PostAttr" index="2"><![CDATA[
~find Kick or Hooves attacks, and remove (hide) them

var searchexpr as String
searchexpr = "thingid.wHooves | thingid.wKick"
foreach pick in hero from BaseWep where searchexpr
  perform eachpick.assign[Hide.Weapon]
nexteach]]></eval>
    </thing>
  <thing id="tmABBldKn" name="Blood Knight" description="Blood knights are the damned souls of fierce warriors who died in a particularly bloody manner. Cursed to walk the earth until their warlike ways lead to their destruction, blood knights seek always to fight and conquer.  A blood knight wears the armor it died in, but its body is gone, wholly replaced by blood. This blood leaks from the armor in endless drips, runnels, and rivulets, cascading to the ground in a torrent that puddles around the creature&apos;s feet. The blood knight&apos;s blows leave wounds that do not close, and its own blood is poisonous.  Most horrific of all, it can spray its blood out of its armor in great gouts that soak opponents in the poisonous fluid." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Replace all racial HD with d12s"/>
    <fieldval field="tmReplRaHD" value="12"/>
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="4"/>
    <arrayval field="tmCRArray" index="0" value="2"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="Custom" tag="BKNoSlam"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raABFntBld"></bootstrap>
    <bootstrap thing="raABImpGrb"></bootstrap>
    <bootstrap thing="raABPoiBld"></bootstrap>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!hero#Custom.BKNoSlam</containerreq>
      <autotag group="Value" tag="1"/>
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <bootstrap thing="raABBldSkl"></bootstrap>
    <bootstrap thing="raABBldBdy"></bootstrap>
    <bootstrap thing="raABBndArm"></bootstrap>
    <bootstrap thing="xDamRdB">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raABBldWnd"></bootstrap>
    <bootstrap thing="raABBldDrn"></bootstrap>
    <bootstrap thing="raABBldSlk"></bootstrap>
    <eval phase="First"><![CDATA[
var searchexpr as string
var natfound as number
searchexpr = "wGroup.Natural & !thingid.wSlam"
natfound = 0

~search for existence of Natural weapons
foreach pick in hero from BaseWep where searchexpr
  natfound += 1
nexteach
if (natfound > 0) then
  perform hero.assign[Custom.BKNoSlam]
endif]]></eval>
    <eval phase="PreLevel" priority="500" index="3"><![CDATA[
~Escape Artist racial bonus
#skillbonus[skEscape] += 10

~let's make sure racial HD are replaced properly
var newHD as number
newHD = field[tmReplRaHD].value

perform hero.findchild[BaseRace].setfocus
doneif (state.isfocus = 0)

focus.field[rHDSides].value = newHD]]></eval>
    <eval phase="PreLevel" index="2"><![CDATA[
~add deflection bonus to AC, remove natural armor
~unless we have no natural armor to start with

var bonus as number
bonus = 1 + hero.child[mNatural].field[Bonus].value
if (hero.child[mNatural].field[Bonus].value > 0) then
  hero.child[ArmorClass].field[tACDeflect].value = maximum(bonus,hero.child[ArmorClass].field[tACDeflect].value)
  hero.child[mNatural].field[Bonus].value = 0
endif]]></eval>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABBKDrd" name="Blood Knight, Dread" description="Blood knights are the damned souls of fierce warriors who died in a particularly bloody manner. Cursed to walk the earth until their warlike ways lead to their destruction, blood knights seek always to fight and conquer.  A blood knight wears the armor it died in, but its body is gone, wholly replaced by blood. This blood leaks from the armor in endless drips, runnels, and rivulets, cascading to the ground in a torrent that puddles around the creature&apos;s feet. The blood knight&apos;s blows leave wounds that do not close, and its own blood is poisonous.  Most horrific of all, it can spray its blood out of its armor in great gouts that soak opponents in the poisonous fluid." compset="Template" uniqueness="unique">
    <fieldval field="tmInfHD" value="Replace all racial HD with d12s"/>
    <fieldval field="tmReplRaHD" value="12"/>
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="6"/>
    <fieldval field="tmWIS" value="2"/>
    <fieldval field="tmCHA" value="4"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnReq" tag="Evil"/>
    <tag group="Custom" tag="BKNoSlam"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="wSlam">
      <containerreq phase="First" priority="200">!hero#Custom.BKNoSlam</containerreq>
      <autotag group="Value" tag="1"/>
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <bootstrap thing="raABBldSkl"></bootstrap>
    <bootstrap thing="raABBldBdy"></bootstrap>
    <bootstrap thing="raABBndArm"></bootstrap>
    <bootstrap thing="xDamRdB">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raABDBldWn"></bootstrap>
    <bootstrap thing="xImmSoni"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="raABDBldDr"></bootstrap>
    <bootstrap thing="fAbilFoc"></bootstrap>
    <bootstrap thing="fToughness"></bootstrap>
    <bootstrap thing="fToughness"></bootstrap>
    <bootstrap thing="raABBldSlk"></bootstrap>
    <bootstrap thing="raABDFnBld"></bootstrap>
    <bootstrap thing="raABImpGrb"></bootstrap>
    <bootstrap thing="raABPoiBld"></bootstrap>
    <eval phase="PostLevel" priority="10000" index="4"><![CDATA[
var landspeed as number
landspeed = hero.child[Speed].field[tSpeed].value

if (landspeed > 0) then
  hero.child[Speed].field[tSpeed].value += 10
else
  hero.child[Speed].field[tSpeed].value = 40
endif]]></eval>
    <eval phase="PreLevel" priority="500" index="3"><![CDATA[
~Escape Artist racial bonus
#skillbonus[skEscape] += 10

~let's make sure racial HD are replaced properly
var newHD as number
newHD = field[tmReplRaHD].value

perform hero.findchild[BaseRace].setfocus
doneif (state.isfocus = 0)

focus.field[rHDSides].value = newHD]]></eval>
    <eval phase="Level" index="5">var sr as number
sr = 12 + herofield[tCR].value
#applysr[sr]</eval>
    <eval phase="PreLevel" index="2"><![CDATA[
~add deflection bonus to AC, remove natural armor
~unless we have no natural armor to start with

var bonus as number
bonus = 3 + hero.child[mNatural].field[Bonus].value
if (hero.child[mNatural].field[Bonus].value > 0) then
  hero.child[ArmorClass].field[tACDeflect].value = maximum(bonus,hero.child[ArmorClass].field[tACDeflect].value)
  hero.child[mNatural].field[Bonus].value = 0
endif]]></eval>
    <eval phase="First"><![CDATA[
var searchexpr as string
var natfound as number
searchexpr = "wGroup.Natural & !thingid.wSlam"
natfound = 0

~search for existence of Natural weapons
foreach pick in hero from BaseWep where searchexpr
  natfound += 1
nexteach
if (natfound > 0) then
  perform hero.assign[Custom.BKNoSlam]
endif]]></eval>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABBrmble" name="Bramble Creature" description="These wicked watchers of the woodlands haunt dark thickets in forests and fields, stalking the unwary.  Most dangerous in the tangled briar patches and thorny copses they call home, brambles often make clear trails through their domains that turn into winding mazes designed to confuse and entrap victims.\n\nA bramble&apos;s body is covered with barklike skin and wrapped in tangled, thorny vines. Its face is wizened and cruel, and yellow eyes peer out from beneath its prickly brows." compset="Template" uniqueness="unique">
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmInfHD" value="Replace racial HD with d8"/>
    <fieldval field="cLevelAdj" value="2"/>
    <fieldval field="tmSTR" value="-2"/>
    <fieldval field="tmDEX" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TypeAndAug" tag="tpPlant"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raABBrmGrb"></bootstrap>
    <bootstrap thing="wGore">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="SpecSource" tag="tmABBrmble"/>
      </bootstrap>
    <bootstrap thing="raABBrmGor"></bootstrap>
    <bootstrap thing="raABPrkWhp"></bootstrap>
    <bootstrap thing="raABThnDrt"></bootstrap>
    <bootstrap thing="raABThnGrp"></bootstrap>
    <bootstrap thing="xVulFire"></bootstrap>
    <bootstrap thing="raABThnWlk"></bootstrap>
    <bootstrap thing="raABWdStr"></bootstrap>
    <bootstrap thing="raABHlpStl"></bootstrap>
    <bootstrap thing="lSylvan"></bootstrap>
    <bootstrap thing="fExoticWep">
      <autotag group="thing" tag="skipprereq"/>
      <autotag group="Target" tag="wWhip"/>
      </bootstrap>
    <bootstrap thing="fQuickDraw">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fSimple"></bootstrap>
    <bootstrap thing="raABBrmEnt"></bootstrap>
    <eval phase="PostLevel" priority="600" index="3">~disable Vulnerability to Fire...
~if we already have Immunity to Fire

if (hero.childlives[xImmFire] = 1) then
  perform hero.childfound[xVulFire].assign[Helper.SpcDisable]
  perform hero.childfound[xVulFire].delete[Helper.ShowSpec]
endif</eval>
    <eval phase="PreLevel" index="2"><![CDATA[
if (hero.child[mNatural].field[Bonus].value <= 1) then
  hero.child[mNatural].field[Bonus].value += 2
endif]]></eval>
    <eval phase="PostLevel" priority="500"><![CDATA[
~let's make sure racial HD are replaced properly
var newHD as number
newHD = field[tmReplRaHD].value

perform hero.findchild[BaseRace].setfocus
doneif (state.isfocus = 0)

focus.field[rHDSides].value = newHD]]></eval>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABCaveCr" name="Cave Creature" description="Cave creatures are degenerate beings that have adapted to life in the everdark realms beneath the earth.  Strong and hale, they rely on their thick skins and natural weapons to protect them while they hunt for sustenance underground.  Although they can be quite intelligent, cave creatures often lack the quicker wits of the surface-dwelling creatures they resemble." compset="Template" uniqueness="unique">
    <fieldval field="tmAC" value="1"/>
    <fieldval field="tmSTR" value="2"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmCON" value="2"/>
    <fieldval field="tmINT" value="-2"/>
    <fieldval field="cLevelAdj" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="rBlindSi">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raLightBl"></bootstrap>
    <bootstrap thing="wClaw">
      <autotag group="Value" tag="1"/>
      <autotag group="SpecSource" tag="tmABCaveCr"/>
      <autotag group="wMain" tag="1d6_5"/>
      </bootstrap>
    <bootstrap thing="raABCvClaw"></bootstrap>
    <bootstrap thing="raABCvSkil"></bootstrap>
    <eval phase="PostLevel"><![CDATA[
#skillbonus[skAcrobat] += 8

var landspeed as number
landspeed = hero.child[Speed].field[tSpeed].value

if (landspeed <= 0) then
   hero.child[xClimb].field[abValue].value = 10
   hero.child[Speed].field[tSpeed].value = 10
else
   hero.child[xClimb].field[abValue].value = landspeed / 2
endif]]></eval>
    <prereq message="Undead type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Ooze type forbidden">
      <validate><![CDATA[
        ~we're valid if the hero is not an ooze
        validif (#hastype[tpOoze] = 0)]]></validate>
      </prereq>
    <prereq message="DEX score required">
      <validate><![CDATA[
        ~we're valid if we have a DEX score
        validif (hero.child[aDEX].tagis[Helper.NoScore] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal required">
      <validate><![CDATA[
        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmABCelBls" name="Celestial-Blessed Creature" description="A prophet imbued with miraculous power, a child protected by angels, or a paladin willing to endure capture by fiends-any of these beings could be celestial-blessed. A celestial-blessed creature is inhabited by a celestial that has willingly given up its form and its powers to imbue a fortunate mortal with divine grace. Gods or more powerful celestials sometimes command celestials to grant this boon, but some do so of their own free will.\n\nA celestial can merge with a chosen mortal only if both are willing (that is, not compelled by magic or force) and of good alignment. The process requires that both remain conscious and in physical contact for one hour. Otherwise, the merging fails and cannot be attempted again that day.\n\nA celestial might choose to give up its form and free will for any of several reasons. Imbuing a mortal creature with its essence allows great deeds of heroism to be accomplished without obvious celestial interference in mortal aff airs. A god might wish to make a mortal its messenger but provide it with celestial protection. A celestial might use this technique to go where it otherwise could not, since it is undetectable by all but the most powerful magic when inhabiting another creature. It might also use this technique to evade pursuers.\n\nOnce it has occupied a creature, a celestial can neither leave of its own volition nor make its presence known. Only the host&apos;s death or a special ritual involving powerful magic of the abjuration school can release it. A celestial often insists anyone it intends to bless agree to a limited term of service, after which the blessed creature will undergo the Ritual of Release. But the celestial has no power to enforce such an agreement once it has merged with a mortal, and some celestial-blessed creatures enjoy their powers so much that they refuse the ritual when the time comes. A few even succumb to the temptation to use their divine abilities for unwholesome ends. The possibility of inhabiting a creature that has turned evil makes many celestials loath to merge with mortal creatures.\n\nA celestial&apos;s presence can have physical eff ects on the mortal creature with which it merges. A creature inhabited by a lantern archon, for example, often loses pigmentation in its hair, skin, and eyes, and its whole body becomes paler. A hound-archon-blessed creature grows more hair, and the limbs of a creature joined with an avoral grow longer. If a leonal agreed to inhabit a mortal, its hair might grow into a mane. A ghaele-blessed creature&apos;s eyes are usually opalescent white, while the hair of a bralani-blessed creature always seems tousled by a light breeze. Small patches of feathers often grow from the back of a creature inhabited by a trumpet archon. Creatures that merge with astral devas usually have unblemished skin, planetar-blessed creatures typically become bald, and solar-blessed creatures generally have topaz eyes." compset="Template" uniqueness="unique">
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Good"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raABBlessd">
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    <bootstrap thing="raABHvnHlt">
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    <bootstrap thing="raABInhabt">
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    <bootstrap thing="xDamRsElec">
      <autotag group="Value" tag="20"/>
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    <bootstrap thing="stGood"></bootstrap>
    <bootstrap thing="raABSplVul">
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    <bootstrap thing="cfgCelBlsd"></bootstrap>
    <bootstrap thing="raABSacred">
      <autotag group="SpecSource" tag="tmABCelBls"/>
      </bootstrap>
    </thing>
  <thing id="tmDrdMummy" name="Dread Mummy" description="Cradled in the scorching sands beneath the relentless sun lie the tombs of kings and pharaohs. But those interred within these structures do not always rest quietly-some rise from their sarcophagi and crypts to walk the land as mummies. A few, known as dread mummies, become kings among the undead. These lords of death learn to command their fellows and visit destruction upon those who dare to stir their wrath.\n\nA dread mummy&apos;s flesh atrophies after death, allowing its skin to shrink tightly against its bones. Although not all dread mummies are wrapped in funerary cloth, many are.\n\n&#147;Dread mummy&#148; is an acquired template that can be added to any living corporeal creature (referred to hereafter as the base creature). A dread mummy uses all the base creature&apos;s statistics and special abilities except as noted here." compset="Template" summary="Strong mummy template for characters with class levels." uniqueness="unique">
    <comment>Dread Mummy Template
from the Advanced Bestiary
by Matthew Sernett
published by Green Ronin Publishing.

Added by Lord Magus</comment>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmSTR" value="14"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmINT" value="2"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmAC" value="8"/>
    <fieldval field="cLevelAdj" value="7"/>
    <fieldval field="tmInfHD" value="Change Racial HDs to d8s"/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="xVulFire"></bootstrap>
    <bootstrap thing="xDamRsCold">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="raMumMummR"></bootstrap>
    <bootstrap thing="spAnimMes2">
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spCalmAni1">
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spHeatMet2">
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spSummSwa2">
      <autotag group="Helper" tag="SpellLike"/>
      </bootstrap>
    <bootstrap thing="spCommwit5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spContWin5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spDomiAni3">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spInsePla5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="2"/>
      </bootstrap>
    <bootstrap thing="spContWea7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spCreeDoo7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spEarthqu8">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="spSunbeam7">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      </bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raDMuBoDth">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="raDMuCrSpw"></bootstrap>
    <bootstrap thing="raDMuGoDsp">
      <autotag group="Value" tag="100"/>
      </bootstrap>
    <bootstrap thing="abResBlows"></bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Helper" tag="NatPrimary"/>
      </bootstrap>
    <bootstrap thing="raDMuCoUnd">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="4"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <eval phase="First"><![CDATA[~ Hide weapons from template to begin with
perform hero.child[wSlam].assign[Hide.Weapon]

~ Check if we have a natural attack. If not add the slam attack and assign damage.
var cnt as number
cnt = 0
foreach pick in hero from BaseWep where "wGroup.Natural & !Hide.Weapon"
 cnt += 1
nexteach]]></eval>
    <prereq message="Undead type forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmMummy" name="Mummy (T)" description="You can use this template to create a creature that closely mimics the standard mummy from the Bestiary. \n&#149; The mummy gains mummy rot, damage reduction, and fire vulnerability.\n&#149; The mummy gains the despair special ability, as described in the mummy entry in the Bestiary.\n&#149; Change the base creature&apos;s ability scores as follows: +14 Str, &#150;4 Int (minimum 1), +4 Wis, +4 Cha.\n&#149; The CR increase is +1." compset="Template" summary="Mummy template for characters with class levels." uniqueness="unique">
    <comment>Mummy Template
from the Advanced Bestiary
by Matthew Sernett
published by Green Ronin Publishing.

Added by Lord Magus

Issues:
-INT can drop below 0</comment>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmWIS" value="4"/>
    <fieldval field="tmCHA" value="4"/>
    <fieldval field="tmAC" value="8"/>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmInfHD" value="Change Racial HDs to d8s"/>
    <fieldval field="cLevelAdj" value="3"/>
    <fieldval field="tmSTR" value="14"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnReq" tag="Evil"/>
    
    <tag group="TypeAndAug" tag="tpUndead"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="raMumDespa">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="xVulFire"></bootstrap>
    <bootstrap thing="raMumMummR"></bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <prereq message="Undead type forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmInveigle" name="Inveigler" description="The inveigler uses lies as weapons and weaves armor from falsehood. A manipulator and a cheat, the inveigler is so consumed with hiding the truth and controlling others&apos; ideas of what the truth is that its words and thoughts gain supernatural power. Inveiglers look like perfectly ordinary specimens of their kinds. Most are likeable and have many friends, but they are consummate liars, and the lies they tell have the power to command the minds of others. Many inveiglers use their powers to assume roles of authority, but just as many are content to function as the power behind the throne.\n\nCreatures that already rely on falsehood to make their way through life are much more likely to become inveiglers than those that do not. Some inveiglers say they are the chosen messengers of a god of deceit, others claim to have made bargains with demons for their souls, and still others tell anyone who can pry an answer from them that they were born inveiglers. If anything can be said about an inveigler, however, it is that no story it tells can possibly be true." compset="Template" summary="The inveigler uses lies as weapons and weaves armor from falsehood." uniqueness="unique">
    <comment>Inveigler Template
from the Advanced Bestiary
by Matthew Sernett
published by Green Ronin Publishing.

Added by Lord Magus 2011/4/04</comment>
    <fieldval field="tmINT" value="4"/>
    <fieldval field="tmCHA" value="6"/>
    <fieldval field="cLevelAdj" value="2"/>
    <usesource source="srcAdvBest"/>
    
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="AlgnForbid" tag="Good"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="raCharFals"></bootstrap>
    <bootstrap thing="raHidEncha"></bootstrap>
    <bootstrap thing="raTaknGrav"></bootstrap>
    <bootstrap thing="raTruthBTo"></bootstrap>
    <bootstrap thing="raUndetAli"></bootstrap>
    <bootstrap thing="raUndetTho"></bootstrap>
    <bootstrap thing="fImpFeint">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fPersuas">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <eval phase="PostLevel" priority="10000">#competencebonus[hero.child[skBluff], 8]

#competencebonus[hero.child[skSleight], 4]</eval>
    <exprreq message="Intelligence 8 or more required."><![CDATA[child[aINT].field[aFinalVal].value >= 8]]></exprreq>
    <exprreq message="Charisma 8 or more required."><![CDATA[child[aCHA].field[aFinalVal].value >= 8]]></exprreq>
    </thing>
  <thing id="tmStGtElde" name="Stone Giant Elder" description="Some stone giants develop special abilities related to their environment. Called elders, these stone giants have Charisma scores of at least 15 and three spell-like abilities (CL 10th). Once per day they can use {i}stone shape{/i}, {i}stone tell{/i}, and either {i}transmute rock to mud{/i} or {i}transmute mud to rock{/i} (DC 17). The save DC is Charisma-based. One in 10 elders is a sorcerer, usually of 3rd to 6th level. Stone giant elders add +1 to their CR." compset="Template" summary="Elder stone giant with stone-related spell-like abilities." uniqueness="unique">
    <comment>Still trying to set trkUser of the 2 transmute abilities to 0 when 1 of the 2 is used for the day

Stone Giant Elder
from the Pathfinder Bestiary
published by Paizo Publishing.

Added as a template by Lord Magus
2011/4/10</comment>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="Bestiary1"/>
    
    <tag group="ProductId" tag="HLCommunit"/>
    <bootstrap thing="spTranMud5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      <assignval field="sCL" value="10"/>
      </bootstrap>
    <bootstrap thing="spTranRoc5">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      <assignval field="sCL" value="10"/>
      </bootstrap>
    <bootstrap thing="spStonSha4">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      <assignval field="sCL" value="10"/>
      </bootstrap>
    <bootstrap thing="spStonTel6">
      <autotag group="Helper" tag="SpellLike"/>
      <autotag group="Usage" tag="Day"/>
      <assignval field="trkMax" value="1"/>
      <assignval field="sCL" value="10"/>
      </bootstrap>
    <exprreq message="Charisma 15 required."><![CDATA[child[aCHA].field[aFinalVal].value >= 15]]></exprreq>
    <exprreq message="Must be a Stone Giant."><![CDATA[#hasrace[rStonGiant] <> 0]]></exprreq>
    </thing>
  <thing id="tmRvnsABFE" name="Ravenous" description="Unnatural acts provoke unnatural hungers, and depravity follows perversity in a cascade. Dark powers watch for the growth of evil in mortals&apos; hearts, and they reward such creatures with great power to nurture the black bloom of their wickedness. Cannibalism garners a particularly abhorrent &#147;blessing.&#148; Ravenous creatures are living beings that have eaten the flesh of their own kind and been cursed with a supernatural hunger for more. A ravenous creature must continue to eat the flesh of its own kind or starve to death. Most ravenous creatures welcome this burden because of the power it brings them.\n\n&#147;Ravenous creature&#148; is an acquired template that can be added to any living, intelligent creature that has eaten the flesh of its own kind (referred to hereafter as the base creature). A ravenous creature uses all the base creature&apos;s statistics and special abilities except as noted here." compset="Template" uniqueness="unique">
    <comment>Ravenous Template
from the Advanced Bestiary
by Matthew Sernett
published by Green Ronin Publishing.

Added by Lord Magus</comment>
    <fieldval field="cLevelAdj" value="4"/>
    <fieldval field="tmSTR" value="6"/>
    <fieldval field="tmDEX" value="4"/>
    <fieldval field="tmCON" value="4"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="AlgnForbid" tag="Lawful"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TemplHelp" tag="Acquired"/>
    
    <tag group="AlgnForbid" tag="Good"/>
    <bootstrap thing="raDarkVis">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="raLowLight"></bootstrap>
    <bootstrap thing="xDamRd">
      <autotag group="Value" tag="5"/>
      </bootstrap>
    <bootstrap thing="raAgelesFE"></bootstrap>
    <bootstrap thing="raHuSpAtFE"></bootstrap>
    <bootstrap thing="raSprintFE"></bootstrap>
    <bootstrap thing="raCannHlFE"></bootstrap>
    <bootstrap thing="raRavBodFE"></bootstrap>
    <bootstrap thing="raFavPryFE"></bootstrap>
    <bootstrap thing="wBite">
      <autotag group="Helper" tag="NatSecond"/>
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="fBlindFgt">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fImpGrapp">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <bootstrap thing="fImpUnarm">
      <autotag group="thing" tag="skipprereq"/>
      </bootstrap>
    <eval phase="First"><![CDATA[~ Hide weapons from template to begin with
perform hero.child[wBite].assign[Hide.Weapon]

~ Check if we have a natural attack. If not add the bite attack and assign damage.
var cnt as number
cnt = 0
foreach pick in hero from BaseWep where "wGroup.Natural & !Hide.Weapon"
 cnt += 1
nexteach]]></eval>
    <eval phase="PostLevel" priority="10000" index="2">#skillbonus[skAcrobat] += 4
#skillbonus[skEscape] += 4
#skillbonus[skIntim] += 4
#skillbonus[skStealth] += 4

#skillbonus[skClimb] += 8
#skillbonus[skPercep] += 8
#skillbonus[skSurvival] += 8</eval>
    <prereq message="Must be applied to a living creature.">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)
        validif (#hastype[tpConst] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmDrdZombi" name="Zombie, Dread" description="Though they resemble the mindless undead that fill out the ranks of armies commanded by evil necromancers and the clerics of dark gods, dread zombies (sometimes known as zombie lords) are fit to command such troops themselves. Dread zombies are created when the magic used to animate a zombie or other corporeal undead goes awry, or when a dread mummy breathes death on a living creature. Sometimes when the ceremony to create a lich fails, the would-be lich instead becomes a dread zombie, attaining eternal unlife at an unexpected cost-the loss of some of the intelligence it had in life. These undead recognize and mourn their lost mental acuity, and this knowledge translates into a sick hunger for living brains.\n\nA dread zombie looks like the walking corpse of a living creature. Maggots writhe beneath its papery skin, and worms crawl through its muscles. Its eyes, however, are not the foggy, fluid-fi lled orbs of a normal zombie-they shine with a lifelike and evil intelligence." compset="Template" summary="Zombie retaining class levels and some intelligence." uniqueness="unique">
    <comment>Dread Zombie Template
from the Advanced Bestiary
by Matthew Sernett
published by Green Ronin Publishing.

Added by Lord Magus

Issues:
-INT can drop below 0
-Loss of Flight
-Size changes?</comment>
    <fieldval field="tmReplRaHD" value="8"/>
    <fieldval field="tmInfHD" value="Change Racial HDs to d8s"/>
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmINT" value="-4"/>
    <fieldval field="tmCHA" value="-4"/>
    <fieldval field="cLevelAdj" value="3"/>
    <arrayval field="tmCRArray" index="0" value="1"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Acquired"/>
    <tag group="TypeAndAug" tag="tpUndead"/>
    <bootstrap thing="xChanRes">
      <autotag group="Value" tag="2"/>
      </bootstrap>
    <bootstrap thing="raUnAuraUn">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="typUndead"></bootstrap>
    <bootstrap thing="raBrainCon"></bootstrap>
    <bootstrap thing="wBite">
      <autotag group="wMain" tag="1d4_4"/>
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="raComZombi">
      <autotag group="Value" tag="30"/>
      </bootstrap>
    <bootstrap thing="wSlam">
      <autotag group="wMain" tag="1d6_5"/>
      <autotag group="Value" tag="1"/>
      </bootstrap>
    <bootstrap thing="fToughness"></bootstrap>
    <eval phase="PreLevel" priority="10000" index="2"><![CDATA[~ bonus to natural armor based on size
      var bonus as number
        if (hero.tagis[Size.Diminutive]+ hero.tagis[Size.Tiny] <> 0) then
        bonus = 0
        elseif (hero.tagis[Size.Small] <> 0) then
        bonus = 1
      elseif (hero.tagis[Size.Medium] <> 0) then
        bonus = 2
      elseif (hero.tagis[Size.Large] <> 0) then
        bonus = 3
      elseif (hero.tagis[Size.Huge] <> 0) then
        bonus = 4
      elseif (hero.tagis[Size.Gargantuan] <> 0) then
        bonus = 7
      elseif (hero.tagis[Size.Colossal] <> 0) then
        bonus = 11
        endif
      hero.child[mNatural].field[Bonus].value = bonus]]></eval>
    <prereq message="Corporeal creature required." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Undead type forbidden." iserror="no">
      <validate><![CDATA[
        ~once we've been selected, we're fine (since this makes the creature undead).
        validif (@ispick <> 0)

        ~we're valid if the hero is living
        validif (#hastype[tpUndead] = 0)]]></validate>
      </prereq>
    </thing>
  <thing id="tmuStoneId" name="Stone Idol" description="Hidden beneath a silken cloth and carried on the shoulders of priests, a stone idol can send a frisson of fear through an audience with its mere presence. When the cloth is removed, those nearby rush to worship it, feeling its power in their very souls. When at last its gaze has turned all their fear into love, the stone idol speaks, answering the high priest&apos;s questions about what its people must do. Finally, when the moment is right, the idol moves upon the high priest&apos;s command, to the rapturous joy of the congregation.\n\nStone idols are constructs that grant their creators power, prestige, and control over others. Crafted to resemble gods, monstrous creatures, or even heroic individuals, stone idols are used in worship services and to gather cults of both the faithful and the fanatical. The idols&apos; masters must be forever wary, however, since the worship of others sometimes leads stone idols to share their masters&apos; hunger for power.\n\n{b}Creation{/b}\nStone idols are created in the same manner as golems. Because a stone idol is composed of stone, it weighs three times what the base creature does. Creating the stone idol costs 1,500 gp Ã— the stone idol&apos;s CR. Assembling the body requires successful DC 20 Craft (sculpting or masonry) check and the Craft Construct feat.\n\nTh e creator must have a character level that equals or exceeds 4 + stone idol&apos;s CR and be able to cast either arcane or divine spells. Completing the ritual requires the spells charm monster, cause fear, geas/quest, limited wish, polymorph any object, and resist elements." compset="Template" uniqueness="unique">
    <fieldval field="tmSTR" value="4"/>
    <fieldval field="tmDEX" value="-2"/>
    <fieldval field="tmWIS" value="-2"/>
    <fieldval field="tmCHA" value="-4"/>
    <fieldval field="tmAC" value="3"/>
    <fieldval field="tmReplRaHD" value="10"/>
    <fieldval field="tmInfHD" value="Change racial HD to d10."/>
    <arrayval field="tmCRArray" index="0" value="3"/>
    <usesource source="srcAdvBest"/>
    <tag group="TemplHelp" tag="Inherited"/>
    <tag group="ClVaryName" tag="Prepend"/>
    <tag group="ProductId" tag="HLCommunit"/>
    <tag group="TypeAndAug" tag="tpConst"/>
    <bootstrap thing="xVulSonic"></bootstrap>
    <bootstrap thing="rauStIdChG">
      <autotag group="Value" tag="10"/>
      </bootstrap>
    <bootstrap thing="rauStIdFea">
      <autotag group="Value" tag="60"/>
      </bootstrap>
    <bootstrap thing="rauSIdRsSp"></bootstrap>
    <bootstrap thing="rauStIdCrF"></bootstrap>
    <bootstrap thing="rauSIdPowe"></bootstrap>
    <bootstrap thing="raHardness">
      <autotag group="Value" tag="8"/>
      </bootstrap>
    <bootstrap thing="xConstruct"></bootstrap>
    <bootstrap thing="xuSIdHlfRg"></bootstrap>
    <bootstrap thing="xuSIdHlfEn"></bootstrap>
    <eval phase="PreAttr" priority="1000">
      ~ set minimuns of abilities
      hero.child[aDEX].field[aNormMin].value = 1
      hero.child[aWIS].field[aNormMin].value = 1
      hero.child[aCHA].field[aNormMin].value = 1

      ~ set Int to 6
      hero.child[aINT].field[aNormForce].value = 6</eval>
    <prereq message="Corproeal creature required.">
      <validate><![CDATA[        
        ~ once we've been selected, we're fine
        validif (@ispick <> 0)

        ~ we're valid if the incorporeal special isn't present
        validif (#hasability[raIncorpor] = 0)]]></validate>
      </prereq>
    <prereq message="Living creature required.">
      <validate><![CDATA[
        ~ once we've been selected, we're fine
        validif (@ispick <> 0)

        ~we're valid if the hero is not unliving
        validif (hero.tagis[NotLiving.?] = 0)]]></validate>
      </prereq>
    </thing>














  </document>